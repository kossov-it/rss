{"title":"Hacker News","items":[{"id":"https://www.eff.org/deeplinks/2025/12/ai-police-reports-year-review","title":"AI Police Reports: Year in Review","link":"https://www.eff.org/deeplinks/2025/12/ai-police-reports-year-review","hnCommentsUrl":"https://news.ycombinator.com/item?id=46367195","content":"<a href=\"https://news.ycombinator.com/item?id=46367195\">Comments</a>","date":1766511015000,"feedTitle":"Hacker News","isHackerNews":true,"isGoogleNews":false,"fullContent":"<div><p><span>In 2024, EFF wrote our initial blog about </span><a href=\"https://www.eff.org/deeplinks/2024/05/what-can-go-wrong-when-police-use-ai-write-reports\"><span>what could go wrong when police let AI write police reports</span></a><span>. Since then, the technology has proliferated at a disturbing rate. Why? The most popular generative AI tool for writing police reports is Axon‚Äôs Draft One, and Axon also happens to be the largest provider of body-worn cameras to police departments in the United States. As we‚Äôve written, companies are increasingly </span><a href=\"https://www.eff.org/deeplinks/2025/04/beware-bundle-companies-are-banking-becoming-your-police-departments-favorite\"><span>bundling their products</span></a><span> to make it easier for police to buy more technology than they may need or that the public feels comfortable with.&nbsp;</span></p> <p><span>We have good news and bad news.&nbsp;</span></p> <p><b>Here‚Äôs the bad news:</b><span> AI written police reports are still unproven, untransparent, and downright irresponsible‚Äìespecially when the criminal justice system, informed by police reports, is deciding people‚Äôs freedom. The King County prosecuting attorney‚Äôs office in Washington state </span><a href=\"https://www.eff.org/deeplinks/2024/10/prosecutors-washington-state-warn-police-dont-use-gen-ai-write-reports\"><span>barred police from using AI to write police reports</span></a><span>. As their </span><a href=\"https://komonews.com/amp/news/local/king-county-prosecutor-tells-police-not-to-use-ai-artificial-intelligence-for-official-reports-for-now-errors-concerns-law-enforcement-perjury-criminal-justice\"><span>memo</span></a><span> read, ‚ÄúWe do not fear advances in technology ‚Äì but we do have legitimate concerns about some of the products on the market now... AI continues to develop and we are hopeful that we will reach a point in the near future where these reports can be relied on. For now, our office has made the decision not to accept any police narratives that were produced with the assistance of AI.‚Äù&nbsp;</span></p> <p><span>In July of this year, EFF published a </span><a href=\"https://www.eff.org/deeplinks/2025/07/axons-draft-one-designed-defy-transparency\"><span>two-part </span></a><span>report on how Axon designed Draft One to defy transparency. Police upload their body-worn camera‚Äôs audio into the system, the system generates a report that the officer is expected to edit, and then the officer exports the report. But when they do that, Draft One erases the initial draft, and with it any evidence of what portions of the report were written by AI and what portions were written by an officer. That means that if an officer is caught lying on the stand ‚Äì as shown by a contradiction between their courtroom testimony and their earlier police report ‚Äì they could point to the contradictory parts of their report and say, ‚Äúthe AI wrote that.‚Äù Draft One is designed to make it hard to disprove that.&nbsp;</span></p> <p><span>In this video of a</span><a href=\"https://vimeo.com/941650612\"> <span>roundtable discussion about Draft One</span></a><span>, Axon‚Äôs senior principal product manager for generative AI is asked (at the 49:47 mark) whether or not it‚Äôs possible to see after-the-fact which parts of the report were suggested by the AI and which were edited by the officer. His response (bold and definition of RMS added):&nbsp;</span></p> <p><span>‚Äú</span><b>So we don‚Äôt store the original draft and that‚Äôs by design and that‚Äôs really because the last thing we want to do is create more disclosure headaches for our customers and our attorney‚Äôs offices</b><span>‚Äîso basically the officer generates that draft, they make their edits, if they submit it into our Axon records system then that‚Äôs the only place we store it, if they copy and paste it into their third-party RMS [records management system] system as soon as they‚Äôre done with that and close their browser tab, it‚Äôs gone. It‚Äôs actually never stored in the cloud at all so you don‚Äôt have to worry about extra copies floating around.‚Äù</span></p> <p><span>Yikes!&nbsp;</span></p> <p><span>All of this obfuscation also makes it incredibly hard for people outside police departments to figure out if their city‚Äôs officers are using AI to write reports‚Äìand even harder to use public records requests to audit just those reports. That‚Äôs why this year EFF also put out a </span><a href=\"https://www.eff.org/deeplinks/2025/07/effs-guide-getting-records-about-axons-ai-generated-police-reports\"><span>comprehensive guide</span></a><span> to help the public make their records requests as tailored as possible to learn about AI-generated reports.&nbsp;</span></p> <p><b>Ok, now here‚Äôs the good news:&nbsp;</b><span>People who believe AI-written police reports are irresponsible and potentially harmful to the public are fighting back.&nbsp;</span></p> <p><span>This year, two states have passed bills that are an important first step in reigning in AI police reports. Utah‚Äôs </span><a href=\"https://le.utah.gov/~2025/bills/static/SB0180.html\"><span>SB 180</span></a><span> mandates that police reports created in whole or in part by generative AI have a disclaimer that the report contains content generated by AI. It also requires officers to certify that they checked the report for accuracy. </span><a href=\"https://www.eff.org/deeplinks/2025/10/victory-california-requires-transparency-ai-police-reports\"><span>California‚Äôs SB 524</span></a><span> went even further. It requires police to disclose, on the report, if it was used to fully or in part author a police report. Further, it bans vendors from selling or sharing the information a police agency provided to the AI. The bill also requires departments to retain the first draft of the report so that judges, defense attorneys, or auditors could readily see which portions of the final report were written by the officer and which portions were written by the computer.</span></p> <p><span>In the coming year, anticipate many more states joining California and Utah in regulating, or perhaps even banning, police from using AI to write their reports.&nbsp;</span></p> <p><span><span><i>This article is part of our Year in Review series. <a href=\"https://www.eff.org/tags/2025-review\">Read other articles</a> about the fight for digital rights in 2025.</i></span></span></p> </div>"},{"id":"https://nesbitt.io/2025/12/26/how-uv-got-so-fast.html","title":"How uv got so fast","link":"https://nesbitt.io/2025/12/26/how-uv-got-so-fast.html","hnCommentsUrl":"https://news.ycombinator.com/item?id=46393992","content":"<a href=\"https://news.ycombinator.com/item?id=46393992\">Comments</a>","date":1766769187000,"feedTitle":"Hacker News","isHackerNews":true,"isGoogleNews":false,"fullContent":"<div itemprop=\"articleBody\"> <p>uv installs packages faster than pip by an order of magnitude. The usual explanation is ‚Äúit‚Äôs written in Rust.‚Äù That‚Äôs true, but it doesn‚Äôt explain much. Plenty of tools are written in Rust without being notably fast. The interesting question is what design decisions made the difference.</p> <p>Charlie Marsh‚Äôs <a href=\"https://www.janestreet.com/tech-talks/uv-an-extremely-fast-python-package-manager/\">Jane Street talk</a> and a <a href=\"https://xebia.com/blog/uv-the-engineering-secrets-behind-pythons-speed-king/\">Xebia engineering deep-dive</a> cover the technical details well. The interesting parts are the design decisions: standards that enable fast paths, things uv drops that pip supports, and optimizations that don‚Äôt require Rust at all.</p> <h2 id=\"the-standards-that-made-uv-possible\">The standards that made uv possible</h2> <p>pip‚Äôs slowness isn‚Äôt a failure of implementation. For years, Python packaging required executing code to find out what a package needed.</p> <p>The problem was <a href=\"https://setuptools.pypa.io/\">setup.py</a>. You couldn‚Äôt know a package‚Äôs dependencies without running its setup script. But you couldn‚Äôt run its setup script without installing its build dependencies. <a href=\"https://peps.python.org/pep-0518/\">PEP 518</a> in 2016 called this out explicitly: ‚ÄúYou can‚Äôt execute a setup.py file without knowing its dependencies, but currently there is no standard way to know what those dependencies are in an automated fashion without executing the setup.py file.‚Äù</p> <p>This chicken-and-egg problem forced pip to download packages, execute untrusted code, fail, install missing build tools, and try again. Every install was potentially a cascade of subprocess spawns and arbitrary code execution. Installing a source distribution was essentially <code>curl | bash</code> with extra steps.</p> <p>The fix came in stages:</p> <ul> <li><a href=\"https://peps.python.org/pep-0518/\">PEP 518</a> (2016) created pyproject.toml, giving packages a place to declare build dependencies without code execution. The TOML format was borrowed from Rust‚Äôs Cargo, which makes a Rust tool returning to fix Python packaging feel less like coincidence.</li> <li><a href=\"https://peps.python.org/pep-0517/\">PEP 517</a> (2017) separated build frontends from backends, so pip didn‚Äôt need to understand setuptools internals.</li> <li><a href=\"https://peps.python.org/pep-0621/\">PEP 621</a> (2020) standardized the <code>[project]</code> table, so dependencies could be read by parsing TOML rather than running Python.</li> <li><a href=\"https://peps.python.org/pep-0658/\">PEP 658</a> (2022) put package metadata directly in the Simple Repository API, so resolvers could fetch dependency information without downloading wheels at all.</li> </ul> <p>PEP 658 went live on PyPI in May 2023. uv launched in February 2024. uv could be fast because the ecosystem finally had the infrastructure to support it. A tool like uv couldn‚Äôt have shipped in 2020. The standards weren‚Äôt there yet.</p> <p>Other ecosystems figured this out earlier. Cargo has had static metadata from the start. npm‚Äôs package.json is declarative. Python‚Äôs packaging standards finally bring it to parity.</p> <h2 id=\"what-uv-drops\">What uv drops</h2> <p>Speed comes from elimination. Every code path you don‚Äôt have is a code path you don‚Äôt wait for.</p> <p>uv‚Äôs <a href=\"https://docs.astral.sh/uv/pip/compatibility/\">compatibility documentation</a> is a list of things it doesn‚Äôt do:</p> <p><strong>No .egg support.</strong> Eggs were the pre-wheel binary format. pip still handles them; uv doesn‚Äôt even try. The format has been obsolete for over a decade.</p> <p><strong>No pip.conf.</strong> uv ignores pip‚Äôs configuration files entirely. No parsing, no environment variable lookups, no inheritance from system-wide and per-user locations.</p> <p><strong>No bytecode compilation by default.</strong> pip compiles .py files to .pyc during installation. uv skips this step, shaving time off every install. You can opt in if you want it.</p> <p><strong>Virtual environments required.</strong> pip lets you install into system Python by default. uv inverts this, refusing to touch system Python without explicit flags. This removes a whole category of permission checks and safety code.</p> <p><strong>Stricter spec enforcement.</strong> pip accepts malformed packages that technically violate packaging specs. uv rejects them. Less tolerance means less fallback logic.</p> <p><strong>Ignoring requires-python upper bounds.</strong> When a package says it requires <code>python&lt;4.0</code>, uv ignores the upper bound and only checks the lower. This reduces resolver backtracking dramatically since upper bounds are almost always wrong. Packages declare <code>python&lt;4.0</code> because they haven‚Äôt tested on Python 4, not because they‚Äôll actually break. The constraint is defensive, not predictive.</p> <p><strong>First-index wins by default.</strong> When multiple package indexes are configured, pip checks all of them. uv picks from the first index that has the package, stopping there. This prevents dependency confusion attacks and avoids extra network requests.</p> <p>Each of these is a code path pip has to execute and uv doesn‚Äôt.</p> <h2 id=\"optimizations-that-dont-need-rust\">Optimizations that don‚Äôt need Rust</h2> <p>Some of uv‚Äôs speed comes from Rust. But not as much as you‚Äôd think. Several key optimizations could be implemented in pip today:</p> <p><strong>HTTP range requests for metadata.</strong> <a href=\"https://packaging.python.org/en/latest/specifications/binary-distribution-format/\">Wheel files</a> are zip archives, and zip archives put their file listing at the end. uv tries PEP 658 metadata first, falls back to HTTP range requests for the zip central directory, then full wheel download, then building from source. Each step is slower and riskier. The design makes the fast path cover 99% of cases. None of this requires Rust.</p> <p><strong>Parallel downloads.</strong> pip downloads packages one at a time. uv downloads many at once. Any language can do this.</p> <p><strong>Global cache with hardlinks.</strong> pip copies packages into each virtual environment. uv keeps one copy globally and uses <a href=\"https://en.wikipedia.org/wiki/Hard_link\">hardlinks</a> (or copy-on-write on filesystems that support it). Installing the same package into ten venvs takes the same disk space as one. Any language with filesystem access can do this.</p> <p><strong>Python-free resolution.</strong> pip needs Python running to do anything, and invokes build backends as subprocesses to get metadata from legacy packages. uv parses TOML and wheel metadata natively, only spawning Python when it hits a setup.py-only package that has no other option.</p> <p><strong>PubGrub resolver.</strong> uv uses the <a href=\"https://github.com/dart-lang/pub/blob/master/doc/solver.md\">PubGrub algorithm</a>, originally from Dart‚Äôs pub package manager. pip uses a backtracking resolver. PubGrub is faster at finding solutions and better at explaining failures. pip could adopt PubGrub without rewriting in Rust.</p> <h2 id=\"where-rust-actually-matters\">Where Rust actually matters</h2> <p>Some optimizations do require Rust:</p> <p><strong>Zero-copy deserialization.</strong> uv uses <a href=\"https://rkyv.org/\">rkyv</a> to deserialize cached data without copying it. The data format is the in-memory format. This is a Rust-specific technique.</p> <p><strong>Lock-free concurrent data structures.</strong> Rust‚Äôs ownership model makes concurrent access safe without locks. Python‚Äôs GIL makes this difficult.</p> <p><strong>No interpreter startup.</strong> Every time pip spawns a subprocess, it pays Python‚Äôs startup cost. uv is a single static binary with no runtime to initialize.</p> <p><strong>Compact version representation.</strong> uv packs versions into u64 integers where possible, making comparison and hashing fast. Over 90% of versions fit in one u64. This is micro-optimization that compounds across millions of comparisons.</p> <p>These are real advantages. But they‚Äôre smaller than the architectural wins from dropping legacy support and exploiting modern standards.</p> <h2 id=\"design-over-language\">Design over language</h2> <p>uv is fast because of what it doesn‚Äôt do, not because of what language it‚Äôs written in. The standards work of PEP 518, 517, 621, and 658 made fast package management possible. Dropping eggs, pip.conf, and permissive parsing made it achievable. Rust makes it a bit faster still.</p> <p>pip could implement parallel downloads, global caching, and metadata-only resolution tomorrow. It doesn‚Äôt, largely because backwards compatibility with fifteen years of edge cases takes precedence. But it means pip will always be slower than a tool that starts fresh with modern assumptions.</p> <p>Other package managers could learn from this: static metadata, no code execution to discover dependencies, and the ability to resolve everything upfront before downloading. Cargo and npm have operated this way for years. If your ecosystem requires running arbitrary code to find out what a package needs, you‚Äôve already lost.</p> </div>"},{"id":"https://github.com/Syn-Nine/gar-lang/blob/main/DEVLOG.md","title":"Langjam-Gamejam Devlog: Making a language, compiler, VM and 5 games in 52 hours","link":"https://github.com/Syn-Nine/gar-lang/blob/main/DEVLOG.md","hnCommentsUrl":"https://news.ycombinator.com/item?id=46348251","content":"<a href=\"https://news.ycombinator.com/item?id=46348251\">Comments</a>","date":1766349875000,"feedTitle":"Hacker News","isHackerNews":true,"isGoogleNews":false},{"id":"https://devblog.qnx.com/qnx-self-hosted-developer-desktop-initial-release/","title":"QNX Self-Hosted Developer Desktop","link":"https://devblog.qnx.com/qnx-self-hosted-developer-desktop-initial-release/","hnCommentsUrl":"https://news.ycombinator.com/item?id=46398201","content":"<a href=\"https://news.ycombinator.com/item?id=46398201\">Comments</a>","date":1766798213000,"feedTitle":"Hacker News","isHackerNews":true,"isGoogleNews":false,"fullContent":"<section> <p>The team and I are beyond excited to share what we've been cooking up over the last little while: <strong>a full desktop environment running on QNX 8.0, with support for self-hosted compilation</strong>! This environment both makes it easier for newly-minted QNX developers to get started with building for QNX, but it also vastly simplifies the process of porting Linux applications and libraries to QNX 8.0.</p><p>This self-hosted target environment is pre-loaded with many of the ports you'll find on <a href=\"https://oss.qnx.com/?ref=devblog.qnx.com\" rel=\"noreferrer\">the QNX Open-source Dashboard</a>. (The portal currently includes over 1,400 ports across various targets, QNX versions, and architectures, of which more than 600 are unique ports!)</p><p>In this initial release, you can grab a copy of the QEMU image and give it a try for yourself. There's still so much more to add, but it's in a great place today for this first release. The team is really passionate about this one, and we're eagerly looking forward to your feedback!</p><h2 id=\"whats-included\">What's Included</h2><p>For the initial release of Desktop, we tried to cover all the basics: windowing, terminal, IDEs, browser, file management, and samples. To that end, here's what makes up the QNX Developer Desktop:</p><ul><li>A customizable XFCE desktop environment running on Wayland</li><li>The tools you need to compile and/or run your code (<code>clang</code>, gcc, <code>clang++</code>, Python, <code>make</code>, <code>cmake</code>, <code>git</code>, etc)</li><li>A web browser (can you join <a href=\"https://discord.gg/Jj4EkkrFTT?ref=devblog.qnx.com\" rel=\"noreferrer\">the QNX Discord</a> from the QNX Desktop? üèÖüëÄ)</li><li>Ports of popular IDEs/editors, like Geany, Emacs, Neovim, and vim</li><li>Thunar, for file management</li><li>Preloaded samples, like Hello World in C, C++, and Python, and GTK demos OpenGL ES demos</li><li>... and of course, a terminal.</li></ul><h2 id=\"system-requirements\">System Requirements</h2><p>This environment runs as a virtual machine, using QEMU on Ubuntu. To try the image, you'll need:</p><ul><li>Ubuntu 22.04 or 24.04</li></ul><h2 id=\"try-it-yourself\">Try It Yourself</h2><p>(Keep in mind this is the first release, so it takes a minute to get started and it's a bit rough around the edges.)</p><p>With <a href=\"https://qnx.com/getqnx?ref=devblog.qnx.com\" rel=\"noreferrer\">a free QNX license</a>, you can find this release in QNX Software Center. On the <strong>Available</strong> tab of the <strong>Manage Installation</strong> pane, search for \"quick start\" and install the \"QNX SDP 8.0 Quick Start Target Image for QEMU\".</p><p>You'll find the image in your QNX installation directory, usually <code>~/qnx800/images</code> by default. Follow the <code>README.md</code> file in the <code>qemu</code> directory to extract &amp; combine the multiple QNX packages downloaded under the hood.</p><p>Next, follow the PDF instructions found in the new <code>./qemu_qsti/docs/</code> directory to install the required dependencies and boot up.</p><div><p>üí°</p><p>If you experience any trouble starting the environment, check the PDF's <b><strong>Troubleshooting</strong></b> chapter, or come <a href=\"https://discord.gg/Jj4EkkrFTT?ref=devblog.qnx.com\" rel=\"noreferrer\">ask us on Discord</a>.</p></div><h2 id=\"whats-next\">What's Next</h2><p>This is just the very first release! Over the next few months and beyond, we'll drop more updates of Desktop. You can look forward to:</p><ul><li>QEMU images for Windows &amp; macOS, and native images for x86</li><li>A native Desktop image on Raspberry Pi</li><li>Enhanced documentation</li><li>Features to help use this self-hosted environment in CI jobs</li><li>More samples &amp; stability</li><li>... and more! Have suggestions? Let us know.</li></ul><p>Lastly, if you want some help with your QNX journey, you can find the QNX team and community:</p><ul><li>in Discord here: <a href=\"https://discord.gg/Jj4EkkrFTT?ref=devblog.qnx.com\" rel=\"noreferrer\">discord.gg/Jj4EkkrFTT</a></li><li>on Reddit at: <a href=\"https://reddit.com/r/qnx?ref=devblog.qnx.com\" rel=\"noreferrer\">reddit.com/r/qnx</a></li></ul> </section>"},{"id":"https://graydon2.dreamwidth.org/193447.html","title":"Always bet on text (2014)","link":"https://graydon2.dreamwidth.org/193447.html","hnCommentsUrl":"https://news.ycombinator.com/item?id=46397379","content":"<a href=\"https://news.ycombinator.com/item?id=46397379\">Comments</a>","date":1766790580000,"feedTitle":"Hacker News","isHackerNews":true,"isGoogleNews":false,"fullContent":"<div id=\"readability-page-1\" class=\"page\"><div><p>I figured I should just post this somewhere so I can make future reference to how I feel about the matter, anytime someone asks me about such-and-such video, 3D, game or \"dynamic\" multimedia system. Don't get me wrong, I like me some illustrations, photos, movies and music.</p><p>But text wins by a mile. Text is everything. My thoughts on this are quite absolute: <em>text is the most powerful, useful, effective communication technology ever</em>, period.</p><div><p><img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e5/The_oldest_writing_in_the_world_-_The_Sumerian_Stone_Tablet.jpg/220px-The_oldest_writing_in_the_world_-_The_Sumerian_Stone_Tablet.jpg\" style=\"max-width: 100%; height: auto; max-height: 300px; object-fit: contain; border-radius: 6px; margin: 10px 0;\">Text is the <em>oldest and most stable</em> communication technology (assuming we treat speech/signing as natural phenomenon -- there are no human societies without it -- whereas textual capability has to be transmitted, taught, acquired) and it's incredibly <em>durable</em>. We can read texts from <em>five thousand years ago</em>, almost the moment they started being produced. It's (literally) \"rock solid\" -- you can readily inscribe it in granite that will likely outlast the human species.<br></p></div><br><div><p><img src=\"https://upload.wikimedia.org/math/1/3/e/13e30a48d35ec57948e8a577db7eb787.png\" style=\"max-width: 100%; height: auto; max-height: 300px; object-fit: contain; border-radius: 6px; margin: 10px 0;\">Text is the <em>most flexible</em> communication technology. Pictures may be worth a thousand words, when there's a picture to match what you're trying to say. But let's hit the random button on wikipedia and pick a sentence, see if you can draw a picture to convey it, mm? Here:</p><blockquote>\"Human rights are moral principles or norms that describe certain standards of human behaviour, and are regularly protected as legal rights in national and international law.\"<br></blockquote><p>Not a <em>chance</em>. Text can convey <em>ideas</em> with a precisely controlled level of ambiguity and precision, implied context and elaborated content, unmatched by anything else. It is not a coincidence that all of literature and poetry, history and philosophy, mathematics, logic, programming and engineering rely on textual encodings for their ideas.<br></p></div><br><div><p><img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/2/21/Rees%27s_Cyclopaedia_Chappe_telegraph.png/220px-Rees%27s_Cyclopaedia_Chappe_telegraph.png\" style=\"max-width: 100%; height: auto; max-height: 300px; object-fit: contain; border-radius: 6px; margin: 10px 0;\"> Text is the <em>most efficient</em> communication technology. By <em>orders of magnitude</em>. This blog post is likely to take perhaps 5000 bytes of storage, and could compress down to maybe 2000; by comparison the following 20-pixel-square image of the silhouette of a tweeting bird takes 4000 bytes: . At every step of communication technology, textual encoding comes first, everything else after. Because it's <em>vastly cheaper</em> on a symbol-by-symbol basis. You have a working <a href=\"https://en.wikipedia.org/wiki/Optical_telegraph\">optical telegraph</a> network running in <em>1790</em> in France. You the better part of a century of <a href=\"https://en.wikipedia.org/wiki/Electrical_telegraph\">electrical telegraphy</a>, trans-oceanic cables and everything, before anyone bothers with trying to carry voice. You have decades of teleprinter and text-only computer networking, mail and news, chat and publishing, editing and diagnostics, before bandwidth gets cheap enough for images, voice and video. You have pagers, SMS, WAP, USSD and blackberries before iPhones. You have <a href=\"http://en.wikipedia.org/wiki/Teletext\">Teletext</a> and BBSs, netnews and gopher before the web. And today many of the best, and certainly the most efficient parts of the web remain text-centric. I can download <em>all of wikipedia</em> and carry it around on the average smartphone.</p></div><br><div><p><img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c3/Gnus-reading-news.png/220px-Gnus-reading-news.png\" style=\"max-width: 100%; height: auto; max-height: 300px; object-fit: contain; border-radius: 6px; margin: 10px 0;\"><br>Text is the most <em>socially useful</em> communication technology. It works <em>well</em> in 1:1, 1:N, and M:N modes. It can be <em>indexed</em> and <em>searched</em> efficiently, even by hand. It can be <em>translated</em>. It can be produced and consumed at variable speeds. It is asynchronous. It can be compared, diffed, clustered, corrected, summarized and filtered algorithmically. It permits multiparty editing. It permits branching conversations, lurking, annotation, quoting, reviewing, summarizing, structured responses, exegesis, even fan fic. The breadth, scale and depth of ways people use text is unmatched by anything. There is no equivalent in <em>any other communication technology</em> for the social, communicative, cognitive and reflective complexity of a library full of books or an internet full of postings. Nothing else comes close.<br></p></div><p>So this is my stance on text: always pick text first. As my old boss might have said: always bet on text. If you can use text for something, use it. It will very seldom let you down.</p></div></div>"},{"id":"https://exe.dev/","title":"Exe.dev","link":"https://exe.dev/","hnCommentsUrl":"https://news.ycombinator.com/item?id=46397609","content":"<a href=\"https://news.ycombinator.com/item?id=46397609\">Comments</a>","date":1766792566000,"feedTitle":"Hacker News","isHackerNews":true,"isGoogleNews":false},{"id":"https://george.mand.is/2025/09/more-dynamic-cronjobs/","title":"More Dynamic Cronjobs","link":"https://george.mand.is/2025/09/more-dynamic-cronjobs/","hnCommentsUrl":"https://news.ycombinator.com/item?id=46399576","content":"<a href=\"https://news.ycombinator.com/item?id=46399576\">Comments</a>","date":1766815842000,"feedTitle":"Hacker News","isHackerNews":true,"isGoogleNews":false,"fullContent":"<section><p>I remember learning about cronjobs in the early 2000s. I could tell the computer to go <em>do</em> something, on a recurring basis, forever, even when I wasn't there. They felt like magic!</p><p>We didn't have <a href=\"https://crontab.guru/\">Crontab.guru</a> or AI to ask for figuring out some of the more complex specifications. Just the <a href=\"https://man.openbsd.org/crontab.5\">man pages</a> and good old-fashioned trial and error‚Äîmostly error in my case.</p><p>But while you could do fun, complex specifications of recurring intervals, you couldn't quite specify something quite as dynamic as \"run this script every Tuesday at 7am <em>unless it's the last Tuesday</em> of the month...\"</p><p>Or at least, you couldn't strictly through the crontab specification syntax. But I had a recent, mildly embarrassing epiphany that it's not hard at all to add arbitrary checks to your crontab to account for more complex and dynamic scenarios.</p><p>Want to run a script every Tuesday of the month at 7am <em>except</em> for the last Tuesday? That's easy‚Äîset up your crontab to run every Tuesday at 7am, but add a little check to make sure the <em>next</em> week is still part of the same month:</p><pre><code>0 7 * * Tue [ \"$(date -v+7d '+%m')\" = \"$(date '+%m')\" ] &amp;&amp; /path/to/your_command </code></pre><p>If it's not part of the same month, that means we're on the <em>last</em> Tuesday for the month and the script won't run.</p><p><strong>Note:</strong> <em>The <code>-v</code> flag is for the macOS/BSD flavors of <code>date</code>. On Linux you'd want to use <code>-d +7 days</code> instead.</em></p><p>This really has nothing to do with cronjobs at all and everything to do with the <a href=\"https://www.unix.com/man_page/posix/1p/test/\">POSIX \"test\" command</a> which is the thing we're using with those square brackets. I'm used to seeing and utilizing them in shell scripts, but for whatever reason I never thought to reach for that tool here in the crontab.</p><p>You could just as easily rewrite it like this, skipping the bracket shorthand, which is probably easier to read:</p><pre><code>0 7 * * Tue test \"$(date -v+7d '+%m')\" = \"$(date '+%m')\" &amp;&amp; /path/to/your_command </code></pre><p>It never crossed my mind until recently to add slightly more complex checks at the crontab level.</p><h3>Other clever cronjob things you can do:</h3><h4>Holiday-only cronjobs</h4><p>Maybe fetch a list of all the US Holidays for a given year and store them in a handy <code>HOLIDAYS.txt</code> file somewhere:</p><pre><code>curl -s https://date.nager.at/api/v3/PublicHolidays/2025/US | jq -r '.[].date' &gt; HOLIDAYS.txt </code></pre><p>Now you can update your cronjob to run every Tuesday at 7am <em>except</em> on Holidays:</p><pre><code>0 7 * * Tue ! grep -qx \"$(date +%F)\" HOLIDAYS.txt &amp;&amp; /path/to/your_command </code></pre><p>Or inversely, maybe run a holiday-only script that checks once a day</p><pre><code>@daily grep -qx \"$(date +%F)\" HOLIDAYS.txt &amp;&amp; /path/to/your_special_holiday_command </code></pre><h4>Only run on sunny days</h4><p>The <a href=\"https://weather.gov/\">National Weather Service</a> makes all kinds of fun data available (if you can find it...). How about a script that runs every hour, but only when the weather is clear?</p><pre><code>@hourly curl -s \"https://api.weather.gov/gridpoints/TOP/32,81/forecast/hourly\" | jq -r '.properties.periods[0].shortForecast' | grep -qi clear &amp;&amp; /path/to/your_command </code></pre><p>Or maybe when the weather is cloudy?</p><pre><code>@hourly curl -s \"https://api.weather.gov/gridpoints/TOP/32,81/forecast/hourly\" | jq -r '.properties.periods[0].shortForecast' | grep -qi cloudy &amp;&amp; /path/to/your_command </code></pre><h4>Only run when there's something newsworthy</h4><p>Or maybe we get in line with every-other-startup I'm aware of and throw AI at the problem, only running our script when the LLM gods have decided there is something newsworthy:</p><pre><code>@hourly curl -s \"https://news.google.com/rss?hl=en-US&amp;gl=US&amp;ceid=US:en\" | llm --system \"Reply strictly 'yes' or 'no'. Does anything in the news today suggest it is a good reason to run a script that I only want to send when the world is on fire and crazy and terrible things are happening?\" | tr -d '[:space:]' | tr '[:upper:]' '[:lower:]' | grep -qx yes &amp;&amp; /path/to/oh_no </code></pre>--<p><em>Published on Sunday, September 21st 2025. Read this post as <a href=\"https://george.mand.is/2025/09/more-dynamic-cronjobs.md\" rel=\"alternate\" type=\"text/markdown\">Markdown</a> or <a href=\"https://george.mand.is/2025/09/more-dynamic-cronjobs.txt\" rel=\"alternate\" type=\"text/plain\">plain-text</a>.</em></p><p><em>If you enjoyed reading this consider <a href=\"https://buttondown.com/georgemandis\">signing-up for my newsletter</a>, <a href=\"https://news.ycombinator.com/submitlink?u=https://george.mand.is/2025/09/more-dynamic-cronjobs/&amp;t=More%20dynamic%20cronjobs\">sharing it on Hacker News</a> or <a href=\"https://george.mand.is/hire\">hiring me</a>.</em></p></section>"},{"id":"https://blog.fogus.me/2025/12/23/the-best-things-and-stuff-of-2025.html","title":"The best things and stuff of 2025","link":"https://blog.fogus.me/2025/12/23/the-best-things-and-stuff-of-2025.html","hnCommentsUrl":"https://news.ycombinator.com/item?id=46365726","content":"<a href=\"https://news.ycombinator.com/item?id=46365726\">Comments</a>","date":1766501493000,"feedTitle":"Hacker News","isHackerNews":true,"isGoogleNews":false,"fullContent":"<div id=\"readability-page-1\" class=\"page\"> <p>Great things and people that I discovered, learned, read, met, etc. in 2025. No particular ordering is implied. Not everything is new.</p> <p><em>also: see the lists from <a href=\"https://blog.fogus.me/2024/12/23/the-best-things-and-stuff-of-2024.html\">2024</a>, <a href=\"https://blog.fogus.me/2023/12/18/the-best-things-and-stuff-of-2023/\">2023</a>, <a href=\"http://blog.fogus.me/2022/12/13/the-best-things-and-stuff-of-2022/\">2022</a>, <a href=\"https://blog.fogus.me/2021/12/27/the-best-things-and-stuff-of-2021/\">2021</a>, <a href=\"http://blog.fogus.me/2020/12/31/the-best-things-and-stuff-of-2020/\">2020</a>, <a href=\"http://blog.fogus.me/2019/12/30/the-best-things-and-stuff-of-2019/\">2019</a>, <a href=\"http://blog.fogus.me/2019/01/02/the-best-things-and-stuff-of-2018/\">2018</a>, <a href=\"http://blog.fogus.me/2018/01/02/the-best-things-and-stuff-of-2017/\">2017</a>, <a href=\"http://blog.fogus.me/2016/12/29/the-best-things-and-stuff-of-2016/\">2016</a>, <a href=\"http://blog.fogus.me/2015/12/29/the-best-things-and-stuff-of-2015/\">2015</a>, <a href=\"http://blog.fogus.me/2014/12/29/the-best-things-and-stuff-of-2014/\">2014</a>, <a href=\"http://blog.fogus.me/2013/12/27/the-best-things-and-stuff-of-2013/\">2013</a>, <a href=\"http://blog.fogus.me/2012/12/26/the-best-things-and-stuff-of-2012/\">2012</a>, <a href=\"http://blog.fogus.me/2011/12/31/the-best-things-and-stuff-of-2011/\">2011</a> and <a href=\"http://blog.fogus.me/2010/12/30/the-best-things-in-2010/\">2010</a></em></p> <h2 id=\"great-posts-articles-vids-readwatched\">Great posts | articles | vids read/watched</h2> <ul> <li><em><a href=\"https://chadnauseam.com/coding/random/calculator-app\">A calculator app? Anyone could make that</a></em> by Chad Nauseam, esquire - <em>I love the story about how Hans Boehm and friends developed a mind-blowing approach called recursive real arithmetic for numbers like pi and (sqrt 2). The post details various symptom -&gt; problem definition -&gt; alternative solutions -&gt; solution cycles that the team met along the way and should be required reading for programmers.</em></li> <li><em><a href=\"https://www.youtube.com/watch?v=JVyz17kwIv4\">Lost in Manboo</a></em> - <em>„Éû„É≥„Ç¨Âñ´Ëå∂„Éû„É≥„Éú (manga cafe manboo) shows life for some folks who live in 24-hour game cafes in Japan. The video is dystopic in a way that matches our modern world perfectly.</em><a href=\"#fn1\" id=\"fnref1\" role=\"doc-noteref\"><sup>1</sup></a></li> <li><em><a href=\"https://www.youtube.com/watch?v=0z7_A_8il_g\">The Making of Deeper in You on the OP-1</a></em> - <em>Shows an artist‚Äôs approach to song creation/composition using the OP-1 synthesizer. This is hypnotic to watch for someone with zero musical talent like myself.</em></li> <li><em><a href=\"https://thecreativeindependent.com/people/multi-disciplinary-artist-jack-rusher-on-the-need-to-sustain-your-creative-drive-in-the-face-of-technological-change/\">An interview with Jack Rusher</a></em> by The Creative Independent - <em>A lovely interview with online friend Jack Rusher discussing the thoughtful application of tech in art, flow, and the state of research in the modern computing industry.</em></li> <li><em><a href=\"https://www.youtube.com/watch?v=MWteJW-wYas\">Uncredited: Searching for Lost Board Game Designers</a></em> by Amabel Holland - <em>Amabel describes her trials and tribulations while trying to find the designers of the long-forgotten board game <a href=\"https://boardgamegeek.com/boardgame/4791/duplicate-ad-lib-crossword-cubes\">Duplicate Ad-Lib Crossword Cubes</a>.</em></li> <li><em><a href=\"https://www.youtube.com/watch?v=TldMsMtHvW8\">Brian Weissman on his Magic the Gathering history</a></em> - <em>For anyone who came of age during the earliest years of Magic, the name Brian Weissman is legendary. In this interview he gives countless anecdotes about his experiences in those early days.</em></li> <li><em><a href=\"https://wormwoodiana.blogspot.com/2025/08/before-arcturus-david-lindsays-lost.html\">Before Arcturus: David Lindsay‚Äôs Lost Novels</a></em> by Mark Valentine - <em>Mark‚Äôs research into David Lindsay revealed evidence that he submitted at least two earlier novels, Aletheus and The Confessions of an Egoist, to the publisher Chatto &amp; Windus in 1902 and 1908. These submissions predated his first published masterpiece, <a href=\"https://bookshop.org/p/books/a-voyage-to-arcturus-an-illuminated-edition-david-lindsay/76f8dc45a1376ddf?aid=98208&amp;ean=9781948886307&amp;listref=best-things-2025&amp;next=t\">A Voyage to Arcturus</a>.</em></li> <li><em><a href=\"https://what-dan-read.com/\">What Dan Read</a></em> by Dan - <em>An amazing account of a lifetime of reading.</em></li> <li><em><a href=\"https://www.smithsonianmag.com/arts-culture/two-years-cormac-mccarthys-death-rare-access-to-personal-library-reveals-man-behind-myth-180987150/\">Two Years After Cormac McCarthy‚Äôs Death, Rare Access to His Personal Library Reveals the Man Behind the Myth</a></em> by Richard Grant - <em>A glimpse into Cormac McCarthy‚Äôs massive, chaotically organized personal library reveals the reclusive author as a polymath with an insatiable curiosity. Scholars are currently cataloging the estimated 20,000 volumes, many of which contain the author‚Äôs annotations.</em></li> </ul> <h2 id=\"most-viewed-postsvideos-withby-me\">Most viewed posts/videos with/by me</h2> <p>While I‚Äôve posted a few technical post on my personal blog, I‚Äôve taken a lot of time to guest-post on the <a href=\"https://wormwoodiana.blogspot.com/search/label/Fogus\">Wormwoodania blog</a> about weird, macabre, and sardonic fiction and other related, non-technical topics. I hope to continue this trend into next year. Also, my most assiduous readers will have noticed that I‚Äôve written more about games. I‚Äôve decided to keep those posts on this blog since my intent for the site has always been about systems and systems-thinking and games are a great way to study and model systems.</p> <ul> <li><em><a href=\"https://blog.fogus.me/langdev/long-season.html\">The long season of langdev</a></em> - <em>Whereby I speculate if programming language development is in a lull.</em></li> <li><em><a href=\"https://wormwoodiana.blogspot.com/2025/08/on-baron-corvo-greatest-asshole-who.html\">On ‚ÄòBaron Corvo: The Greatest Asshole Who Ever Lived‚Äô</a></em> - <em>My review of Johan Kugelberg‚Äôs pamphlet on why Baron Corvo still intrigues people.</em><a href=\"#fn2\" id=\"fnref2\" role=\"doc-noteref\"><sup>2</sup></a></li> <li><em><a href=\"https://wormwoodiana.blogspot.com/2025/09/derek-raymond-and-black-novel-guest.html\">Derek Raymond and ‚ÄòThe Black Novel‚Äô</a></em> - <em>Discusses the author Derek Raymond‚Äôs criteria for what he calls ‚Äòblack novels‚Äô.</em></li> <li><em><a href=\"https://wormwoodiana.blogspot.com/2025/06/corvos-icicle-guest-post-by-fogus.html\">Corvo‚Äôs Icicle</a></em> - <em>Did Baron Corvo invent the mystery trope of the melting weapon?</em></li> <li><em><a href=\"https://blog.fogus.me/clojure/arities-as-proto.html\">Arities as Pseudo-Protocol</a></em> - <em>Whereby I describe a little-used Clojure technique leveraging function arities as a lightweight interface/protocol.</em></li> <li><em><a href=\"https://www.youtube.com/watch?v=_g69GKN6lAM\">My appearance on the Apropos Podcast</a></em> - <em>Sat down with the Apropos crew and had a great time talking Clojure.</em></li> <li><em><a href=\"https://wormwoodiana.blogspot.com/2025/03/meeting-corvo-and-weeks-in-georgetown.html\">Meeting Corvo and Weeks in Georgetown</a></em> - <em>A brief description of some of my hobby research.</em></li> <li><em><a href=\"https://blog.fogus.me/games/18XX/intro.html\">18XX: A System of Systems</a></em> - <em>A description of 18XX board games as a system of systems.</em></li> <li><em><a href=\"https://blog.fogus.me/games/bird-poker.html\">The Bird-Poker Deck</a></em> - <em>A truncated pack of playing cards that displays some interesting game-play characteristics.</em></li> <li><em><a href=\"https://blog.fogus.me/games/checkers-arcade.html\">Checkers Arcade</a></em> - <em>Using an American Checkers set to play many deep games of abstract strategy.</em></li> </ul> <h2 id=\"favorite-technical-books-discovered-and-read\">Favorite technical books discovered (and read)</h2> <ul> <li><strong><a href=\"http://mouse.davidgsimpson.com/\">Mouse, a Language for Microcomputers</a></strong> by Peter Grogono - <em>Mouse is basically an esolang with barely any abstraction facilities, but the book was well-written and the language compelling enough to explore further.</em></li> <li><strong><a href=\"https://explodingthephone.com/hoppdocs/nodd1956.pdf\">Notes on Distance Dialing</a></strong> (pdf) by AT&amp;T - <em>Described the telephone systems of the USA and Canada in the mid-1950s. The reading is a dry as it gets, but it was a fascinating dive into a vastly complex system solving extremely hard problems. This is a must-read for folks interested in systems-thinking. That said, I am actively looking for recommendations for books about the process of designing and building the unbelievably complex telephony system over the rudiments of the earlier systems. Recommendations welcomed!</em></li> </ul> <h2 id=\"favorite-non-technical-books-read\">Favorite non-technical books read</h2> <p>The vast majority of my reading this year was fiction, and I discovered some real gems.<a href=\"#fn3\" id=\"fnref3\" role=\"doc-noteref\"><sup>3</sup></a></p> <ul> <li><strong><a href=\"https://www.gutenberg.org/ebooks/24201\">The Eye of Osiris</a></strong> by R. Austin Freeman - <em>This is the first book that I‚Äôve read from Freeman and I suspect that I will read many more in the future. The story follows the disappearance of John Bellingham, Egyptologist and the subsequent investigation. As the investigation stalls, the eminent Dr.&nbsp;Thorndyke digs into the case. The story sets up the mystery nicely and indeed provides enough information to the reader to infer how the disappearance occurred and who or what facilitated it. The book is one of the best whodunits that I‚Äôve ever read.</em></li> <li><strong><a href=\"https://www.gutenberg.org/ebooks/564\">The Mystery of Edwin Drood</a></strong> by Charles Dickens - <em>His final work remains unfinished as he passed away before he could complete it. Further complicating the meta-story is that he also didn‚Äôt outline the ending nor even put to paper the ‚Äúvillain‚Äù of the story. The meta-mystery of the ending has motivated a mountain of speculation around the ending including dozens of continuations of the story from other authors, all deriving their pet endings from textual hints, accounts from Dickens‚Äô friends, illustration notes, and even in some cases seances supposedly accompanied by the spirit of Dickens himself. What was written by Dickens is spectacular and a compelling mystery and although it would be great to know the resolution, in some ways the ‚ÄúDroodiana‚Äù that has cropped up over the past 150+ years is reason enough for it to remain a mystery. The whole lore around Edwin Drood is a worthwhile hobby in itself and well-worth exploring. The <a href=\"https://www.amazon.com/dp/B0000CHQCS/?tag=fogus-20\">Chiltern Library edition</a> of the book contains the story and a good bit of the lore around the writing and the meta-works available at the time of its publication.<a href=\"#fn4\" id=\"fnref4\" role=\"doc-noteref\"><sup>4</sup></a></em></li> <li><strong><a href=\"https://www.amazon.com/shadow-people-Margaret-St-Clair/dp/B00005XVNT/?tag=fogus-20\">The Shadow People</a></strong> by Margaret St.&nbsp;Clair - <em>Sadly out of print and difficult to find, but I‚Äôve had it on my shelves for decades and finally got around to reading it. The book came onto my radar in the 1980s when I learned about it in the <a href=\"https://en.wikipedia.org/wiki/Appendix_N\">appendix-n</a> of the 1st edition Advanced D&amp;D Dungeon Masters Guide. I enjoyed many of the books at the time and have slowly swung around to re-reading them over the past few years. Sadly, most on the list do not stand the test of time for me, but St.&nbsp;Clair‚Äôs mixture of 60s counter-cultural leanings in a fantasy/sf world still works. The cultural touch-points in the book feel quite dated, but despite the occasional awkwardness, the story is unique even today.</em></li> <li><strong><a href=\"https://bookshop.org/p/books/lolly-willowes-warbler-classics-annotated-edition-sylvia-townsend-warner/793f95da3bb968a0?aid=98208&amp;ean=9781959891635&amp;listref=best-things-2025&amp;next=t\">Lolly Willowes</a></strong> by Sylvia Townsend Warner - <em>The book started as a passable novel of manners focused on a turn of the century British middle-class family. The titular character was mostly background decoration for the first third of the novel and AFAIR was talked about only in the third-person. It‚Äôs only when she made the choice to move out on her own to the country<a href=\"#fn5\" id=\"fnref5\" role=\"doc-noteref\"><sup>5</sup></a> in her middle age does she gain a central role in the narrative and her inner thoughts revealed. This is where things really pick up because I was shocked to learn that this unassuming woman‚Äôs inner thoughts had a delicious darkness to them. I don‚Äôt want to give away too much, but I‚Äôll just say that you will not expect how the story ends.</em></li> <li><strong><a href=\"https://www.fantagraphics.com/collections/daniel-clowes/products/patience\">Patience</a></strong> by Daniel Clowes - <em>A profound graphic novel using time-travel to explore the idea of enduring love with a story that proceed through time, following Jack as he tries to alter the past and save the woman he loves. This well-known science fiction motif is elevated by Clowes‚Äô signature psychological complexity.</em></li> <li><strong><a href=\"https://bookshop.org/p/books/narcissus-and-goldmund-hermann-hesse/2249287049aa22fb?aid=98208&amp;ean=9780553275865&amp;listref=best-things-2025&amp;next=t\">Narcissus and Goldmund</a></strong> by Herman Hesse - <em>I‚Äôve read most of the books by Hermann Hesse but this one escaped my attention until this year. The story follows the parallel lives of a monk Narcissus and his passionate friend Goldmund as they respectively search for meaning in life through spiritual means and through pleasures of the flesh.</em></li> <li><strong><a href=\"https://bookshop.org/p/books/we-who-are-about-to-joanna-russ/a7176b6dc2109f04?aid=98208&amp;ean=9780819567598&amp;listref=best-things-2025&amp;next=t\">We Who Are About To‚Ä¶</a></strong> by Joanna Russ - <em>A small group of astronauts crash land on a hostile alien world and quickly realize that rescue is unlikely to come. Many SF stories have started this way and so the expectation is that this is a colonization story‚Ä¶ but Russ thrives on subverting reader expectations.</em></li> <li><strong><a href=\"https://tartaruspress.com/russell-fifty-forgotten-records.html\">Fifty Forgotten Records</a></strong> by R.B. Russell - <em>Another lovely entry in Russell‚Äôs series (one can hope) of autobiographical explorations of art, so far covering literature and now music. This book describes 50 records of varying popularity and Russell‚Äôs personal connections to each. While I certainly enjoyed finding a dozen or so new albums to explore, the true triumph of the book lies in the vulnerable, reflective memoir threaded throughout.</em></li> <li><strong><a href=\"https://bookshop.org/p/books/the-way-of-all-flesh-samuel-butler/b5c2be53f34c9706?aid=98208&amp;ean=9780375752490&amp;listref=best-things-2025&amp;next=t\">The Way of All Flesh</a></strong> by Samuel Butler *A novel that follows 4-generations of the Ponitifex family, with a particular bildungsromanesque thread around Ernest, a young man who‚Äôs naivete leads to his downfall and how his life unfolds thereafter.<a href=\"#fn6\" id=\"fnref6\" role=\"doc-noteref\"><sup>6</sup></a></li> </ul> <h2 id=\"number-of-books-written-or-published\">Number of books written or published</h2> <p>As I mentioned, I have taken to writing more on non-technical topics, but I‚Äôve even taken to dabble in fiction this year. I wrote a lot of fiction when I was (much) younger but all that I wrote from those days resides at the bottom of a landfill in Baltimore‚Ä¶ which is probably for the best. I doubt that this avenue will result in any publications or even anything worth reading at all, but I‚Äôm having a great time regardless.</p> <h2 id=\"number-of-programming-languages-designed\">Number of programming languages designed</h2> <p>I‚Äôve tinkered with a concatenative functional programming language named Juxt for years, but it‚Äôs not something that anyone should ever use. My thoughts are almost entirely focused exclusively on moving Clojure into the future, but I take a moment to think in stacks from time to time.<a href=\"#fn7\" id=\"fnref7\" role=\"doc-noteref\"><sup>7</sup></a></p> <h2 id=\"favorite-musicians-albums-discovered\">Favorite musicians / albums discovered</h2> <ul> <li><em><a href=\"https://lovesliescrushing.bandcamp.com/\">lovesliescrushing</a></em> - <em>It‚Äôs been quite a while since I‚Äôve discovered any good ambient. This duo‚Äôs catalog has accompanied many of my 2025 coding activities.</em></li> <li><em><a href=\"https://deathandvanillamusic.bandcamp.com/album/whistle-and-ill-come-to-you\">Whistle And I‚Äôll Come to You</a></em> by Death and Vanilla - <em>An album that conjures the atmosphere of folk horror films despite its electronic and psychedelic tones. It has a vaguely similar ethereal beauty that drew me to Dead Can Dance 100 years ago.</em></li> <li><em><a href=\"https://mariachiaramusic.bandcamp.com/album/closer\">Closer</a></em> by Maria Chiara Argir√≤ - <em>Her jazz-infused electronic ambient music drilled its way into my ear and nested in my brain for months.</em></li> </ul> <p>The artist that I listened to the most in 2025 was <a href=\"https://cocteautwins.com/\">Cocteau Twins</a> ‚Äì which probably mirrors a couple of years around when I was 15 or 16.<a href=\"#fn8\" id=\"fnref8\" role=\"doc-noteref\"><sup>8</sup></a></p> <h2 id=\"favorite-show-about-a-misanthrope-tasked-with-saving-a-humanity-that-might-not-be-worth-saving-at-all\">Favorite show about a misanthrope tasked with saving a humanity that might not be worth saving at all</h2> <p><a href=\"https://www.imdb.com/title/tt22202452/\">Pluribus</a></p> <h2 id=\"favorite-films-discovered\">Favorite films discovered</h2> <ul> <li><strong><a href=\"https://www.imdb.com/title/tt26581740/\">Weapons</a></strong> by Zach Cregger - <em>This one was probably my pick for the best new horror film released in 2025. Like Cregger‚Äôs other horror film <a href=\"https://www.imdb.com/title/tt15791034/\">Barbarian</a>,<a href=\"#fn9\" id=\"fnref9\" role=\"doc-noteref\"><sup>9</sup></a> Weapons mixed in black humor without being ham-handed about it. The highlight of the film was the performance by Amy Madigan, who stole every scene that she was in.</em></li> <li><strong><a href=\"https://www.imdb.com/title/tt7322224/\">Triangle of Sadness</a></strong> by Ruben √ñstlund - <em>√ñstlund is truly the master of the cringey moment, but his work is not ‚Äúcringe comedy‚Äù as we commonly encounter. The cringe tension in his films instead comes from the mismatched expectations of the characters and a dogged insistence on magnifying the cringe that arises by stretching scenes to their breaking point.</em></li> </ul> <h2 id=\"favorite-podcasts\">Favorite podcasts</h2> <ul> <li><strong><a href=\"https://quietlittlehorrors.com/\">Quiet Little Horrors</a></strong> by <a href=\"https://jenmyers.net/about/\">Jen Meyers</a> and <a href=\"https://jessichartier.com/\">Jessi Chartier</a> - <em>By far my favorite horror-related podcast going right now. The cinematic analysis from the hosts is surpassed only by the texture of their personal experiences informing their analysis of films. I consider myself extremely lucky to have had the chance to sit down with the hosts and talk about Roman Polanski‚Äôs film, and Roland Topor‚Äôs book on which it‚Äôs based, <a href=\"https://bookshop.org/p/books/the-tenant-valancourt-international-roland-topor/b99ff27c8d84505f?aid=98208&amp;ean=9781948405775&amp;listref=best-things-2025&amp;next=t\">The Tenant</a> for their <a href=\"https://quietlittlehorrors.com/episode-06-14-the-tenant/\">penultimate 2025 episode</a>.</em></li> <li><strong><a href=\"https://open.spotify.com/show/0mYti5kalrRraItbZubwvk\">Beyond Yacht Rock 2000</a></strong> - <em>A podcast with a brilliant premise ‚Äì devise a fictional genre of music and then try to find musicians, albums, and songs that adhere to that genre.</em></li> <li><strong><a href=\"http://www.youtube.com/channel/UCXat06LvIYIyE2SpV_IuVjA\">Malcom Guite</a></strong> - <em>Tolkien, Arthurian epic poetry, pipe-smoking‚Ä¶ I wish this guy was my dad.</em></li> <li><strong><a href=\"https://www.youtube.com/@QuinnsIdeas\">Quinn‚Äôs Ideas</a></strong> - <em>I enjoy his long-form science fiction analysis, which is a YT genre that I typically skip. I‚Äôm pleased that the channel has so far avoided devolving into the inevitable booktube haul morass.</em></li> </ul> <h2 id=\"favorite-games-discovered\">Favorite games discovered</h2> <p>Usually tabletop games, but occasionally video games.</p> <ul> <li><strong>Jacoby</strong> - <em>While reading Montague Rhodes James‚Äô memoir I came across the mention of a card game called Jacoby. After searching high and low for months, I finally found the rules in a book from 1890 titled The young folk‚Äôs cyclop√¶dia of games and sports.<a href=\"#fn10\" id=\"fnref10\" role=\"doc-noteref\"><sup>10</sup></a> This long-lost game is a 3-player trick-taking game with some very nice tension.</em><a href=\"#fn11\" id=\"fnref11\" role=\"doc-noteref\"><sup>11</sup></a></li> <li><strong><a href=\"https://boardgamegeek.com/boardgame/354132/east-india-companies\">East India Companies</a></strong> designed by Pascal Ribrault - <em>The best tabletop game that I‚Äôve found in 2-3 years. The game is a distilled <a href=\"https://blog.fogus.me/games/18XX/intro.html\">18XX</a> game with a dash of luck thrown in for good measure. It‚Äôs a purely stock holding and market manipulation game where a little bit of information compounds to large advantages if you can leverage it at the right time. I would play this 50 more times if I could.</em></li> <li><strong><a href=\"https://boardgamegeek.com/boardgame/262939/far-away\">Far Away</a></strong> designed by Alexander Jerabek - <em>A science fiction cooperative sandbox game for 2-players but that I‚Äôve only ever played solo. While I think that the game as designed would be a better 2p affair, as a solo game it‚Äôs still an interesting world-builder. I enjoy the meta-nature of the game that allows the player(s) to not only build the world as they explore it, but they are tasked with defining the ‚Äúmechanics‚Äù of the world along the way.</em></li> </ul> <ul> <li><em><a href=\"https://hypercubed.github.io/joy/joy.html\">Joy</a></em> - <em>Joy is a mindfrak of a programming language in the concatenative functional language family. The core of Joy is beautiful and among the foundational programming languages in my opinion.</em></li> </ul> <ul> <li><a href=\"http://www.clojure.org/\">Clojure</a> - <em>2025 marks the 16th year<a href=\"#fn12\" id=\"fnref12\" role=\"doc-noteref\"><sup>12</sup></a> as a full-time Clojure programmer.</em></li> <li><a href=\"https://mail.openjdk.org/pipermail/amber-spec-experts/2023-December/003959.html\">Java</a> - <em>Working deep in the Clojure compiler means that a portion of my 2025 work was in Java.</em></li> </ul> <ul> <li><em><a href=\"https://clojerl.org/\">Clojerl</a></em> - <em>There was once a dialect of Clojure targeting Erlang/BEAM so I would like to catch up on it to see where it stands.</em></li> <li><em><a href=\"https://github.com/babashka/scittle\">Scittle</a></em> - <em>A very lightweight, Clojure-like, skin on top of JavaScript that it super simple to include in HTML pages. I would like to produce something that uses Scittle to get a feel for its ‚ÄúClojure-ness.‚Äù</em></li> </ul> <h2 id=\"favorite-papers-discovered-and-read\">Favorite papers discovered (and read)</h2> <p>none of particular note.</p> <h2 id=\"still-havent-read\">Still haven‚Äôt read‚Ä¶</h2> <p>I Ching, A Fire upon the Deep, Don Quixote, and <strong><a href=\"http://blog.fogus.me/2012/09/21/the-amazing-colossal-science-fiction-ketchup/\">a boat-load of sci-fi</a></strong></p> <h2 id=\"favorite-technical-conferences-attended\">Favorite technical conferences attended</h2> <ul> <li><em><a href=\"https://www.2025.clojure-conj.org/\">Clojure/conj 2025</a></em> - <em>The 2025 edition of the Conj was the first organized entirely by <a href=\"https://www.nubank.com/\">Nubank</a>‚Äôs amazing Clojure community-focused team: Magdalena Useglio, Christoph Neumann, and Jordan Miller. Unsurprisingly, I think that this was one of the best Clojure/conj events ever, and I‚Äôve seen my fair share. I‚Äôm perpetually humbled to be part of a community of amazingly thoughtful Clojure friends.</em></li> <li><em><a href=\"https://sites.google.com/nubank.com.br/clojure-south\">Clojure South 2025</a></em> - <em>Before that I was fortunate to be in Brazil when Clojure South happened. I had such a great time and was impressed by how well the conference was run. I met many new Clojure programmers and dozens of brilliant Brazilian programmers for the first time. I would love to attend the next one if at all possible.</em></li> </ul> <h2 id=\"favorite-code-read\">Favorite code read</h2> <ul> <li><em><a href=\"https://www.redblobgames.com/grids/hexagons/implementation.html\">Implementation of Hex Grids</a></em> - <em>Useful functions for game developers/designers.</em></li> <li><em><a href=\"https://small-js.org/Home/Home.html\">SmallJS</a></em> - <em>A little Smalltalk-80 that compiles to JavaScript.</em></li> <li><em><a href=\"https://github.com/historicalsource/zork1\">Zork I</a></em> - <em>The original Zork source code. I‚Äôve only started digging into the <a href=\"https://setsideb.com/learning-zork-implementation-language-by-steve-meretzky/\">ZIL</a> definitions, but I plan to keep digging for months to come.</em></li> <li><em><a href=\"https://computerhistory.org/blog/xerox-alto-source-code/\">Xerox Alto</a></em> - <em>So far I‚Äôve only scratched the surface of the mountains of system code in the archive. The wisdom contained in here is likely to take a lifetime to explore.</em><a href=\"#fn13\" id=\"fnref13\" role=\"doc-noteref\"><sup>13</sup></a></li> </ul> <h2 id=\"life-changing-technology-discovered\">Life-changing technology ‚Äúdiscovered‚Äù</h2> <ul> <li><em>LLMs</em> <em>are here to stay, so it behooves me to learn to navigate this new world. That said‚Ä¶</em></li> <li><em><a href=\"https://en.wikipedia.org/wiki/Zettelkasten\">Zettelkasten</a></em> <em>‚Ä¶ has had a much larger impact on my life in 2025. I‚Äôve only just started collecting my notes using the system, but I‚Äôve managed to leverage the system to put together a handful of non-technical posts (see the section on my posts above) this year and found the system very helpful in composing ideas. This is a long-term WiP, but I‚Äôve very pleased so far.</em><a href=\"#fn14\" id=\"fnref14\" role=\"doc-noteref\"><sup>14</sup></a></li> </ul> <figure> <img src=\"https://blog.fogus.me/2025/12/23/images/bts25-zettelkasten-ca.jpg\" alt=\"Some Zettelkasten notes used for Checkers Arcade post\" style=\"max-width: 100%; height: auto; max-height: 300px; object-fit: contain; border-radius: 6px; margin: 10px 0;\"> </figure> <h2 id=\"state-of-plans-from-2025\">State of plans from 2025</h2> <p>2025 was a particularly productive year for meeting my plans for the year. Starting early in the year I knew that I needed a better way to track my tasks. So to start the year I visited a couple of Japanese stationary stores<a href=\"#fn15\" id=\"fnref15\" role=\"doc-noteref\"><sup>15</sup></a> to get some ideas. In 2024 I had used the Hobonichi Techo<a href=\"#fn16\" id=\"fnref16\" role=\"doc-noteref\"><sup>16</sup></a> and while I found it to be a lovely system, it didn‚Äôt quite work for me. First, it wasn‚Äôt clear how or if I was making progress on my tasks without spelunking into the past pages of the schedule. Second, I take a lot of notes longhand in cheap composition notebooks and so I found myself jumping back and forth between those and the Hobonichi. I tried using an insert into my Techo case for note-taking but I didn‚Äôt like the form-factor. I take big sprawling notes and filled the pages too quickly. So after the new year I took a minimalist approach with a Japanese calendar stamp:</p> <figure> <img src=\"https://blog.fogus.me/2025/12/23/images/bts25-stamp-cal.jpg\" alt=\"Rubber stamp calendar\" style=\"max-width: 100%; height: auto; max-height: 300px; object-fit: contain; border-radius: 6px; margin: 10px 0;\"> </figure> <p>The image above shows an example, but the problem with it should be apparent‚Ä¶ there‚Äôs just not enough room for fidelity. OK, sure it didn‚Äôt work as a real task tracker, but I still use it to keep track of small bits of detail associated with days of the week like: energy level, mood, sleep, exercise, etc. It became apparent that I needed something that solved three problems: 1) track any number of tasks, 2) give me an idea of my progress at a glance, and 3) be on hand already. My first pass at this was to draw a 4-week grid on my notebook and scribble tasks in pencil into the cells. I would then color the grid as I progressed through tasks. This worked great for about 5 weeks until I went on a week-long trip without my notebook, killing my solution to #3. Even before that however I had found that I wanted to make frequent changes and move things around, defer items, and change the colors, so it became apparent that I had another problem to solve; 4) allow for easy change. While I was on my week-long trip I decided to find a solution that account for all four of my problems, and it turned out that my solution was the solution to so many other problems‚Ä¶ spreadsheets!</p> <figure> <img src=\"https://blog.fogus.me/2025/12/23/images/bts25-tasks-sheet.jpg\" alt=\"My ongoing tasks sheet\" style=\"max-width: 100%; height: auto; max-height: 300px; object-fit: contain; border-radius: 6px; margin: 10px 0;\"> </figure> <p>Above you‚Äôll see a representational image that gives the basics of the task tracking. The rows correspond to tasks and the columns to the months. The white section on the left are the tasks details like category, name, description, and success criteria. The colored segments represent the state of the tasks regarding progress. The left-most colored column is the current month. Each cell is filled in before the month starts with high-level goals which are amended and modified as I make progress (or not). The meaning of the colors are:</p> <ul> <li>Light green: Task completed and success criteria met</li> <li>Dark green: Task completed, but its success criteria changed during the process</li> <li>Light orange: Not started</li> <li>Dark orange: In progress (not shown above)</li> <li>Red: Incomplete and/or unsuccessful</li> <li>Gray: Not applicable. This is for new tasks that are added to the tracker, or removed and brought back. All months are back-filled in gray.</li> </ul> <p>And that‚Äôs the whole system. It‚Äôs easy to change and rearrange. It‚Äôs on-hand.<a href=\"#fn17\" id=\"fnref17\" role=\"doc-noteref\"><sup>17</sup></a> I can see how I‚Äôm doing at a glance. Can track any number of simultaneous tasks. Perfect.</p> <p>Enough of this meta-discussion‚Ä¶ how did my plans for 2025 go?</p> <ul> <li><em><a href=\"https://www.clojure.org/\">Clojure 1.13</a></em> - <em>While a 1.13 release didn‚Äôt happen, we did release numerous updates to 1.12 and made plans for how to fill out the next version.</em></li> <li><em><a href=\"https://github.com/clojure/core.async\">core.async next</a></em> - <em>We made some interesting changes to core.async to leverage JDK 21+ virtual threads, but before that we made changes to smooth the path for allowing opt-in use of vthreads. At the moment there are some challenges around the way that the JVM tracks vthreads, but I feel pretty good that if we can address those then the implementation is solid.</em></li> <li><em><a href=\"https://blog.fogus.me/\">Simplify my blog</a></em> - <em>I completely moved away from Wordpress onto a hacked-together Markdown/org-mode + pandoc + bash to static pipeline. It‚Äôs a piece of junk, but so much more lightweight that what I had running for years.</em></li> <li><em><a href=\"https://gist.github.com/fogus/224d658be2a1afaaffe4ac1f25d1fa61\">Juxt</a></em> - <em>Juxt is my exploration in functional concatenative language design built on the JVM. It‚Äôs not yet clear to me if or when I would ever release this into the wild, but the explorations have been great fun and I‚Äôve used Juxt as a vehicle for finding relevant books and papers.<a href=\"#fn18\" id=\"fnref18\" role=\"doc-noteref\"><sup>18</sup></a> That said, most of my programming time is spent maintaining and evolving Clojure, but there are rare moments of time that I can spend on Juxt, and I plan to continue to do so in 2025. You‚Äôll see some interesting progress in the gist link.</em></li> </ul> <h2 id=\"plans-for-2026\">Plans for 2026</h2> <ul> <li><em>More non-technical writing in 2026.</em> - <em>I would like to continue explorations of fiction and games. That‚Äôs not to say that there aren‚Äôt a few technical posts in me still, but they will not be my priority.</em></li> <li><em>Publish the rules for a card game of my own design.</em> - <em>I have a couple in the pipeline, and feel like one of them could be a keeper.</em></li> <li><em><a href=\"https://www.clojure.org/\">Clojure 1.13</a></em> - <em>Thinking around the 1.13 release is ongoing and we‚Äôd like to get it out sooner rather than later. Stay tuned.</em></li> <li><em>Create something with my hands</em> - <em>I have no idea what this might be, but I‚Äôve been putting off artifact creation for waaaaay too long.</em></li> <li><em>Read more non-fiction</em> - <em>I‚Äôm particularly interested in biographies and books-on-books.</em><a href=\"#fn19\" id=\"fnref19\" role=\"doc-noteref\"><sup>19</sup></a></li> <li><em>Read an untranslated book</em> - <em>Inspired by the <a href=\"https://theuntranslated.wordpress.com/\">Untranslated Blog</a>‚Ä¶ my best chance for success is something written in French. Topic TBD.</em></li> </ul> <h2 id=\"tech-radar\">2026 Tech Radar</h2> <figure> <img src=\"https://blog.fogus.me/2025/12/23/images/bts25-zettelkasten.jpg\" alt=\"My Zettelkasten stack\" style=\"max-width: 100%; height: auto; max-height: 300px; object-fit: contain; border-radius: 6px; margin: 10px 0;\"> </figure> <ul> <li>try: <a href=\"https://www.goodnotes.com/\">Goodnotes</a> - <em>I‚Äôve bounced off of numerous note-taking apps in my time, but my older son swears by it for annotating PDFs.</em></li> <li>adopt: <a href=\"https://www.amazon.com/Antinet-Zettelkasten-Knowledge-Prolific-Researcher/dp/B0BPVTBYG7/?tag=fogus-20\">Antinet Zettelkasten</a> - <em>I used my growing card file to great effect while writing a few essays this year.</em></li> <li>assess: LLMs - <em>I‚Äôm into the 3rd AI hype-cycle in my life (at least) and this is not much different than they other two, save for the potential market and job disruptions in play. I tried in earnest to make AI work for me, with varying degrees of un-success. I‚Äôve had zero success leveraging it in my work maintaining and evolving Clojure. For problem formation in the face of novelty, LLMs have been more frustrating than helpful and the little gains that I‚Äôve found were in the very early phases of problem solving requiring a bare minimum of experimental code. But even these examples operate wholly in the known rather than in the unknown where I‚Äôd like to operate instead. Even in these early stages the ‚Äúhand-holding‚Äù involved was more frustrating than helpful. In my work, the bottleneck is absolutely not the code. While I think that the kind of up-front work that I do could inform prompt-engineering to some degree, by the time that I get to that point the code is often perfunctory. Most of the work that I do is devising and investigating new problem framing rather than in interpolation of the known (i.e.&nbsp;analogy play). While the latter is important for sure, what‚Äôs known often acts as a source of tension to help motivate and tease out potentially new solutions. And this is a huge problem in the very nature of LLMs. That is, they are trained on the products of problem solving processes rather then also in the very processes themselves. Further, as a Socratic partner, LLMs are incredibly frustrating in their inability to move a ‚Äúdiscussion‚Äù forward. A good Socratic partner creates pressure to move toward truth, but LLMs are too sycophantic, lack an awareness of useful tension,<a href=\"#fn20\" id=\"fnref20\" role=\"doc-noteref\"><sup>20</sup></a> cannot often identify contradiction, and lack any ability to adhere to the trajectory of a conversation. So far I‚Äôm left wanting, but because LLMs are likely to never go away then I‚Äôll see if these downsides get better in the future.</em><a href=\"#fn21\" id=\"fnref21\" role=\"doc-noteref\"><sup>21</sup></a></li> <li>hold: <a href=\"https://www.amazon.com/BOOX-Tablet-Go-10-3-ePaper/dp/B0D4DFT3W3/?tag=fogus-20\">Boox Go 10.3 tablet</a> - <em>I just couldn‚Äôt pull the trigger on this and suspect that I will not ever.</em><a href=\"#fn22\" id=\"fnref22\" role=\"doc-noteref\"><sup>22</sup></a></li> <li>stop: <a href=\"https://www.typescriptlang.org/\">TypeScript</a> - <em>I just don‚Äôt do enough in this space to justify continuing down this road.</em></li> </ul> <figure> <img src=\"https://blog.fogus.me/2025/12/23/images/bts25-c64ai.jpg\" alt=\"Have you heard of an AI?\" style=\"max-width: 100%; height: auto; max-height: 300px; object-fit: contain; border-radius: 6px; margin: 10px 0;\"> </figure> <h2 id=\"people-who-inspired-me-in-2025-in-no-particular-order\">People who inspired me in 2025 (in no particular order)</h2> <p>Yuki, Keita, Shota, Craig Andera, Carin Meier, Justin Gehtland, Rich Hickey, Nick Bentley, Paula Gearon, Zeeshan Lakhani, Brian Goetz, David Nolen, Jeb Beich, Paul Greenhill, Kristin Looney, Andy Looney, Kurt Christensen, Samm Deighan, David Chelimsky, Chas Emerick, Stacey Abrams, Paul deGrandis, Nada Amin, Michiel Borkent, Alvaro Videla, Slava Pestov, Yoko Harada, Mike Fikes, Dan De Aguiar, Christian Romney, Russ Olsen, Alex Miller, Adam Friedman, Tracie Harris, Alan Kay, Wayne Applewhite, Naoko Higashide, Zach Tellman, Nate Prawdzik, Bobbi Towers, JF Martel, Phil Ford, Nate Hayden, Sean Ross, Tim Good, Chris Redinger, Steve Jensen, Christian Freeling, Jordan Miller, Mia, Christoph Neumann, Tim Ewald, Stu Halloway, Jack Rusher, Jenn Meyers, Michael Berstein, Beno√Æt Fleury, Rafael Ferreira, Robert Randolph, Joe Lane, Renee Lee, Pedro Matiello, Jarrod Taylor, Magdalena Useglio, Jaret Binford, Ailan Batista, Matheus Machado, Quentin S. Crisp, John Cooper, Conrad Barski, Amabel Holland, Ben Kamphaus, Barry Malzberg (RIP), Kory Heath (RIP).</p> <p>Onward to 2026!</p> <p>:F</p> <section id=\"footnotes\" role=\"doc-endnotes\"> <hr> <ol> <li id=\"fn1\"><p>The video has similar vibes to Haruki Murakami‚Äôs excellent book After Dark.<a href=\"#fnref1\" role=\"doc-backlink\">‚Ü©Ô∏é</a></p></li> <li id=\"fn2\"><p>I‚Äôd love to try and write something about Corvo‚Äôs obsession with the Catholic hierarchy and the tenuous idea that it was a kind of occult architecture. This may be a bridge too far for my ability and knowledge.<a href=\"#fnref2\" role=\"doc-backlink\">‚Ü©Ô∏é</a></p></li> <li id=\"fn3\"><p>I have some of these books listed at <a href=\"https://bookshop.org/lists/best-things-2025\">bookshop.org</a> if you‚Äôre interested in grabbing copies.<a href=\"#fnref3\" role=\"doc-backlink\">‚Ü©Ô∏é</a></p></li> <li id=\"fn4\"><p>A lot more Droodiana has been written since 1950 of course.<a href=\"#fnref4\" role=\"doc-backlink\">‚Ü©Ô∏é</a></p></li> <li id=\"fn5\"><p>The ‚Äúmove to the country‚Äù theme present in a significant number of pre-WWII fiction representing a reclamation of feminine power. I would love to find/create a list of books exploring this theme.<a href=\"#fnref5\" role=\"doc-backlink\">‚Ü©Ô∏é</a></p></li> <li id=\"fn6\"><p>Interestingly, this was a recommendation from friend <a href=\"https://www.linkedin.com/in/david-nolen-37b42813/\">David Nolen</a>, who also mentioned another book that just barely missed this list, <a href=\"https://bookshop.org/p/books/melville-s-short-novels-authoritative-texts-contexts-criticism-herman-melville/f3008086921a816b?aid=98208&amp;ean=9780393976410&amp;listref=best-things-2025&amp;next=t\">Benito Cereno</a> which I think needs another read in the future.*<a href=\"#fnref6\" role=\"doc-backlink\">‚Ü©Ô∏é</a></p></li> <li id=\"fn7\"><p>If you‚Äôre interested in exploring an interesting new programming language that mixes interesting ideas, then I recommend <a href=\"https://www.uiua.org/\">Uiua</a> that bills itself as a point-free, APL-style, array-oriented modern language.<a href=\"#fnref7\" role=\"doc-backlink\">‚Ü©Ô∏é</a></p></li> <li id=\"fn8\"><p>I was in a ‚Äújunk shop‚Äù a couple of weeks ago and found both Black Sabbath‚Äôs <em>Master of Reality</em> and the <em>Complete Vatican Recordings</em> of the works of Alessandro Moreschi‚Ä¶ two albums that couldn‚Äôt be more different. I suspect that one of both of these albums will get a lot of play in 2026.<a href=\"#fnref8\" role=\"doc-backlink\">‚Ü©Ô∏é</a></p></li> <li id=\"fn9\"><p>I could have also added Cregger‚Äôs <em>Barbarian</em> to the year‚Äôs best filmatic discoveries, but I would like another watch to really focus in on the depths.<a href=\"#fnref9\" role=\"doc-backlink\">‚Ü©Ô∏é</a></p></li> <li id=\"fn10\"><p>I also found a POD copy of the Nichureki, a 13th-century Japanese book containing the earliest written record of Heian Shogi‚Ä¶ a topic for another day perhaps.<a href=\"#fnref10\" role=\"doc-backlink\">‚Ü©Ô∏é</a></p></li> <li id=\"fn11\"><p>I wrote an essay about Jacoby and its connection to the author M.R. James that is due to be published next year in the journal <em>Ghosts and Scholars</em> #50.<a href=\"#fnref11\" role=\"doc-backlink\">‚Ü©Ô∏é</a></p></li> <li id=\"fn12\"><p>This is strictly my work-life time. My total use of Clojure has been longer.<a href=\"#fnref12\" role=\"doc-backlink\">‚Ü©Ô∏é</a></p></li> <li id=\"fn13\"><p>While the Alto source code is certainly interesting, it‚Äôs unclear how the repository credits Douglas Engelbart‚Äôs NLS vision and Intellect Augmentation, if at all.<a href=\"#fnref13\" role=\"doc-backlink\">‚Ü©Ô∏é</a></p></li> <li id=\"fn14\"><p>My ultimate dream is to build a giant card-file and then build a Jack Kirby-esque relentless idea-collage universe along the lines of his ‚ÄúFourth World‚Äù mythos tying together all of the concepts in said file‚Ä¶ I may need another lifetime for this.<a href=\"#fnref14\" role=\"doc-backlink\">‚Ü©Ô∏é</a></p></li> <li id=\"fn15\"><p>Japanese stationary stores and thrift-shops are two of my guilty pleasures. Has anyone else noticed that in the States, there are more young people shopping in thrift shops than ever before. I would love to understand why. Is it a growing prevalence of Tik-Tok thrift-haul videos, an appreciation for retro, an economic indicator, all, some, or none?<a href=\"#fnref15\" role=\"doc-backlink\">‚Ü©Ô∏é</a></p></li> <li id=\"fn16\"><p>I put my best effort into the Techo, but I could never fully buy into the very Japanese view of the planner as a life-book.<a href=\"#fnref16\" role=\"doc-backlink\">‚Ü©Ô∏é</a></p></li> <li id=\"fn17\"><p>I‚Äôm already in Google Sheets all the time anyway, and can access it on my phone if needed. Really though, I‚Äôd love to see a device in the spirit of the TRS-80 model 100 to do this kind of work on the go‚Ä¶ but I would still probably not get one. ¬Ø_(„ÉÑ)_/¬Ø<a href=\"#fnref17\" role=\"doc-backlink\">‚Ü©Ô∏é</a></p></li> <li id=\"fn18\"><p>You can see the <em>current</em> <a href=\"https://gist.github.com/fogus/6d716276678b0698c96dd13e040c71eb\">Juxt bibtex</a> on GitHub.<a href=\"#fnref18\" role=\"doc-backlink\">‚Ü©Ô∏é</a></p></li> <li id=\"fn19\"><p>I would also love to read the complete work of the comic book creator Jack Kirby. There are some lovely omnibus editions of his work, but I don‚Äôt quite know how I feel about the fact that the comics industry is embracing this format. Certainly singles are a joke, but omnibuses have turned comics enjoyment from reading into weightlifting.<a href=\"#fnref19\" role=\"doc-backlink\">‚Ü©Ô∏é</a></p></li> <li id=\"fn20\"><p>The tension problem is also why I‚Äôve found LLMs to be terrible at aiding tabletop game design. A prime characteristic of the kinds of games that I enjoy is emergent complexity, but if LLMs identify complexity at all, they have so far been terrible at deciding which complexity is useful. That is, LLMs have no notion of ‚Äúdelicious tension‚Äù nor how to devise it.<a href=\"#fnref20\" role=\"doc-backlink\">‚Ü©Ô∏é</a></p></li> <li id=\"fn21\"><p>A huge problem with LLMs are that they are by their very nature dependent on digitized information. While a larger proportion of scientific and computing information is available in digitized form, there are still whole fields of knowledge left on paper, so to speak. First, a large problem with this fact is that only a small fraction of total knowledge is available to training LLMs, leaving large gaps in the knowledge base exacerbating the problem of decoupled confidence and reality. Second, this is problematic because training these models on digital-data leads to an amplification of the biases inherent in the digitized records. This can be mitigated by the search-augmented and human-in-the-loop systems, but these are also incomplete sources of validation and even the validation itself has bias (e.g.&nbsp;SEO, status quo, liability constraints, etc.) and often reduce the traceability of an answer. A second informational downside of LLMs is that they take training data at face-value rather than inherent value. However, in my programming career I‚Äôve learned a lot more from bad code than good code. Likewise, code input to training is heavily biased to work at all and the ingestion itself it geared strictly to work to build a plausible-continuation model. Good code works as exemplars of clarity, layering abstractions, maintainability, and sad-path security, but so does bad code. Heavily curated or contrasting training data could mitigate this to some degree, but at the moment, a lot of the code generated by LLMs is often lacking these fundamental code characteristics. This matches my actual observation of code generation, but I would imagine that the inability of the ingestion to distinguish valid examples from cautionary examples is more general problem. These are all technical points and do not take into account the societal problems that LLMs present‚Ä¶ which are bountiful! These are evolving critiques that I‚Äôll refine through more exposure.<a href=\"#fnref21\" role=\"doc-backlink\">‚Ü©Ô∏é</a></p></li> <li id=\"fn22\"><p>The Boox is a truly lovely device, but I‚Äôve developed a diametric motivation to de-device myself. This was born from my perennial obsession with Cyberdecks and ‚Äúminimalist‚Äù writing devices. Every so often I‚Äôm hit with a driving urge to build such things, but then I get turned off by the supporting communities around them, especially its gross fetishization of an ‚Äúaesthetic of productivity‚Äù where the act of building (and buying of course) these tools supersedes and stands-in for their actual use.<a href=\"#fnref22\" role=\"doc-backlink\">‚Ü©Ô∏é</a></p></li> </ol> </section> </div>"},{"id":"https://nhmu.utah.edu/articles/experts-explore-new-mushroom-which-causes-fairytale-hallucinations","title":"Experts explore new mushroom which causes fairytale-like hallucinations","link":"https://nhmu.utah.edu/articles/experts-explore-new-mushroom-which-causes-fairytale-hallucinations","hnCommentsUrl":"https://news.ycombinator.com/item?id=46393936","content":"<a href=\"https://news.ycombinator.com/item?id=46393936\">Comments</a>","date":1766768873000,"feedTitle":"Hacker News","isHackerNews":true,"isGoogleNews":false},{"id":"https://github.com/readme/guides/publishing-your-work","title":"Publishing your work increases your luck","link":"https://github.com/readme/guides/publishing-your-work","hnCommentsUrl":"https://news.ycombinator.com/item?id=46397991","content":"<a href=\"https://news.ycombinator.com/item?id=46397991\">Comments</a>","date":1766796184000,"feedTitle":"Hacker News","isHackerNews":true,"isGoogleNews":false,"fullContent":"<div id=\"readability-page-1\" class=\"page\"><div data-hpc=\"\"> <p>No matter how hard you work, it still takes a little bit of luck for something to hit. That can be discouraging, since luck feels like a force outside our control. But the good news is that we can increase our chances of encountering good luck. That may sound like magic, but it‚Äôs not supernatural. The trick is to increase the number of opportunities we have for good fortune to find us. The simple act of publishing your work is one of the best ways to invite a little more luck into your life.</p> <p>Before we get into the ‚Äúhow,‚Äù it‚Äôs important to get on the same page about the ‚Äúwhat.‚Äù What are we talking about when we say ‚Äúluck?‚Äù There are a lot of definitions that could apply, but let‚Äôs stick with a simple one: Luck is when something unexpected and good happens to you. Unexpected and good. Who doesn‚Äôt want to increase the odds of something unexpected and good?</p> <p>In our world, luck can include:</p> <ul><li><p>Having your OSS library take off</p></li><li><p>Being invited to speak at a conference</p></li><li><p>Landing a new job</p></li><li><p>Getting a new consulting client</p></li><li><p>Being invited onto a podcast</p></li><li><p>Making new friends in your community</p></li></ul> <p>None of these things are totally in your control, which can at times feel frustrating.&nbsp;</p> <p>How can we increase the odds of finding luck? By being a person who works in public. By doing work and being public about it, you build a reputation for yourself. You build a track record. You build a public body of work that speaks on your behalf better than any resume ever could.</p> <p>The goal is not to become famous, the goal is to increase the chances of luck finding us. For me, one of the most helpful ways to think about this has always been the concept of the ‚ÄúLuck Surface Area,‚Äù described in an <a href=\"https://www.codusoperandi.com/posts/increasing-your-luck-surface-area\"><u>old post by Jason Roberts</u></a>. He wrote (and note, the emphasis is mine):&nbsp;</p> <p><i>\"The amount of serendipity that will occur in your life, your Luck Surface Area, is directly proportional to the degree to which you </i><i><b>do something</b></i><i> you‚Äôre passionate about combined with the total number of people to whom this is </i><i><b>effectively communicated</b></i><i>.\"</i></p> <p>Going further, he codifies it into a formula where:</p> <div tabindex=\"0\"> <pre><span><span>Luck</span> <span>=</span> <span>[</span><span>Doing</span> <span>Things</span><span>]</span> <span>*</span> <span>[</span><span>Telling</span> <span>People</span><span>]</span></span></pre> </div> <p>The more things you do multiplied by the more people you tell, the larger your Luck Surface Area becomes. The larger your Luck Surface Area, the more likely you are to catch luck as it flows by.</p> <picture> <source srcset=\"https://images.ctfassets.net/s5uo95nf6njh/1mf4WuCw33UGsrQTdkErFe/1b5c74f7b54deb664b6bb39aa6303d35/AF_inline.jpg?w=468&amp;fm=avif 468w,https://images.ctfassets.net/s5uo95nf6njh/1mf4WuCw33UGsrQTdkErFe/1b5c74f7b54deb664b6bb39aa6303d35/AF_inline.jpg?w=374&amp;fm=avif 374w,https://images.ctfassets.net/s5uo95nf6njh/1mf4WuCw33UGsrQTdkErFe/1b5c74f7b54deb664b6bb39aa6303d35/AF_inline.jpg?w=280&amp;fm=avif 280w,https://images.ctfassets.net/s5uo95nf6njh/1mf4WuCw33UGsrQTdkErFe/1b5c74f7b54deb664b6bb39aa6303d35/AF_inline.jpg?w=234&amp;fm=avif 234w,https://images.ctfassets.net/s5uo95nf6njh/1mf4WuCw33UGsrQTdkErFe/1b5c74f7b54deb664b6bb39aa6303d35/AF_inline.jpg?w=187&amp;fm=avif 187w,https://images.ctfassets.net/s5uo95nf6njh/1mf4WuCw33UGsrQTdkErFe/1b5c74f7b54deb664b6bb39aa6303d35/AF_inline.jpg?w=93&amp;fm=avif 93w\" sizes=\"(max-width: 930px) 90vw, 840px\" type=\"image/avif\"> <source srcset=\"https://images.ctfassets.net/s5uo95nf6njh/1mf4WuCw33UGsrQTdkErFe/1b5c74f7b54deb664b6bb39aa6303d35/AF_inline.jpg?w=468&amp;fm=webp 468w,https://images.ctfassets.net/s5uo95nf6njh/1mf4WuCw33UGsrQTdkErFe/1b5c74f7b54deb664b6bb39aa6303d35/AF_inline.jpg?w=374&amp;fm=webp 374w,https://images.ctfassets.net/s5uo95nf6njh/1mf4WuCw33UGsrQTdkErFe/1b5c74f7b54deb664b6bb39aa6303d35/AF_inline.jpg?w=280&amp;fm=webp 280w,https://images.ctfassets.net/s5uo95nf6njh/1mf4WuCw33UGsrQTdkErFe/1b5c74f7b54deb664b6bb39aa6303d35/AF_inline.jpg?w=234&amp;fm=webp 234w,https://images.ctfassets.net/s5uo95nf6njh/1mf4WuCw33UGsrQTdkErFe/1b5c74f7b54deb664b6bb39aa6303d35/AF_inline.jpg?w=187&amp;fm=webp 187w,https://images.ctfassets.net/s5uo95nf6njh/1mf4WuCw33UGsrQTdkErFe/1b5c74f7b54deb664b6bb39aa6303d35/AF_inline.jpg?w=93&amp;fm=webp 93w\" sizes=\"(max-width: 930px) 90vw, 840px\" type=\"image/webp\"> <source srcset=\"https://images.ctfassets.net/s5uo95nf6njh/1mf4WuCw33UGsrQTdkErFe/1b5c74f7b54deb664b6bb39aa6303d35/AF_inline.jpg?w=468&amp;fm=jpg 468w,https://images.ctfassets.net/s5uo95nf6njh/1mf4WuCw33UGsrQTdkErFe/1b5c74f7b54deb664b6bb39aa6303d35/AF_inline.jpg?w=374&amp;fm=jpg 374w,https://images.ctfassets.net/s5uo95nf6njh/1mf4WuCw33UGsrQTdkErFe/1b5c74f7b54deb664b6bb39aa6303d35/AF_inline.jpg?w=280&amp;fm=jpg 280w,https://images.ctfassets.net/s5uo95nf6njh/1mf4WuCw33UGsrQTdkErFe/1b5c74f7b54deb664b6bb39aa6303d35/AF_inline.jpg?w=234&amp;fm=jpg 234w,https://images.ctfassets.net/s5uo95nf6njh/1mf4WuCw33UGsrQTdkErFe/1b5c74f7b54deb664b6bb39aa6303d35/AF_inline.jpg?w=187&amp;fm=jpg 187w,https://images.ctfassets.net/s5uo95nf6njh/1mf4WuCw33UGsrQTdkErFe/1b5c74f7b54deb664b6bb39aa6303d35/AF_inline.jpg?w=93&amp;fm=jpg 93w\" sizes=\"(max-width: 930px) 90vw, 840px\" type=\"image/jpeg\"> <img width=\"468\" height=\"342\" loading=\"lazy\" decoding=\"async\" alt=\"A graph with &quot;Doing&quot; on the Y axis, and &quot;Telling&quot; on the X axis. The more you do and tell, the better.\" src=\"https://images.ctfassets.net/s5uo95nf6njh/1mf4WuCw33UGsrQTdkErFe/1b5c74f7b54deb664b6bb39aa6303d35/AF_inline.jpg?w=468&amp;fm=jpg\" style=\"max-width: 100%; height: auto; max-height: 300px; object-fit: contain; border-radius: 6px; margin: 10px 0;\"> </picture> <h3>Source:<a href=\"https://www.codusoperandi.com/posts/increasing-your-luck-surface-area\"><u> Jason Roberts</u></a></h3> <hr> <h2>Doing the work</h2> <p>Before you can publish your work, you have to actually <i>do</i> the work. The good news for you is that by even reading this Guide on The ReadME Project, you‚Äôve probably already self-selected into a group of people for whom ‚Äúdoing things‚Äù comes somewhat naturally. You‚Äôre a developer, a designer, a creator, an author, or something else entirely.&nbsp; Whatever moniker you want to give yourself, you‚Äôre built to <i>do</i> things, and that‚Äôs the important part.&nbsp;</p> <p>If that doesn‚Äôt ring true for you, you may fall into one of two groups:</p> <ol><li><p>You actually <i>are</i> doing things, you‚Äôve just trained yourself to think that anything you do isn‚Äôt worth sharing.</p></li><li><p>You <i>want</i> to be doing things, but you can‚Äôt bring yourself to get started.</p></li></ol> <p>If you‚Äôre in the first group, you may need to step back and reframe the work you‚Äôre already doing. This is a common blind spot for people who are executing at a high level! They‚Äôve forgotten just how much they know. They think that they‚Äôre not doing anything interesting because they assume that everyone knows as much as they do. This effect is only exacerbated when everyone in your immediate vicinity is at a similar‚Äîor higher‚Äîskill level. As you become more of an expert, your quality bar gets higher and higher and you forget that everything you know is not known by everyone.</p> <p>If you‚Äôre in this group I want to give you a challenge: Watch the communities where you hang out and see what people are sharing and what gets noticed. Is it something you could have done? Is it something you‚Äôve <i>already</i> done? At its worst this could lead you in the direction of becoming bitter, critical, and thinking that you‚Äôre smarter than everyone. To that I say ‚Äúresist!‚Äù There is no life there. My encouragement to you is to view that as objective evidence that people want to know all of the things that you already know! There is a huge opportunity for you, should you decide to start sharing your work.&nbsp;</p> <p>If you‚Äôre in the second group, you just need to start. Start anywhere, start on anything, start something. You‚Äôll never come up with the perfect idea for an OSS library, a business, a podcast, or an article by just thinking about it. Start on something, today. It won‚Äôt be the perfect version of the thing you have in your head, but you‚Äôll be in motion. Motion begets motion, progress begets progress. Pick the smallest thing you can do and get started.</p> <p>Doing the work is the most important part. It‚Äôs the nucleus around which everything else revolves. What that ‚Äúwork‚Äù looks like, though, is entirely up to you! That‚Äôs the fun part. It can take any form and be in any domain. Wherever your curiosity or expertise draw you, dive into that.&nbsp;</p> <p>Projects outside of work are a good place to dive into your curiosity.&nbsp;</p> <ul><li><p>If you want to make<a href=\"https://twitter.com/aschmelyun/status/1506960015063625733\"><u> a thermal receipt printer that prints GitHub issues</u></a>, you should.&nbsp;</p></li><li><p>If you want to<a href=\"https://twitter.com/aarondfrancis/status/1333866090573811723\"><u> turn a prefabricated shed into an office</u></a>, go for it.&nbsp;</p></li><li><p>If you want to go all in on an<a href=\"https://twitter.com/steveruizok/status/1419048412431933441\"><u> SVG drawing tool</u></a>, do it.&nbsp;</p></li><li><p>If you want to write tens of thousands of words about <a href=\"https://bam.kalzumeus.com/archive/\"><u>the infrastructure of modern money</u></a>, that‚Äôs a newsletter.&nbsp;</p></li></ul> <p>Your curiosity will naturally pull you in certain directions, so don‚Äôt be afraid to go super deep into a topic that you‚Äôre interested in. When a person is truly interested in the thing they‚Äôre writing or talking about, their excitement is contagious. Whatever you‚Äôre excited about, be excited about it publicly. Whatever you‚Äôre curious about, be curious about it publicly. People will want to follow along and you‚Äôll inspire people along the way.</p> <p>Projects at work can be a good place to dive into your expertise.&nbsp;</p> <p>It's likely you're constantly solving problems and learning interesting things at your job. This is a great opportunity to take what you‚Äôre already doing and repurpose it for the benefit of others. You can turn those learnings into blog posts, conference talks, meetups, podcasts, or open source projects.&nbsp;</p> <p>Of course not everything you do at work is shareable. If the specifics aren‚Äôt shareable, the concepts, lessons, and takeaways likely are. While you‚Äôre working, keep a scratch pad open and jot down any problems you come across, interesting patterns you see, or things you found confusing. Do this for a month and you‚Äôll have more things to share than you know what to do with!</p> <p>You‚Äôve done the work, now it's time to tell people.</p> <h2>Hitting the publish button</h2> <p>This part of the formula can be harder for most of us. Most of us really enjoy the building aspect but start to get a little shy when it comes to telling people about the stuff we‚Äôve built. That could be for any number of reasons: fear, embarrassment, self-preservation, or an aversion to being perceived as hawking your wares.</p> <p>It‚Äôs a valuable exercise to investigate whether or not you resonate with any of those reasons. Are you afraid people are going to make fun of what you built? Are you embarrassed that it isn‚Äôt up to your own (admittedly high) standards? Are you waiting for some elusive perfect moment? Do you have an aversion to ‚Äúmarketing‚Äù and don‚Äôt want to become the thing you hate? Whatever it is for you, I encourage you to really dig into it and see if that fear is worth keeping around.</p> <p>Sharing things you‚Äôre learning or making is not prideful. People are drawn to other people in motion. People <i>want</i> to follow along, people <i>want</i> to learn things, people <i>want</i> to be a part of your journey. It‚Äôs not bragging to say, ‚ÄúI‚Äôve made a thing and I think it‚Äôs cool!‚Äù Bringing people along is a good thing for everyone. By publishing your work you‚Äôre helping people learn. You‚Äôre inspiring others to create.</p> <p>You can ‚Äúpublish‚Äù anywhere. For me that‚Äôs mostly Twitter because that‚Äôs where most of my peers hang out. It doesn‚Äôt have to be Twitter for you. It could be GitHub, a newsletter, a podcast, forums, your blog, YouTube, or something completely different that‚Äôs not even on my radar. Anywhere that‚Äôs not your hard drive counts!&nbsp;</p> <p>Publishing is a skill, it‚Äôs something you can learn. You‚Äôll need to build your publishing skill just like you built every other skill you have.&nbsp;</p> <p>Don‚Äôt be afraid to publish along the way. You don‚Äôt have to wait until you‚Äôre done to drop a perfect, finished artifact from the sky (in fact, you may use that as an excuse to <i>never</i> publish). People like stories, so use that to your benefit. Share the wins, the losses, and the thought processes. Bring us along! If you haven‚Äôt been in the habit of sharing your work, it‚Äôs going to feel weird when you start. That‚Äôs normal! Keep going, you get used to it.&nbsp;</p> <p>You‚Äôve done the work. You‚Äôve hit the publish button. You‚Äôve done your part!&nbsp;</p> <h2>Capturing the luck</h2> <p>You‚Äôve <i>increased the odds</i> that good, unexpected things will come your way. The exact form is hard to predict, but here are a few potential outcomes:&nbsp;</p> <ul><li><p>People start to know you as the person that talks about X, Y, and Z.&nbsp;</p></li><li><p>You start to get emails from people saying that they read your stuff and liked it.&nbsp;</p></li><li><p>You get a DM about a job you might be interested in.</p></li><li><p>People ask you if you‚Äôre taking on new clients.</p></li><li><p>Someone you‚Äôve never met or interacted with will mention you as being an expert in your area.&nbsp;</p></li><li><p>A meetup asks you to come talk about the things you‚Äôve been sharing.</p></li><li><p>You become friends with other people in your industry.</p></li><li><p>Your OSS library starts gaining mindshare.</p></li></ul> <p>This is not a random list of made-up examples, it‚Äôs a list of things that have literally happened to me once I got over my fears and started sharing my work. I had been doing the work all along, but was too afraid to publish. Once I overcame that fear, my Luck Surface Area expanded and good, unexpected things started happening.&nbsp;</p> <p>The formula is simple.</p> <p>Do the work. Don‚Äôt be afraid to dive deep into your curiosity and your expertise. We need more people that are intensely curious. We need more people with deep expertise.</p> <p>Tell people. Press publish, bring us along, share the journey. Tell us what you‚Äôve learned, what you‚Äôve built, or what you‚Äôre excited about.</p> <p>The formula may be simple, but I‚Äôll admit it‚Äôs not always easy. It‚Äôs scary to put yourself out there. It‚Äôs hard to open yourself up to criticism. People online can be mean. But for every snarky comment, there are ten times as many people quietly following along and admiring not only your work, but your bravery to put it out publicly. And at some point, one of those people quietly following along will reach out with a life-changing opportunity and you‚Äôll think, ‚ÄúWow, that was lucky.‚Äù</p> </div></div>"},{"id":"https://engineering.cmu.edu/news-events/news/2025/12/19-perfect-shot.html","title":"Researchers develop a camera that can focus on different distances at once","link":"https://engineering.cmu.edu/news-events/news/2025/12/19-perfect-shot.html","hnCommentsUrl":"https://news.ycombinator.com/item?id=46369808","content":"<a href=\"https://news.ycombinator.com/item?id=46369808\">Comments</a>","date":1766526156000,"feedTitle":"Hacker News","isHackerNews":true,"isGoogleNews":false,"fullContent":"<div id=\"readability-page-1\" class=\"page\"><div> <p>Imagine snapping a photo where every detail, near and far, is perfectly sharp‚Äîfrom the flower petal right in front of you to the distant trees on the horizon. For over a century, camera designers have dreamed of achieving that level of clarity. In a breakthrough that could transform photography, microscopy, and even smartphone cameras, researchers at Carnegie Mellon University have developed a new kind of lens that can bring an entire scene into sharp focus at once‚Äîno matter how far away or close different parts of the scene are.</p> <p>The team, consisting of <a href=\"https://yingsiqin.github.io/\" rel=\"noopener\" target=\"_blank\">Yingsi Qin</a>, an electrical and computer engineering Ph.D. student, <a href=\"https://www.ece.cmu.edu/directory/bios/sankaranarayanan-aswin.html\" rel=\"noopener\" target=\"_blank\">Aswin Sankaranarayanan,</a> professor of electrical and computer engineering, and <a href=\"https://www.cs.cmu.edu/~motoole2/\" rel=\"noopener\" target=\"_blank\">Matthew O‚ÄôToole</a>, associate professor of computer science and robotics, <a href=\"https://imaging.cs.cmu.edu/svaf/static/pdfs/Spatially_Varying_Autofocus.pdf\" rel=\"noopener\" target=\"_blank\">presented their findings</a> at the <a href=\"https://iccv.thecvf.com/\" rel=\"noopener\" target=\"_blank\">2025 International Conference on Computer Vision</a> and received a Best Paper Honorable Mention recognition.</p> <div> <figure> <img alt=\"Illustration comparing a conventional photo with a defined focal plane to an All-In-Focus photo showcasing its spatially-varying autofocused focal surface.\" src=\"https://engineering.cmu.edu/_files/images/news/2025/1219-em-perfect-shot.png\" style=\"max-width: 100%; height: auto; max-height: 300px; object-fit: contain; border-radius: 6px; margin: 10px 0;\"> <figcaption> <p>Left: A conventional photo with a regular lens, where objects at a single focal plane appear sharp. Right: An all-in-focus photo captured through spatially-varying autofocusing. To achieve this, we combine (i) a programmable lens with spatially-varying control over focus, and (ii) a spatially-varying autofocus algorithm to drive the focus of this lens. Note that this is an optically-captured image of a real scene with no post-capture processing used.</p> </figcaption> </figure> </div> <p>Traditional camera lenses can only bring one flat layer of a scene into perfect focus at a time. Anything in front of or behind that layer turns soft and blurry. Narrowing the aperture can help, but it also dims the image and introduces new kinds of optical fuzziness caused by diffraction.</p> <p>‚ÄúWe‚Äôre asking the question, ‚ÄòWhat if a lens didn‚Äôt have to focus on just one plane at all?‚Äô‚Äù says Qin. ‚ÄúWhat if it could bend its focus to match the shape of the world in front of it?‚Äù</p> <p>The researchers developed a ‚Äúcomputational lens‚Äù‚Äîa hybrid of optics and algorithm‚Äîthat can adjust its focus differently for every part of a scene. The system builds on a design known as a Lohmann lens, which uses two curved, cubic lenses that shift against each other to tune focus. By combining this setup with a phase-only spatial light modulator‚Äîa device that controls how light bends at each pixel‚Äîthe researchers were able to make different parts of the image focus at different depths simultaneously.</p> <p>The system uses two autofocus methods. The first is Contrast-Detection Autofocus (CDAF), which divides the image into regions called superpixels. Each region independently finds the focus setting that maximizes its sharpness. The second is Phase-Detection Autofocus (PDAF), which uses a dual-pixel sensor to detect not just whether something is in focus, but which direction to adjust. This makes it faster and better suited for moving scenes‚Äîthe team achieved 21 frames per second with their modified sensor.</p> <p>‚ÄúTogether, they let the camera decide which parts of the image should be sharp‚Äîessentially giving each pixel its own tiny, adjustable lens,‚Äù explains O‚ÄôToole.</p> <blockquote> <p>Our system represents a novel category of optical design. One that could fundamentally change how cameras see the world.</p> <cite><strong>Aswin Sankaranarayanan</strong>, <em>Professor</em>, Electrical and Computer Engineering</cite> </blockquote> <p>Beyond its obvious appeal to photographers, the technology could have sweeping applications. Microscopes could capture every layer of a biological sample in focus at once. Autonomous vehicles might see their surroundings with unprecedented clarity. Even augmented and virtual reality systems could benefit, using similar optics to create more lifelike depth perception.</p> <p>‚ÄúOur system represents a novel category of optical design,‚Äù says Sankaranarayanan. ‚ÄúOne that could fundamentally change how cameras see the world.‚Äù</p> </div></div>"},{"id":"https://type-ruby.github.io/","title":"T-Ruby is Ruby with syntax for types","link":"https://type-ruby.github.io/","hnCommentsUrl":"https://news.ycombinator.com/item?id=46395871","content":"<a href=\"https://news.ycombinator.com/item?id=46395871\">Comments</a>","date":1766780870000,"feedTitle":"Hacker News","isHackerNews":true,"isGoogleNews":false,"fullContent":"<div><h2>Example</h2><p>Write typed Ruby, compile to standard Ruby with generated type signatures.</p><div><div><pre tabindex=\"0\"><code><span><span># hello.trb</span><br></span><span><span>def</span><span>greet</span><span>(</span><span>name</span><span>:</span><span>String</span><span>)</span><span>:</span><span>String</span><br></span><span><span>\"Hello, </span><span>#{</span><span>name</span><span>}</span><span>!\"</span><br></span><span><span>end</span><br></span><span><br></span><span><span>def</span><span>add</span><span>(</span><span>a</span><span>:</span><span>Integer</span><span>,</span><span>b</span><span>:</span><span>Integer</span><span>)</span><span>:</span><span>Integer</span><br></span><span><span> a </span><span>+</span><span> b</span><br></span><span><span>end</span><br></span></code></pre></div><p>‚Üí</p><div><div><pre tabindex=\"0\"><code><span><span># hello.rb</span><br></span><span><span>def</span><span>greet</span><span>(</span><span>name</span><span>)</span><br></span><span><span>\"Hello, </span><span>#{</span><span>name</span><span>}</span><span>!\"</span><br></span><span><span>end</span><br></span><span><br></span><span><span>def</span><span>add</span><span>(</span><span>a</span><span>,</span><span> b</span><span>)</span><br></span><span><span> a </span><span>+</span><span> b</span><br></span><span><span>end</span><br></span></code></pre></div><p>+</p><div><pre tabindex=\"0\"><code><span><span># hello.rbs</span><br></span><span><span>def</span><span>greet</span><span>:</span><span>(</span><span>name</span><span>:</span><span>String</span><span>)</span><span>-</span><span>&gt;</span><span>String</span><br></span><span><br></span><span><span>def</span><span>add</span><span>:</span><span>(</span><span>a</span><span>:</span><span>Integer</span><span>,</span><span>b</span><span>:</span><span>Integer</span><span>)</span><span>-</span><span>&gt;</span><span>Integer</span><br></span></code></pre></div></div></div></div><div><h2>Existing Methods</h2><p>Compare with existing Ruby typing solutions and see why T-Ruby is different.</p><div><div><h3>How it works</h3><p>A static type checker for Ruby developed by Stripe. Uses sig blocks to declare types on methods.</p><div><pre tabindex=\"0\"><code><span><span># typed: strict</span><br></span><span><span>require</span><span>'sorbet-runtime'</span><br></span><span><br></span><span><span>class</span><span>Greeter</span><br></span><span><span>extend</span><span>T</span><span>::</span><span>Sig</span><br></span><span><br></span><span><span> sig </span><span>{</span><span> params</span><span>(</span><span>name</span><span>:</span><span>String</span><span>)</span><span>.</span><span>returns</span><span>(</span><span>String</span><span>)</span><span>}</span><br></span><span><span>def</span><span>greet</span><span>(</span><span>name</span><span>)</span><br></span><span><span>\"Hello, </span><span>#{</span><span>name</span><span>}</span><span>!\"</span><br></span><span><span>end</span><br></span><span><span>end</span><br></span></code></pre></div></div><div><h3>Limitations</h3><ul><li>Requires runtime dependency (sorbet-runtime gem)</li><li>Types must be written separately in sig blocks, like comments above function code.</li><li>Requires learning sig block's unique DSL syntax.</li></ul></div><div><h3>T-Ruby Approach</h3><p>T-Ruby uses inline types like TypeScript without runtime dependencies, and generates standard RBS files.</p></div></div></div><div><h2>Quick Start</h2><div><div><p>1</p><div><h3>Initialize project</h3><div><pre tabindex=\"0\"><code><span><span>gem </span><span>install</span><span> t-ruby</span><br></span><span><span>trc </span><span>--init</span><br></span></code></pre></div></div></div><div><p>2</p><div><h3>Start watch mode</h3></div></div><div><p>3</p><div><h3>Write typed Ruby</h3><div><p>src/hello.trb</p><div><pre tabindex=\"0\"><code><span><span>def</span><span>greet</span><span>(</span><span>name</span><span>:</span><span>String</span><span>)</span><span>:</span><span>String</span><br></span><span><span>\"Hello, </span><span>#{</span><span>name</span><span>}</span><span>!\"</span><br></span><span><span>end</span><br></span></code></pre></div></div></div></div></div></div><div><h2>Works with your tools</h2><p>T-Ruby integrates seamlessly with the Ruby ecosystem.</p></div><div><h2>Join the Journey</h2><p>T-Ruby is an open source project. Your contribution makes a difference.<br>It's still experimental. The core compiler works, but there's much to improve.<br>Feedback and suggestions are always welcome!</p></div>"},{"id":"https://jyn.dev/pre-commit-hooks-are-fundamentally-broken/","title":"Pre-commit hooks are fundamentally broken","link":"https://jyn.dev/pre-commit-hooks-are-fundamentally-broken/","hnCommentsUrl":"https://news.ycombinator.com/item?id=46398906","content":"<a href=\"https://news.ycombinator.com/item?id=46398906\">Comments</a>","date":1766807120000,"feedTitle":"Hacker News","isHackerNews":true,"isGoogleNews":false,"fullContent":"<div itemprop=\"articleBody\"> <p>Let's start a new Rust project.</p> <pre data-lang=\"console\"><code data-lang=\"console\"><span><span>$</span> <span><span>mkdir</span></span><span> best-fizzbuzz-ever</span> </span><span><span>$</span> <span><span>cd</span></span><span> best-fizzbuzz-ever</span> </span><span><span>$</span> <span><span>cat</span></span><span> <span><span>&lt;&lt;</span> <span>EOF</span></span> <span><span>&gt;</span> main.rs</span></span></span><span><span><span>fn main() { for i in 0.. { </span></span></span><span><span><span> println (\"fizzbuzz\"); </span></span></span><span><span><span>}} </span></span></span><span><span><span><span>EOF</span></span></span> </span><span><span>$</span> <span><span>git</span></span><span> init</span> </span><span>Initialized empty Git repository in /home/jyn/src/third-website/best-fizzbuzz-ever/.git/ </span><span><span>$</span> <span><span>git</span></span><span> add main.rs</span> </span><span><span>$</span> <span><span>git</span></span><span> commit<span><span> --</span>message</span> fizzbuzz</span> </span><span>[main (root-commit) 661dc28] fizzbuzz </span><span> 1 file changed, 4 insertions(+) </span><span> create mode 100644 main.rs </span></code></pre> <p>Neat. Now let's say I add this to some list of fizzbuzz projects in different languages. Maybe .... <a href=\"https://github.com/joshkunz/fizzbuzz\">this one</a>. They tell me I need to have \"proper formatting\" and \"use consistent style\". How rude.</p> <p>Maybe I can write a pre-commit hook that checks that for me?</p> <pre data-lang=\"console\"><code data-lang=\"console\"><span><span>$</span> <span><span>cat</span></span><span> <span><span>&lt;&lt;</span> <span>'</span><span>EOF</span><span>'</span></span> <span><span>&gt;</span> pre-commit</span></span></span><span><span><span>#!/bin/sh </span></span></span><span><span><span>set -eu </span></span></span><span><span><span>for f in *.rs; do </span></span></span><span><span><span> rustfmt --check \"$f\" </span></span></span><span><span><span>done </span></span></span><span><span><span><span>EOF</span></span></span> </span><span><span>$</span> <span><span>chmod</span></span><span> +x pre-commit</span> </span><span><span>$</span> <span><span>ln</span></span><span><span><span> -</span>s</span> ../../pre-commit .git/hooks/pre-commit</span> </span><span><span>$</span> <span><span>git</span></span><span> add pre-commit</span> </span><span><span>$</span> <span><span>git</span></span><span> commit<span><span> --</span>message</span> <span><span>\"</span>add pre-commit hook<span>\"</span></span></span> </span><span>Diff in /home/jyn/src/third-website/best-fizzbuzz-ever/src/main.rs:1: </span><span>-fn main() { for i in 0.. { </span><span>- println (\"fizzbuzz\"); </span><span>-}} </span><span>+fn main() { </span><span>+ for i in 0.. { </span><span>+ println(\"fizzbuzz\"); </span><span>+ } </span><span>+} </span></code></pre> <p>Neat! Let's commit that change.</p> <pre data-lang=\"console\"><code data-lang=\"console\"><span><span>$</span> <span><span>rustfmt</span></span><span> main.rs</span> </span><span><span>$</span> <span><span>git</span></span><span> commit<span><span> --</span>message</span> <span><span>\"</span>add pre-commit hook<span>\"</span></span></span> </span><span>[main 3be7b87] add pre-commit hook </span><span> 1 file changed, 4 insertions(+) </span><span> create mode 100755 pre-commit </span><span><span>$</span> <span><span>git</span></span><span> status</span> </span><span>On branch main </span><span>Changes not staged for commit: </span><span> (use \"git add &lt;file&gt;...\" to update what will be committed) </span><span> (use \"git restore &lt;file&gt;...\" to discard changes in working directory) </span><span> modified: main.rs </span></code></pre> <p>Oh ... We fixed the formatting, but we didn't actually stage the changes. The pre-commit hook runs on the <em>working tree</em>, not on the <em>index</em>, so it didn't catch the issue. We can see that the version tracked by git still has the wrong formatting:</p> <pre data-lang=\"console\"><code data-lang=\"console\"><span><span>$</span> <span><span>git</span></span><span> show HEAD:main.rs</span> </span><span>fn main() { for i in 0.. { </span><span> println (\"fizzbuzz\"); </span><span>}} </span></code></pre> <p>Maybe we can make the script smarter? Let's checkout all the files in the index into a temporary directory and run our pre-commit hook there. <sup id=\"fr-4-1\"><a href=\"#fn-4\">1</a></sup></p> <pre data-lang=\"console\"><code data-lang=\"console\"><span><span>$</span> <span><span>cat</span></span><span> <span><span>&lt;&lt;</span> <span>'</span><span>EOF</span><span>'</span></span> <span><span>&gt;</span> pre-commit</span></span></span><span><span><span>#!/bin/sh </span></span></span><span><span><span>set -eu </span></span></span><span><span><span>tmpdir=$(mktemp -d --tmpdir \"$(basename \"$(realpath .)\")-pre-commit.XXXX\") </span></span></span><span><span><span>trap 'rm -r \"$tmpdir\"' EXIT </span></span></span><span><span><span>git checkout-index --all --prefix=\"$tmpdir/\" </span></span></span><span><span><span>for f in $tmpdir/*.rs; do </span></span></span><span><span><span> rustfmt --check \"$f\" </span></span></span><span><span><span>done </span></span></span><span><span><span><span>EOF</span></span></span> </span><span><span>$</span> <span><span>git</span></span><span> add pre-commit</span> </span><span><span>$</span> <span><span>git</span></span><span> commit<span><span> --</span>message</span> <span><span>\"</span>make pre-commit hook smarter<span>\"</span></span></span> </span><span>Diff in /tmp/best-fizzbuzz-ever-pre-commit.ZNyw/main.rs:1: </span><span>-fn main() { for i in 0.. { </span><span>- println (\"fizzbuzz\"); </span><span>-}} </span><span>+fn main() { </span><span>+ for i in 0.. { </span><span>+ println(\"fizzbuzz\"); </span><span>+ } </span><span>+} </span></code></pre> <p>Yay! That caught the issue. Now let's add our rust program to that collection of fizzbuzz programs.</p> <pre data-lang=\"console\"><code data-lang=\"console\"><span><span>$</span> <span><span>git</span></span><span> add main.rs</span> </span><span><span>$</span> <span><span>git</span></span><span> commit<span><span> --</span>message</span> <span><span>\"</span>make pre-commit hook smarter<span>\"</span></span></span> </span><span>[main 3cb40f6] make pre-commit hook smarter </span><span> 2 files changed, 11 insertions(+), 4 deletions(-) </span><span><span>$</span> <span><span>git</span></span><span> remote add upstream https://github.com/joshkunz/fizzbuzz</span> </span><span><span>$</span> <span><span>git</span></span><span> fetch upstream</span> </span><span>remote: Enumerating objects: 222, done. </span><span>remote: Total 222 (delta 0), reused 0 (delta 0), pack-reused 222 (from 1) </span><span>Receiving objects: 100% (222/222), 29.08 KiB | 29.08 MiB/s, done. </span><span>Resolving deltas: 100% (117/117), done. </span><span>From https://github.com/joshkunz/fizzbuzz </span><span> * [new branch] master -&gt; upstream/master </span><span><span>$</span> <span><span>git</span></span><span> rebase upstream</span> </span><span>Successfully rebased and updated refs/heads/main. </span></code></pre> <p>Maybe we'll make one last tweak...</p> <pre data-lang=\"console\"><code data-lang=\"console\"><span><span>$</span> <span><span>sed</span></span><span><span><span> -</span>i</span> <span><span>'</span>1i // Written by jyn<span>'</span></span> main.rs</span> </span><span><span>$</span> <span><span>git</span></span><span> commit main.rs<span><span> --</span>message</span> <span><span>\"</span>mark who wrote fizzbuzz<span>\"</span></span></span> </span><span>Diff in /tmp/best-fizzbuzz-ever-pre-commit.n1Pj/fizzbuzz-traits.rs:4: </span><span> use std::iter; </span><span> struct FizzBuzz { </span><span>- from : i32 </span><span>- , to : i32 </span><span>+ from: i32, </span><span>+ to: i32, </span><span> } </span><span> impl FizzBuzz { </span></code></pre> <p>Uh. Huh. Right. The code that was already here wasn't formatted according to rustfmt. Our script is running on every file in the git repo, so it won't let us commit.</p> <p>Maybe we can change it to only run on modified files?</p> <pre data-lang=\"console\"><code data-lang=\"console\"><span><span>$</span> <span><span>cat</span></span><span> <span><span>&lt;&lt;</span> <span>'</span><span>EOF</span><span>'</span></span> <span><span>&gt;</span> pre-commit</span></span></span><span><span><span>#!/bin/sh </span></span></span><span><span><span>set -eu </span></span></span><span><span><span>files=$(git diff --name-only --cached --no-ext-diff --diff-filter=d) </span></span></span><span><span><span>tmpdir=$(mktemp -d --tmpdir \"$(basename \"$(realpath .)\")-pre-commit.XXXX\") </span></span></span><span><span><span>trap 'rm -r \"$tmpdir\"' EXIT </span></span></span><span><span><span>printf %s \"$files\" | tr '\\n' '\\0' | xargs -0 git checkout-index --prefix=\"$tmpdir/\" </span></span></span><span><span><span>for f in $tmpdir/*.rs; do </span></span></span><span><span><span> rustfmt --check \"$f\" </span></span></span><span><span><span>done </span></span></span><span><span><span><span>EOF</span></span></span> </span><span><span>$</span> <span><span>git</span></span><span> commit main.rs pre-commit <span>\\ </span></span></span><span><span><span><span> --</span>message</span> <span><span>\"</span>update main.rs; make pre-commit even smarter<span>\"</span></span></span> </span><span>[main f2925bc] update main.rs; make pre-commit even smarter </span><span> 2 files changed, 5 insertions(+), 1 deletion(-) </span></code></pre> <p>Alright. Cool.</p> <p>Let's do one last thing. Let's say we had an existing PR to this repo and we need to rebase it. Maybe it had a merge conflict, or maybe there was a fix on main that we need in order to implement our solution.</p> <pre data-lang=\"console\"><code data-lang=\"console\"><span><span>$</span> <span><span>git</span></span><span> checkout upstream/HEAD <span><span>#</span></span><span> Simulate an old PR by checking out an old commit</span></span> </span><span>HEAD is now at 56bf3ab Adds E to the README </span><span><span>$</span> <span><span>echo</span></span><span> <span><span>'</span>fn main() { println!(\"this counts as fizzbuzz, right?\"); }<span>'</span></span> <span>&gt;</span> print.rs</span> </span><span><span>$</span> <span><span>git</span></span><span> add print.rs</span> </span><span><span>$</span> <span><span>git</span></span><span> commit<span><span> --</span>message</span> <span><span>\"</span>Add print.rs<span>\"</span></span></span> </span><span>[detached HEAD 3d1bbf7] Add print.rs </span><span> 1 file changed, 1 insertion(+) </span><span> create mode 100644 print.rs </span></code></pre> <p>And let's also say that we want to edit the commit message.</p> <pre data-lang=\"console\"><code data-lang=\"console\"><span><span>$</span> <span><span>git</span></span><span> rebase<span><span> -</span>i</span> main <span><span>#</span></span><span> Rebase this whole branch over our main branch</span></span> </span><span>reword 3d1bbf7 Add print.rs </span><span><span>#</span> <span><span>Rebase</span></span><span> f2925bc..3d1bbf7 onto f2925bc (1 command</span>) </span></code></pre> <h2 id=\"now-we-really-have-a-problem\">Now, we <em>really</em> have a problem. </h2> <pre><code><span>Error: file `/tmp/best-fizzbuzz-ever-pre-commit.p3az/*.rs` does not exist </span><span>Could not apply 3d1bbf7... Add print.rs </span></code></pre> <p>Two things went wrong here:</p> <ol> <li>Our pre-commit hook can't handle commits that don't have any Rust files.</li> <li>Our pre-commit hook <em>ran on a branch we were rebasing</em>. <sup id=\"fr-2-1\"><a href=\"#fn-2\">2</a></sup></li> </ol> <p>Fixing the first thing doesn't really help us, because we don't control other people's branches. They might have used <code>git commit --no-verify</code>. They might not even have a pre-commit hook installed. They might have had a branch that passed the hook when they originally wrote it, but not after a rebase (e.g. if your hook is <code>cargo check</code> or something like that). They might have had a branch that used an old version of the hook that didn't have as many checks as a later version.</p> <p>Our only real choice here is to pass <code>--no-verify</code> to <code>git rebase</code> every time we run it, and to <code>git commit</code> for every commit in the rebase we modify, and possibly even to every <code>git merge</code> we run outside of a rebase.</p> <p>This is because pre-commit hooks are a <em>fundamentally broken idea</em>. Code does not exist in isolation. Commits that are local to a developer machine do not ever go through CI. Commits don't even necessarily mean that that the code is ready to publish‚Äîpre-commit hooks don't run on <code>git stash</code> for a reason! I don't use <code>git stash</code>, I use <code>git commit</code> so that my stashes are tied to a branch, and hooks completely break this workflow.</p> <p>There are a <a href=\"https://blog.plover.com/prog/git/hook-disaster.html\">bunch</a> of <a href=\"https://dev.to/afl_ext/are-pre-commit-git-hooks-a-good-idea-i-dont-think-so-38j6\">other</a> footguns with pre-commit hooks. This doesn't even count the fact that nearly all pre-commit hooks are implemented in a broken way and just blindly run on the worktree, and are slow or unreliable or both. Don't get me started on pre-commit hooks that try to add things to the commit you're about to make.</p> <p>Please just don't use them. Use <code>pre-push</code> instead. <sup id=\"fr-1-1\"><a href=\"#fn-1\">3</a></sup> <code>pre-push</code> hooks nearly avoid all of these issues.</p> <h2 id=\"tips-for-writing-a-pre-push-hook\">Tips for writing a <code>pre-push</code> hook </h2> <ul> <li>Run on the index, not the working tree, as described above. <sup id=\"fr-3-1\"><a href=\"#fn-3\">4</a></sup></li> <li>Only add checks that are fast and reliable. Checks that touch the network should never go in a hook. Checks that are slow and require an update-to-date build cache should never go in a hook. Checks that require credentials or a running local service should never go in a hook.</li> <li>Be as quiet as possible. This hook is running buried inside a bunch of other commands, often without the developer knowing that the hook is going to run. Don't hide other important output behind a wall of progress messages.</li> <li>Don't set the hook up automatically. Whatever tool you use that promises to make this reliable is wrong. There is not a way to do this reliably, and the number of times it's broken on me is more than I can count. Please just add docs for how to set it up manually, prominantly featured in your CONTRIBUTING docs. (You do have contributing docs, right?)</li> </ul> <p>And don't write <code>pre-commit</code> hooks!</p> <section> <ol> <li id=\"fn-4\"> <p>This is really quite slow on large enough repos, but there's not any real alternative. <code>git stash</code> destoys the git index state. The only VCS that exposes a FUSE filesystem of its commits is <a href=\"https://github.com/facebook/sapling/blob/main/eden/fs/docs/Overview.md\">Sapling</a>, which is poorly supported outside Facebook. The best you can do is give up on looking at the whole working copy and only write hooks that read a single file at a time. <a href=\"#fr-4-1\">‚Ü©</a></p> </li> <li id=\"fn-2\"> <p>By default this doesn't happen when running bare <code>rebase</code>, but the second you add <code>--interactive</code>, nearly anything you do runs a hook. Hooks will also run when you attempt to resolve merge conflicts. <a href=\"#fr-2-1\">‚Ü©</a></p> </li> <li id=\"fn-1\"> <p>For more info about the difference, and a full list of possible hooks, see <a href=\"https://git-scm.com/docs/githooks\"><code>man 5 githooks</code></a>. <a href=\"#fr-1-1\">‚Ü©</a></p> </li> <li id=\"fn-3\"> <p>Notice that I don't say \"only run on changed files\". That's because it's <a href=\"https://lore.kernel.org/git/CAHnEOG2o784dk+OpkGt-1qjRJb34=sFMJvh-JRJ3v+GNBxFywQ@mail.gmail.com/\">not actually possible to reliably determine which branch the current commit is based on</a>, the best you can do is pick a random branch that looks likely. <a href=\"#fr-3-1\">‚Ü©</a></p> </li> </ol> </section> </div>"},{"id":"https://www.johndcook.com/blog/2023/07/10/lewis-carroll-determinants/","title":"How Lewis Carroll computed determinants (2023)","link":"https://www.johndcook.com/blog/2023/07/10/lewis-carroll-determinants/","hnCommentsUrl":"https://news.ycombinator.com/item?id=46395106","content":"<a href=\"https://news.ycombinator.com/item?id=46395106\">Comments</a>","date":1766775812000,"feedTitle":"Hacker News","isHackerNews":true,"isGoogleNews":false,"fullContent":"<!-- .entry-header --> <div> <p><img fetchpriority=\"high\" decoding=\"async\" src=\"https://www.johndcook.com/madhatter.png\" alt=\"Mad hatter from Alice in Wonderland by Lewis Carroll\" width=\"400\" height=\"460\" style=\"max-width: 100%; height: auto; max-height: 300px; object-fit: contain; border-radius: 6px; margin: 10px 0;\"></p> <p>Charles Dodgson, better known by his pen name Lewis Carroll, discovered a method of calculating determinants now known variously as the method of contractants, Dodgson condensation, or simply condensation.</p> <p>The method was devised for ease of computation by hand, but it has features that make it a practical method for computation by machine.</p> <h2>Overview</h2> <p>The basic idea is to repeatedly condense a matrix, replacing it by a matrix with one less row and one less column. Each element is replaced by the determinant of the 2√ó2 matrix formed by that element and its neighbors to the south, east, and southeast. The bottom row and rightmost column have no such neighbors and are removed. There is one additional part of the algorithm that will be easier to describe after introducing some notation.</p> <h2>Details</h2> <p>Let <em>A</em> be the matrix whose determinant we want to compute and let <em>A</em><sup>(<em>k</em>)</sup> be the matrix obtained after <em>k</em> steps of the condensation algorithm.</p> <p>The matrix <em>A</em><sup>(1)</sup> is computed as described in the overview:</p> <p><img decoding=\"async\" src=\"https://www.johndcook.com/dodgson1.svg\" alt=\"a^{(1)}_{ij} = a_{ij} a_{i+1, j+1} - a_{i, j+1} a_{i+1, j}.\" width=\"227\" height=\"25\" style=\"max-width: 100%; height: auto; max-height: 300px; object-fit: contain; border-radius: 6px; margin: 10px 0;\"></p> <p>Starting with <em>A</em><sup>(2)</sup> the terms are similar, except each 2√ó2 determinant is divided by an element from two steps back:</p> <p><img decoding=\"async\" src=\"https://www.johndcook.com/dodgson2.svg\" alt=\"a^{(k+1)}_{ij} = \\frac{1}{a^{(k-1)}_{i+1,j+1}}\\left(a^{(k)}_{ij} a^{(k)}_{i+1, j+1} - a^{(k)}_{i, j+1} a^{(k)}_{i+1, j} \\right)\" width=\"334\" height=\"47\" style=\"max-width: 100%; height: auto; max-height: 300px; object-fit: contain; border-radius: 6px; margin: 10px 0;\"></p> <p><a href=\"https://www.gutenberg.org/files/37354/37354-pdf.pdf\">Dodgson‚Äôs original paper</a> from 1867 is quite readable, surprisingly so given that math notation and terminology changes over time.</p> <p>One criticism I have of the paper is that it is hard to understand which element should be in the denominator, whether the subscripts should be <em>i</em> and <em>j</em> or <em>i</em>+1 and <em>j</em>+1. His first example doesn‚Äôt clarify this because these elements happen to be equal in the example.</p> <h2>Example</h2> <p>Here‚Äôs an example using condensation to find the determinant of a 4√ó4 matrix.</p> <p><img loading=\"lazy\" decoding=\"async\" src=\"https://www.johndcook.com/dodgson4.svg\" alt=\"\\begin{align*} A^{(0)} &amp;= \\begin{bmatrix} 3 &amp; 1 &amp; 4 &amp; 1 \\\\ 5 &amp; 9 &amp; 2 &amp; 6 \\\\ 0 &amp; 7 &amp; 1 &amp; 0 \\\\ 2 &amp; 0 &amp; 2 &amp; 3 \\end{bmatrix} \\\\ A^{(1)} &amp;= \\begin{bmatrix} 22 &amp;-34 &amp; 22 \\\\ 35 &amp; -5 &amp;-6 \\\\ -14 &amp; 14 &amp; 3 \\end{bmatrix} \\\\ A^{(2)} &amp;= \\begin{bmatrix} 120 &amp; 157 \\\\ 60 &amp; 69 \\end{bmatrix} \\\\ A^{(3)} &amp;= \\begin{bmatrix} 228 \\end{bmatrix} \\end{align*}\" width=\"188\" height=\"236\" style=\"max-width: 100%; height: auto; max-height: 300px; object-fit: contain; border-radius: 6px; margin: 10px 0;\"></p> <p>We can verify this with Mathematica:</p> <pre> Det[{{3, 1, 4, 1}, {5, 9, 2, 6}, {0, 7, 1, 0}, {2, 0, 2, 3}}] </pre> <p>which also produces 228.</p> <h2>Division</h2> <p>The algorithm above involves a division and so we should avoid dividing by zero. Dodgson says to</p> <blockquote><p>Arrange the given block, if necessary, so that no ciphers [zeros] occur in its interior. This may be done either by transposing rows or columns, or by adding to certain rows the several terms of other rows multiplied by certain multipliers.</p></blockquote> <p>He expands on this remark and gives examples. I‚Äôm not sure whether this preparation is necessary only to avoid division by zero, but it does avoid the problem of dividing by a zero.</p> <p>If the original matrix has all integer entries, then the division in Dodgson‚Äôs condensation algorithm is exact. The sequence of matrices produced by the algorithm will all have integer entries.</p> <h2>Efficiency</h2> <p>Students usually learn cofactor expansion as their first method of calculating determinants. This rule is easy to explain, but inefficient since the number of steps required is <em>O</em>(<em>n</em>!).</p> <p>The more efficient way to compute determinants is by Gaussian elimination with partial pivoting. As with condensation, one must avoid dividing by zero, hence the partial pivoting.</p> <p>Gaussian elimination takes <em>O</em>(<em>n</em>¬≥) operations, and so does Dodgson‚Äôs condensation algorithm. Condensation is easy to teach and easy to carry out by hand, but unlike cofactor expansion it scales well.</p> <p>If a matrix has all integer entries, Gaussian elimination can produce non-integer values in intermediate steps. Condensation does not. Also, condensation is inherently parallelizable: each of the 2 √ó 2 determinants can be calculated simultaneously.</p> <h2>Related posts</h2> <ul> <li><a href=\"https://www.johndcook.com/blog/2023/05/16/matrix-adjugate/\">Cofactors, determinants, and adjugates</a></li> <li><a href=\"https://www.johndcook.com/blog/2022/12/10/determinants-ones/\">Why determinants with a column of 1s?</a></li> <li><a href=\"https://www.johndcook.com/blog/applied-linear-algebra/\">Applied linear algebra</a></li> </ul> </div><!-- .entry-content --> <!-- .entry-meta -->"},{"id":"https://nry.me/posts/2025-10-09/small-web-screenshots/","title":"One million (small web) screenshots","link":"https://nry.me/posts/2025-10-09/small-web-screenshots/","hnCommentsUrl":"https://news.ycombinator.com/item?id=46354492","content":"<a href=\"https://news.ycombinator.com/item?id=46354492\">Comments</a>","date":1766414660000,"feedTitle":"Hacker News","isHackerNews":true,"isGoogleNews":false,"fullContent":"<div id=\"readability-page-1\" class=\"page\"><div><h2 id=\"background\">Background</h2><p>Last month I came across <a href=\"https://onemillionscreenshots.com/\">onemillionscreenshots.com</a> and was pleasantly surprised at how well it worked as a tool for discovery. We all know the adage about judging book covers, but here, ‚Ä¶it just kinda works. Skip over the sites with bright flashy colors begging for attention and instead, seek out the negative space in between.</p><p>The one nitpick I have though is in how they sourced the websites. They used the most popular websites from <a href=\"https://en.wikipedia.org/wiki/Common_Crawl\">Common Crawl</a> which is fine, but not really what I‚Äôm interested in‚Ä¶</p><p><img src=\"https://nry.me/posts/2025-10-09/small-web-screenshots/imgs/venn_whole.svg\" style=\"max-width: 100%; height: auto; max-height: 300px; object-fit: contain; border-radius: 6px; margin: 10px 0;\"></p><p>There are of course exceptions, but the relationship between popularity and quality is loose. McDonald‚Äôs isn‚Äôt popular because it serves the best cheeseburger, it‚Äôs popular because it serves a cheeseburger that meets the minimum level of satisfaction for the maximum number of people. It‚Äôs a profit maximizing local minima on the cheeseburger landscape.</p><p><img src=\"https://nry.me/posts/2025-10-09/small-web-screenshots/imgs/venn_close.svg\" style=\"max-width: 100%; height: auto; max-height: 300px; object-fit: contain; border-radius: 6px; margin: 10px 0;\"></p><p>This isn‚Äôt limited to just food either, the NYT Best Sellers list, Spotify Top 50, and Amazon review volume are other good examples. For me, what‚Äôs ‚Äúpopular‚Äù has become a filter for what to avoid. Lucky for us though, there‚Äôs a corner of the internet where substance still outweighs click-through rates. A place that‚Äôs largely immune to the corrosive influence of monetization. It‚Äôs called the small web and it‚Äôs a beautiful place.</p><p><img src=\"https://nry.me/posts/2025-10-09/small-web-screenshots/imgs/popularity.svg\" style=\"max-width: 100%; height: auto; max-height: 300px; object-fit: contain; border-radius: 6px; margin: 10px 0;\"></p><h2 id=\"a-small-web-variant\">A small web variant</h2><p>The timing of this couldn‚Äôt have been better. I‚Äôm currently working on a couple of tools specifically focused on small web discovery/recommendation and happen to already have most of the data required to pull this off. I just needed to take some screenshots, sooo‚Ä¶ you‚Äôre welcome <a href=\"https://news.ycombinator.com/item?id=44860696\">armchairhacker</a>!</p><br><center>[full screen version: <a href=\"https://screenshots.nry.me/\">screenshots.nry.me</a>]</center><h2 id=\"technical-details\">Technical details</h2><p>Because I plan on discussing how I gathered the domains in the near future, I‚Äôll skip it for now (it‚Äôs pretty interesting). Suffice it to say though, once the domains are available, <a href=\"https://github.com/microsoft/playwright\">capturing the screenshots</a> is trivial. And once those are ready, we have a fairly <a href=\"https://nry.me/posts/2019-03-24/movie-poster-tsne/\">well worn path</a> to follow:</p><ol><li>generate visual embeddings</li><li>dimensionality reduction</li><li>assignment</li></ol><p>I find the last two steps particularly repetitive so I decided to combine them this time via <a href=\"https://en.wikipedia.org/wiki/Self-organizing_map\">self-organizing maps</a> (SOMs). I tried using SOMs a few years ago to help solve a TSP problem (well, <a href=\"https://nry.me/posts/2021-10-09/long-tiny-loop-attempt-2/\">actually the exact opposite‚Ä¶</a>) but ended up going in a different direction. Anyway, despite their trivial implementation they can be extremely useful. A bare bones SOM clocks in at about 10 lines with torch.</p><div><pre tabindex=\"0\"><code data-lang=\"python\"><span><span><span>@torch.no_grad</span>() </span></span><span><span><span>def</span> <span>som_step</span>(alpha, sigma): </span></span><span><span> <span># pick random training sample</span> </span></span><span><span> sample_index <span>=</span> np<span>.</span>random<span>.</span>randint(<span>0</span>, x<span>.</span>shape[<span>0</span>]) </span></span><span><span> D_t <span>=</span> torch<span>.</span>from_numpy(x[sample_index])<span>.</span>to(DEVICE) </span></span><span><span> <span># find the bmu using cosine similarity</span> </span></span><span><span> bmu_flat_idx <span>=</span> torch<span>.</span>argmax(torch<span>.</span>nn<span>.</span>CosineSimilarity(dim<span>=</span><span>2</span>)(D_t, W)<span>.</span>flatten()) </span></span><span><span> <span># convert flat index to 2d coordinates (i, j)</span> </span></span><span><span> u_i <span>=</span> bmu_flat_idx <span>//</span> W<span>.</span>shape[<span>1</span>] </span></span><span><span> u_j <span>=</span> bmu_flat_idx <span>%</span> W<span>.</span>shape[<span>1</span>] </span></span><span><span> <span># compute the l2 distance between the bmu and all other neurons</span> </span></span><span><span> dists_u <span>=</span> torch<span>.</span>sqrt((W_i <span>-</span> u_i)<span>**</span><span>2</span> <span>+</span> (W_j <span>-</span> u_j)<span>**</span><span>2</span>) </span></span><span><span> <span># apply neighborhood smoothing (theta)</span> </span></span><span><span> theta <span>=</span> torch<span>.</span>exp(<span>-</span>(dists_u <span>/</span> sigma)<span>**</span><span>2</span>) </span></span><span><span> <span># update the weights in-place</span> </span></span><span><span> W<span>.</span>add_((theta <span>*</span> alpha)<span>.</span>unsqueeze(<span>2</span>) <span>*</span> (D_t <span>-</span> W)) </span></span></code></pre></div><p>At their core, most SOMs have two elements: a monotonically decreasing learning rate and a neighborhood function with an influence (radius) that is also monotonically decreasing. During training, each step consists of the following:</p><div><ol><li>Randomly select a training sample.</li><li>Compare this training sample against all nodes in the SOM. The node with the smallest (quantization) error becomes the BMU (best matching unit).</li><li>Update the SOM node weights proportional to how far away from the BMU they are. Nodes closer to the BMU become more like the training sample.</li></ol></div><p>There are numerous modifications that can be made, but that‚Äôs basically it! If I‚Äôve piqued your interest, I highly recommend the book <i><a href=\"https://www.goodreads.com/book/show/838949.Self_Organizing_Maps\">Self-Organizing Maps</a></i> by Teuvo Kohonen, it‚Äôs a fairly quick read and covers the core aspects of SOMs.</p><p>With dimensionality reduction and assignment resolved, we just need the visual embeddings now. I started with the brand new <a href=\"https://arxiv.org/abs/2508.10104\">DinoV3</a> model, but was left rather disappointed. The progression of Meta‚Äôs self-supervised vision transformers has been truly incredible, but the latent space captures waaay more information than what I actually need. I just want to encode the high level aesthetic details of webpage screenshots. Because of this, I fell back on an old friend: the <a href=\"https://en.wikipedia.org/wiki/Triplet_loss\">triplet loss</a> on top of a small encoder. The resulting output dimension of 64 afforded ample room for describing the visual range while maintaining a considerably smaller footprint.</p><p>This got me 90% of the way there, but it was still lacking the visual layout I had envisioned. I wanted a stronger correlation with color at the expense of visual similarity. To achieve this, I had to manually enforce this bias by training two SOMs in parallel. One SOM operated on the encoder output (visual), the second SOM on the color distribution and were linked using the following:</p><p><img src=\"https://nry.me/posts/2025-10-09/small-web-screenshots/imgs/mapping.svg\" style=\"max-width: 100%; height: auto; max-height: 300px; object-fit: contain; border-radius: 6px; margin: 10px 0;\"></p><p>When the quantization error is low, the BMU pulling force is dominated by the visual similarity. As quantization error increases, the pulling force due to visual similarity wanes and is slowly overpowered by the pulling force from the color distribution. In essence, the color distribution controls the macro placement while the visual similarity controls the micro placement. The only controllable hyperparameter with this approach is selecting a threshold for where the crossover point occurs.</p><p>I didn‚Äôt spend much time trying to find the optimal point, it‚Äôs currently peak fall and well, I‚Äôd much rather be outside. A quick look at the overall quantization error (below left) and the <a href=\"https://en.wikipedia.org/wiki/U-matrix\">U-matrix</a> (below right) was sufficient.</p><p><img src=\"https://nry.me/posts/2025-10-09/small-web-screenshots/imgs/qe_error.png\" style=\"max-width: 100%; height: auto; max-height: 300px; object-fit: contain; border-radius: 6px; margin: 10px 0;\"> <img src=\"https://nry.me/posts/2025-10-09/small-web-screenshots/imgs/u_matrix.png\" style=\"max-width: 100%; height: auto; max-height: 300px; object-fit: contain; border-radius: 6px; margin: 10px 0;\"></p><p>There‚Äôs still a lot of cruft that slipped in (substack, medium.com, linkedin, etc‚Ä¶) but overall, I‚Äôd say it‚Äôs not too bad for a first pass. In the time since generating this initial map I‚Äôve already crawled an additional ~250k new domains so I suppose this means I‚Äôll be doing an update. What I do know for certain though is that self-organizing maps have earned a coveted spot in my heart for things that are simple to the point of being elegant and yet, deceptively powerful (the others of course being <a href=\"https://en.wikipedia.org/wiki/Aerodynamic_potential-flow_code\">panel methods</a>, <a href=\"https://nry.me/posts/2024-12-19/ptpx-2024/\">LBM</a>, <a href=\"https://en.wikipedia.org/wiki/Metropolis%E2%80%93Hastings_algorithm\">Metropolis-Hastings</a>, and the bicycle).</p></div></div>"},{"id":"https://xania.org/202512/20-simd-city","title":"SIMD City: Auto-Vectorisation","link":"https://xania.org/202512/20-simd-city","hnCommentsUrl":"https://news.ycombinator.com/item?id=46336019","content":"<a href=\"https://news.ycombinator.com/item?id=46336019\">Comments</a>","date":1766237140000,"feedTitle":"Hacker News","isHackerNews":true,"isGoogleNews":false,"fullContent":"<div id=\"readability-page-1\" class=\"page\"><div> <h2>SIMD City: Auto-vectorisation</h2> <p>Written by me, proof-read by an LLM. <br>Details at end.</p> <p>It‚Äôs time to look at one of the most sophisticated optimisations compilers can do: autovectorisation. Most ‚Äúbig data‚Äù style problems boil down to ‚Äúdo this maths to huge arrays‚Äù, and the limiting factor isn‚Äôt the maths itself, but the feeding of instructions to the CPU, along with the data it needs.</p> <p>To help with this problem, CPU designers came up with SIMD: ‚ÄúSingle Instruction, Multiple Data‚Äù. One instruction tells the CPU what to do with a whole chunk of data. These chunks could be 2, 4, 8, 16 or similar units of integers or floating point values, all treated individually. Initially<sup id=\"fnref:games\"><a href=\"#fn:games\">1</a></sup> the only way to use this capability was to write assembly language directly, but luckily for us, compilers are now able to help.</p> <p>To take advantage of SIMD we need to ensure our data is laid out in a nice long line, like an array, or vector<sup id=\"fnref:vectorisation\"><a href=\"#fn:vectorisation\">3</a></sup>. It‚Äôs also much better to store different ‚Äúfields‚Äù of the data in separate arrays<sup id=\"fnref:acton\"><a href=\"#fn:acton\">2</a></sup>. We‚Äôre going to start with some integer maths - let‚Äôs update an array <code>x</code> to be element-wise the max of <code>x</code> and <code>y</code>:</p> <p>In this <code>-O2</code>-compiled code<sup id=\"fnref:temp\"><a href=\"#fn:temp\">4</a></sup>, we don‚Äôt see any vectorisation, just the nice tight loop code we‚Äôve come to expect:</p> <div><pre><code><span>.L3:</span> <span>mov</span><span>edx</span><span>,</span><span>DWORD</span><span>PTR</span><span>[</span><span>rsi</span><span>+</span><span>rax</span><span>*</span><span>4</span><span>]</span><span>; read y[i]</span> <span>cmp</span><span>edx</span><span>,</span><span>DWORD</span><span>PTR</span><span>[</span><span>rdi</span><span>+</span><span>rax</span><span>*</span><span>4</span><span>]</span><span>; compare with x[i]</span> <span>jle</span><span>.L2</span><span>; if less, skip next instr</span> <span>mov</span><span>DWORD</span><span>PTR</span><span>[</span><span>rdi</span><span>+</span><span>rax</span><span>*</span><span>4</span><span>],</span><span>edx</span><span>; x[i] = y[i]</span> <span>.L2:</span> <span>add</span><span>rax</span><span>,</span><span>1</span><span>; ++i</span> <span>cmp</span><span>rax</span><span>,</span><span>65536</span><span>; are we at 65536?</span> <span>jne</span><span>.L3</span><span>; keep looping if not</span> </code></pre></div> <p>To ramp up to the next level, we‚Äôll need to add two flags: first we need to turn up the optimiser to <code>-O3</code><sup id=\"fnref:or\"><a href=\"#fn:or\">5</a></sup>, and then we need to tell the compiler to target a CPU that has the appropriate SIMD instruction<sup id=\"fnref:most\"><a href=\"#fn:most\">6</a></sup> with something like <code>-march=skylake</code>.</p> <p>Our inner loop has gotten a little more complex, but spot the cool part:</p> <div><pre><code><span>.L4:</span> <span>; Reads 8 integers into ymm1, y[i..i+7]</span> <span>vmovdqu</span><span>ymm1</span><span>,</span><span>YMMWORD</span><span>PTR</span><span>[</span><span>rsi</span><span>+</span><span>rax</span><span>]</span> <span>; Compares that with 8 integers x[i..i+7]</span> <span>vpcmpgtd</span><span>ymm0</span><span>,</span><span>ymm1</span><span>,</span><span>YMMWORD</span><span>PTR</span><span>[</span><span>rdi</span><span>+</span><span>rax</span><span>]</span> <span>; Were all 8 values less or equal?</span> <span>vptest</span><span>ymm0</span><span>,</span><span>ymm0</span> <span>; if so, skip the write</span> <span>je</span><span>.L3</span> <span>; mask move x[i..i+7] with the y values that were greater</span> <span>vpmaskmovd</span><span>YMMWORD</span><span>PTR</span><span>[</span><span>rdi</span><span>+</span><span>rax</span><span>],</span><span>ymm0</span><span>,</span><span>ymm1</span> <span>.L3:</span> <span>add</span><span>rax</span><span>,</span><span>32</span><span>; move forward 32 bytes</span> <span>cmp</span><span>rax</span><span>,</span><span>262144</span><span>; are we at the end? (32*65536)</span> <span>jne</span><span>.L4</span><span>; keep looping if not</span> </code></pre></div> <p>With a very similar number of instructions we‚Äôre now processing 8 integers at a time! This is the power of SIMD - we‚Äôd likely be limited by the bandwidth to memory rather than the housekeeping of working out what to do with them.</p> <p>There are a couple of things to talk about though. Firstly, what‚Äôs all this ‚Äúmask move‚Äù stuff? Well, with SIMD we can act on ‚Äúmultiple data‚Äù but only with a ‚Äúsingle instruction‚Äù. Our original code has a conditional update: not every array element is necessarily processed in the same way. The compiler has cleverly used a ‚Äúmask move‚Äù to let it <em>conditionally</em> write back only the elements that are ‚Äúgreater than‚Äù, which is pretty clever of it. We can help it if we don‚Äôt mind unconditionally writing to memory:</p> <p>By unconditionally writing to <code>x[i]</code><sup id=\"fnref:ok\"><a href=\"#fn:ok\">7</a></sup> we can reduce the loop to:</p> <div><pre><code><span>.L3:</span> <span>; Read 8 integers from x[i..i+7]</span> <span>vmovdqu</span><span>ymm0</span><span>,</span><span>YMMWORD</span><span>PTR</span><span>[</span><span>rdi</span><span>+</span><span>rax</span><span>]</span> <span>; \"max\" the integers with y[i..i+7]</span> <span>vpmaxsd</span><span>ymm0</span><span>,</span><span>ymm0</span><span>,</span><span>YMMWORD</span><span>PTR</span><span>[</span><span>rsi</span><span>+</span><span>rax</span><span>]</span> <span>; Store them back</span> <span>vmovdqu</span><span>YMMWORD</span><span>PTR</span><span>[</span><span>rdi</span><span>+</span><span>rax</span><span>],</span><span>ymm0</span> <span>add</span><span>rax</span><span>,</span><span>32</span><span>; move forward 32 bytes</span> <span>cmp</span><span>rax</span><span>,</span><span>262144</span><span>; are we at the end?</span> <span>jne</span><span>.L3</span><span>; keep looping if not</span> </code></pre></div> <p>The compiler has spotted our ternary operator is actually exactly the same as the built-in vector ‚Äúmax‚Äù instruction! No explicit comparisons or branches now - fantastic.</p> <p>There‚Äôs one last thing to cover - the eagle-eyed amongst you might have spotted the fact there are actually <em>two</em> loops, one using vector instructions, and one doing regular one-at-a-time operations. The regular loop is jumped to conditionally after this check:</p> <div><pre><code><span>lea</span><span>rax</span><span>,</span><span>[</span><span>rdi-4</span><span>]</span><span>; rax = x - 4</span> <span>sub</span><span>rax</span><span>,</span><span>rsi</span><span>; rax = x - 4 - y</span> <span>cmp</span><span>rax</span><span>,</span><span>24</span><span>; compare rax with 24</span> <span>mov</span><span>eax</span><span>,</span><span>0</span><span>; (set up loop counter for below)</span> <span>jbe</span><span>.L2</span><span>; if rax &lt;= 24; jump to the slow case</span> <span>; falls through to the vectorised loop here</span> </code></pre></div> <p>So what‚Äôs going on here? We‚Äôre checking <code>x</code> and <code>y</code> - not the <em>values</em> of the two arrays, but the addresses. That somewhat awkward sequence is essentially saying ‚Äúdo the two arrays overlap with each other in a way that would prevent us being able to vectorise‚Äù. If they overlap by 28 or more bytes, then we can‚Äôt read and write in 8 <code>int</code> (32-byte) chunks: working in batches like this would give different results as the overlap means writing to <code>x[i]</code> might affect <code>y[i+2]</code> (or similar). So, the compiler has to add this check <em>and</em> generate a fall-back case that does one at a time.</p> <p>With some non-standard trickery we tell the compiler to ignore vector dependencies for the loop<sup id=\"fnref:restrict\"><a href=\"#fn:restrict\">8</a></sup>:</p> <p>That‚Äôs it for today: with the right flags and a little care about data layout, the compiler can turn your one-at-a-time loops into batch-processing powerhouses! Tomorrow we‚Äôll look at floating point vectorisation and its own peculiar quirks.</p> <p><em>See <a href=\"https://youtu.be/d68x8TF7XJs\">the video</a> that accompanies this post.</em></p> <hr> <p><em>This post is day 20 of <a href=\"https://xania.org/AoCO2025-archive\">Advent of Compiler Optimisations 2025</a>, a 25-day series exploring how compilers transform our code.</em></p> <p><em>‚Üê <a href=\"https://xania.org/202512/19-tail-call-optimisation\">Chasing your tail</a> | <a href=\"https://xania.org/202512/21-vectorising-floats\">When SIMD Fails: Floating Point Associativity</a> ‚Üí</em></p> <p><em>This post was written by a human (<a href=\"https://xania.org/MattGodbolt\">Matt Godbolt</a>) and reviewed and proof-read by LLMs and humans.</em></p> <p><em>Support Compiler Explorer on <a href=\"https://patreon.com/c/mattgodbolt\">Patreon</a> or <a href=\"https://github.com/sponsors/compiler-explorer\">GitHub</a>, or by buying CE products in the <a href=\"https://shop.compiler-explorer.com/\">Compiler Explorer Shop</a></em>.</p> </div><div> <p>Posted at 06:00:00 CST on 20<sup>th</sup> December 2025.</p> </div></div>"},{"id":"https://github.com/pranshuparmar/witr","title":"Show HN: Witr ‚Äì Explain why a process is running on your Linux system","link":"https://github.com/pranshuparmar/witr","hnCommentsUrl":"https://news.ycombinator.com/item?id=46392910","content":"<a href=\"https://news.ycombinator.com/item?id=46392910\">Comments</a>","date":1766762436000,"feedTitle":"Hacker News","isHackerNews":true,"isGoogleNews":false,"fullContent":"<h2 tabindex=\"-1\" dir=\"auto\">witr (why-is-this-running)</h2> <p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/4262592/530396425-adebb063-4706-47a8-9f77-612298354ef7.gif?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NjY4MjQxNjMsIm5iZiI6MTc2NjgyMzg2MywicGF0aCI6Ii80MjYyNTkyLzUzMDM5NjQyNS1hZGViYjA2My00NzA2LTQ3YTgtOWY3Ny02MTIyOTgzNTRlZjcuZ2lmP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MTIyNyUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTEyMjdUMDgyNDIzWiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZmIyZDZjMGU3ZTE4ODRhMWJjNDA0YTJmNjdmZTYwZDliMzQ2MjhiNTM1NjkwYmZhZDJlYjZkMmMzZjVkODY1MiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.p5Ff9HBq-vG9djMxwjO0jnhMi0EZkzd2MLi8L535wt8\"><img src=\"https://private-user-images.githubusercontent.com/4262592/530396425-adebb063-4706-47a8-9f77-612298354ef7.gif?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NjY4MjQxNjMsIm5iZiI6MTc2NjgyMzg2MywicGF0aCI6Ii80MjYyNTkyLzUzMDM5NjQyNS1hZGViYjA2My00NzA2LTQ3YTgtOWY3Ny02MTIyOTgzNTRlZjcuZ2lmP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MTIyNyUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTEyMjdUMDgyNDIzWiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZmIyZDZjMGU3ZTE4ODRhMWJjNDA0YTJmNjdmZTYwZDliMzQ2MjhiNTM1NjkwYmZhZDJlYjZkMmMzZjVkODY1MiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.p5Ff9HBq-vG9djMxwjO0jnhMi0EZkzd2MLi8L535wt8\" alt=\"witr\" data-animated-image=\"\" style=\"max-width: 100%; height: auto; max-height: 300px; object-fit: contain; border-radius: 6px; margin: 10px 0;\"></a></p> <hr> <h2 tabindex=\"-1\" dir=\"auto\">1. Purpose</h2> <p dir=\"auto\"><strong>witr</strong> exists to answer a single question:</p> <blockquote> <p dir=\"auto\"><strong>Why is this running?</strong></p> </blockquote> <p dir=\"auto\">When something is running on a system‚Äîwhether it is a process, a service, or something bound to a port‚Äîthere is always a cause. That cause is often indirect, non-obvious, or spread across multiple layers such as supervisors, containers, services, or shells.</p> <p dir=\"auto\">Existing tools (<code>ps</code>, <code>top</code>, <code>lsof</code>, <code>ss</code>, <code>systemctl</code>, <code>docker ps</code>) expose state and metadata. They show <em>what</em> is running, but leave the user to infer <em>why</em> by manually correlating outputs across tools.</p> <p dir=\"auto\"><strong>witr</strong> makes that causality explicit.</p> <p dir=\"auto\">It explains <strong>where a running thing came from</strong>, <strong>how it was started</strong>, and <strong>what chain of systems is responsible for it existing right now</strong>, in a single, human-readable output.</p> <hr> <h2 tabindex=\"-1\" dir=\"auto\">2. Goals</h2> <h3 tabindex=\"-1\" dir=\"auto\">Primary goals</h3> <ul dir=\"auto\"> <li>Explain <strong>why a process exists</strong>, not just that it exists</li> <li>Reduce time‚Äëto‚Äëunderstanding during debugging and outages</li> <li>Work with zero configuration</li> <li>Be safe, read‚Äëonly, and non‚Äëdestructive</li> <li>Prefer clarity over completeness</li> </ul> <h3 tabindex=\"-1\" dir=\"auto\">Non‚Äëgoals</h3> <ul dir=\"auto\"> <li>Not a monitoring tool</li> <li>Not a performance profiler</li> <li>Not a replacement for systemd/docker tooling</li> <li>Not a remediation or auto‚Äëfix tool</li> </ul> <hr> <h2 tabindex=\"-1\" dir=\"auto\">3. Core Concept</h2> <p dir=\"auto\">witr treats <strong>everything as a process question</strong>.</p> <p dir=\"auto\">Ports, services, containers, and commands all eventually map to <strong>PIDs</strong>. Once a PID is identified, witr builds a causal chain explaining <em>why that PID exists</em>.</p> <p dir=\"auto\">At its core, witr answers:</p> <ol dir=\"auto\"> <li>What is running?</li> <li>How did it start?</li> <li>What is keeping it running?</li> <li>What context does it belong to?</li> </ol> <hr> <h2 tabindex=\"-1\" dir=\"auto\">4. Supported Targets</h2> <p dir=\"auto\">witr supports multiple entry points that converge to PID analysis.</p> <hr> <h3 tabindex=\"-1\" dir=\"auto\">4.1 Name (process or service)</h3> <p dir=\"auto\">A single positional argument (without flags) is treated as a process or service name. If multiple matches are found, witr will prompt for disambiguation by PID.</p> <hr> <h3 tabindex=\"-1\" dir=\"auto\">4.2 PID</h3> <p dir=\"auto\">Explains why a specific process exists.</p> <hr> <h3 tabindex=\"-1\" dir=\"auto\">4.3 Port</h3> <p dir=\"auto\">Explains the process(es) listening on a port.</p> <hr> <h2 tabindex=\"-1\" dir=\"auto\">5. Output Behavior</h2> <h3 tabindex=\"-1\" dir=\"auto\">5.1 Output principles</h3> <ul dir=\"auto\"> <li>Single screen by default (best effort)</li> <li>Deterministic ordering</li> <li>Narrative-style explanation</li> <li>Best-effort detection with explicit uncertainty</li> </ul> <hr> <h3 tabindex=\"-1\" dir=\"auto\">5.2 Standard Output Sections</h3> <h4 tabindex=\"-1\" dir=\"auto\">Target</h4> <p dir=\"auto\">What the user asked about.</p> <h4 tabindex=\"-1\" dir=\"auto\">Process</h4> <p dir=\"auto\">Executable, PID, user, command, start time and restart count.</p> <h4 tabindex=\"-1\" dir=\"auto\">Why It Exists</h4> <p dir=\"auto\">A causal ancestry chain showing how the process came to exist. This is the core value of witr.</p> <h4 tabindex=\"-1\" dir=\"auto\">Source</h4> <p dir=\"auto\">The primary system responsible for starting or supervising the process (best effort).</p> <p dir=\"auto\">Examples:</p> <ul dir=\"auto\"> <li>systemd unit</li> <li>docker container</li> <li>pm2</li> <li>cron</li> <li>interactive shell</li> </ul> <p dir=\"auto\">Only <strong>one primary source</strong> is selected.</p> <h4 tabindex=\"-1\" dir=\"auto\">Context (best effort)</h4> <ul dir=\"auto\"> <li>Working directory</li> <li>Git repository name and branch</li> <li>Docker container name / image</li> <li>Public vs private bind</li> </ul> <h4 tabindex=\"-1\" dir=\"auto\">Warnings</h4> <p dir=\"auto\">Non‚Äëblocking observations such as:</p> <ul dir=\"auto\"> <li>Process is running as root</li> <li>Process is listening on a public interface (0.0.0.0 / ::)</li> <li>Restarted multiple times (warning only if above threshold)</li> <li>Process is using high memory (&gt;1GB RSS)</li> <li>Process has been running for over 90 days</li> </ul> <hr> <h2 tabindex=\"-1\" dir=\"auto\">6. Flags &amp; Options</h2> <div data-snippet-clipboard-copy-content=\"--pid <n> Explain a specific PID --port <n> Explain port usage --short One-line summary --tree Show full process ancestry tree --json Output result as JSON --warnings Show only warnings --no-color Disable colorized output --env Show only environment variables for the process --help Show this help message\"><pre><code>--pid &lt;n&gt; Explain a specific PID --port &lt;n&gt; Explain port usage --short One-line summary --tree Show full process ancestry tree --json Output result as JSON --warnings Show only warnings --no-color Disable colorized output --env Show only environment variables for the process --help Show this help message </code></pre></div> <p dir=\"auto\">A single positional argument (without flags) is treated as a process or service name.</p> <hr> <h2 tabindex=\"-1\" dir=\"auto\">7. Example Outputs</h2> <h3 tabindex=\"-1\" dir=\"auto\">7.1 Name-based query</h3> <div data-snippet-clipboard-copy-content=\"Target : node Process : node (pid 14233) User : pm2 Command : node index.js Started : 2 days ago (Mon 2025-02-02 11:42:10 +05:30) Restarts : 1 Why It Exists : systemd (pid 1) ‚Üí pm2 (pid 5034) ‚Üí node (pid 14233) Source : pm2 Working Dir : /opt/apps/expense-manager Git Repo : expense-manager (main) Listening : 127.0.0.1:5001\"><pre><code>Target : node Process : node (pid 14233) User : pm2 Command : node index.js Started : 2 days ago (Mon 2025-02-02 11:42:10 +05:30) Restarts : 1 Why It Exists : systemd (pid 1) ‚Üí pm2 (pid 5034) ‚Üí node (pid 14233) Source : pm2 Working Dir : /opt/apps/expense-manager Git Repo : expense-manager (main) Listening : 127.0.0.1:5001 </code></pre></div> <hr> <h3 tabindex=\"-1\" dir=\"auto\">7.2 Short output</h3> <div data-snippet-clipboard-copy-content=\"systemd (pid 1) ‚Üí PM2 v5.3.1: God (pid 1481580) ‚Üí python (pid 1482060)\"><pre><code>systemd (pid 1) ‚Üí PM2 v5.3.1: God (pid 1481580) ‚Üí python (pid 1482060) </code></pre></div> <hr> <h3 tabindex=\"-1\" dir=\"auto\">7.3 Tree output</h3> <div dir=\"auto\" data-snippet-clipboard-copy-content=\"witr --pid 1482060 --tree\"><pre>witr --pid 1482060 --tree</pre></div> <div data-snippet-clipboard-copy-content=\"systemd (pid 1) ‚îî‚îÄ PM2 v5.3.1: God (pid 1481580) ‚îî‚îÄ python (pid 1482060)\"><pre><code>systemd (pid 1) ‚îî‚îÄ PM2 v5.3.1: God (pid 1481580) ‚îî‚îÄ python (pid 1482060) </code></pre></div> <hr> <h3 tabindex=\"-1\" dir=\"auto\">7.4 Multiple matches</h3> <h4 tabindex=\"-1\" dir=\"auto\">7.4.1 Multiple matching processes</h4> <div data-snippet-clipboard-copy-content=\"Multiple matching processes found: [1] PID 12091 node server.js (docker) [2] PID 14233 node index.js (pm2) [3] PID 18801 node worker.js (manual) Re-run with: witr --pid <pid>\"><pre><code>Multiple matching processes found: [1] PID 12091 node server.js (docker) [2] PID 14233 node index.js (pm2) [3] PID 18801 node worker.js (manual) Re-run with: witr --pid &lt;pid&gt; </code></pre></div> <hr> <h4 tabindex=\"-1\" dir=\"auto\">7.4.2 Ambiguous name (process and service)</h4> <div data-snippet-clipboard-copy-content=\"Ambiguous target: &quot;nginx&quot; The name matches multiple entities: [1] PID 2311 nginx: master process (service) [2] PID 24891 nginx: worker process (manual) witr cannot determine intent safely. Please re-run with an explicit PID: witr --pid <pid>\"><pre><code>Ambiguous target: \"nginx\" The name matches multiple entities: [1] PID 2311 nginx: master process (service) [2] PID 24891 nginx: worker process (manual) witr cannot determine intent safely. Please re-run with an explicit PID: witr --pid &lt;pid&gt; </code></pre></div> <hr> <h2 tabindex=\"-1\" dir=\"auto\">8. Installation</h2> <p dir=\"auto\">witr is distributed as a single static Linux binary.</p> <hr> <h3 tabindex=\"-1\" dir=\"auto\">8.1 Script Installation (Recommended)</h3> <p dir=\"auto\">The easiest way to install <strong>witr</strong> is via the install script.</p> <h4 tabindex=\"-1\" dir=\"auto\">Quick install</h4> <div dir=\"auto\" data-snippet-clipboard-copy-content=\"curl -fsSL https://raw.githubusercontent.com/pranshuparmar/witr/main/install.sh | bash\"><pre>curl -fsSL https://raw.githubusercontent.com/pranshuparmar/witr/main/install.sh <span>|</span> bash</pre></div> <h4 tabindex=\"-1\" dir=\"auto\">Review before install</h4> <div dir=\"auto\" data-snippet-clipboard-copy-content=\"curl -fsSL https://raw.githubusercontent.com/pranshuparmar/witr/main/install.sh -o install.sh cat install.sh chmod +x install.sh ./install.sh\"><pre>curl -fsSL https://raw.githubusercontent.com/pranshuparmar/witr/main/install.sh -o install.sh cat install.sh chmod +x install.sh ./install.sh</pre></div> <p dir=\"auto\">The script will:</p> <ul dir=\"auto\"> <li>Detect your CPU architecture (<code>amd64</code> or <code>arm64</code>)</li> <li>Download the latest released binary and man page</li> <li>Install it to <code>/usr/local/bin/witr</code></li> <li>Install the man page to <code>/usr/local/share/man/man1/witr.1</code></li> </ul> <p dir=\"auto\">You may be prompted for your password to write to system directories.</p> <h3 tabindex=\"-1\" dir=\"auto\">8.2 Manual Installation</h3> <p dir=\"auto\">If you prefer manual installation, follow these simple steps for your architecture:</p> <h4 tabindex=\"-1\" dir=\"auto\">For amd64 (most PCs/servers):</h4> <div dir=\"auto\" data-snippet-clipboard-copy-content=\"# Download the binary curl -fsSL https://github.com/pranshuparmar/witr/releases/latest/download/witr-linux-amd64 -o witr-linux-amd64 # Verify checksum (Optional, should print OK) curl -fsSL https://github.com/pranshuparmar/witr/releases/latest/download/SHA256SUMS -o SHA256SUMS grep witr-linux-amd64 SHA256SUMS | sha256sum -c - # Rename and install mv witr-linux-amd64 witr &amp;&amp; chmod +x witr sudo mv witr /usr/local/bin/witr # Install the man page (Optional) sudo curl -fsSL https://github.com/pranshuparmar/witr/releases/latest/download/witr.1 -o /usr/local/share/man/man1/witr.1 sudo mandb >/dev/null 2>&amp;1 || true\"><pre><span><span>#</span> Download the binary</span> curl -fsSL https://github.com/pranshuparmar/witr/releases/latest/download/witr-linux-amd64 -o witr-linux-amd64 <span><span>#</span> Verify checksum (Optional, should print OK)</span> curl -fsSL https://github.com/pranshuparmar/witr/releases/latest/download/SHA256SUMS -o SHA256SUMS grep witr-linux-amd64 SHA256SUMS <span>|</span> sha256sum -c - <span><span>#</span> Rename and install</span> mv witr-linux-amd64 witr <span>&amp;&amp;</span> chmod +x witr sudo mv witr /usr/local/bin/witr <span><span>#</span> Install the man page (Optional)</span> sudo curl -fsSL https://github.com/pranshuparmar/witr/releases/latest/download/witr.1 -o /usr/local/share/man/man1/witr.1 sudo mandb <span>&gt;</span>/dev/null <span>2&gt;&amp;1</span> <span>||</span> <span>true</span></pre></div> <h4 tabindex=\"-1\" dir=\"auto\">For arm64 (Raspberry Pi, ARM servers):</h4> <div dir=\"auto\" data-snippet-clipboard-copy-content=\"# Download the binary curl -fsSL https://github.com/pranshuparmar/witr/releases/latest/download/witr-linux-arm64 -o witr-linux-arm64 # Verify checksum (Optional, should print OK) curl -fsSL https://github.com/pranshuparmar/witr/releases/latest/download/SHA256SUMS -o SHA256SUMS grep witr-linux-arm64 SHA256SUMS | sha256sum -c - # Rename and install mv witr-linux-arm64 witr &amp;&amp; chmod +x witr sudo mv witr /usr/local/bin/witr # Install the man page (Optional) sudo curl -fsSL https://github.com/pranshuparmar/witr/releases/latest/download/witr.1 -o /usr/local/share/man/man1/witr.1 sudo mandb >/dev/null 2>&amp;1 || true\"><pre><span><span>#</span> Download the binary</span> curl -fsSL https://github.com/pranshuparmar/witr/releases/latest/download/witr-linux-arm64 -o witr-linux-arm64 <span><span>#</span> Verify checksum (Optional, should print OK)</span> curl -fsSL https://github.com/pranshuparmar/witr/releases/latest/download/SHA256SUMS -o SHA256SUMS grep witr-linux-arm64 SHA256SUMS <span>|</span> sha256sum -c - <span><span>#</span> Rename and install</span> mv witr-linux-arm64 witr <span>&amp;&amp;</span> chmod +x witr sudo mv witr /usr/local/bin/witr <span><span>#</span> Install the man page (Optional)</span> sudo curl -fsSL https://github.com/pranshuparmar/witr/releases/latest/download/witr.1 -o /usr/local/share/man/man1/witr.1 sudo mandb <span>&gt;</span>/dev/null <span>2&gt;&amp;1</span> <span>||</span> <span>true</span></pre></div> <p dir=\"auto\"><strong>Explanation:</strong></p> <ul dir=\"auto\"> <li>Download only the binary for your architecture and the SHA256SUMS file.</li> <li>Verify the checksum for your binary only (prints OK if valid).</li> <li>Rename to witr, make it executable, and move to your PATH.</li> <li>Install man page.</li> </ul> <h3 tabindex=\"-1\" dir=\"auto\">8.3 Verify installation:</h3> <h3 tabindex=\"-1\" dir=\"auto\">8.4 Uninstallation</h3> <p dir=\"auto\">To completely remove <strong>witr</strong>:</p> <div dir=\"auto\" data-snippet-clipboard-copy-content=\"sudo rm -f /usr/local/bin/witr sudo rm -f /usr/local/share/man/man1/witr.1\"><pre>sudo rm -f /usr/local/bin/witr sudo rm -f /usr/local/share/man/man1/witr.1</pre></div> <hr> <h2 tabindex=\"-1\" dir=\"auto\">9. Platform Support</h2> <ul dir=\"auto\"> <li>Linux</li> </ul> <hr> <h3 tabindex=\"-1\" dir=\"auto\">9.1 Permissions Note</h3> <p dir=\"auto\">witr inspects <code>/proc</code> and may require elevated permissions to explain certain processes.</p> <p dir=\"auto\">If you are not seeing the expected information (e.g., missing process ancestry, user, working directory or environment details), try running witr with sudo for elevated permissions:</p> <div dir=\"auto\" data-snippet-clipboard-copy-content=\"sudo witr [your arguments]\"><pre>sudo witr [your arguments]</pre></div> <hr> <h2 tabindex=\"-1\" dir=\"auto\">10. Success Criteria</h2> <p dir=\"auto\">witr is successful if:</p> <ul dir=\"auto\"> <li>An engineer can answer \"why is this running?\" within seconds</li> <li>It reduces reliance on multiple tools</li> <li>Output is understandable under stress</li> <li>Users trust it during incidents</li> </ul> <hr> <h2 tabindex=\"-1\" dir=\"auto\">11. AI Assistance Disclaimer</h2> <p dir=\"auto\">This project was developed with assistance from AI/LLMs (including GitHub Copilot, ChatGPT, and related tools), supervised by a human who occasionally knew what he was doing.</p> <hr>"},{"id":"https://nesbitt.io/2025/12/24/package-managers-keep-using-git-as-a-database.html","title":"Package managers keep using Git as a database, it never works out","link":"https://nesbitt.io/2025/12/24/package-managers-keep-using-git-as-a-database.html","hnCommentsUrl":"https://news.ycombinator.com/item?id=46391514","content":"<a href=\"https://news.ycombinator.com/item?id=46391514\">Comments</a>","date":1766753196000,"feedTitle":"Hacker News","isHackerNews":true,"isGoogleNews":false,"fullContent":"<div itemprop=\"articleBody\"> <p>Using git as a database is a seductive idea. You get version history for free. Pull requests give you a review workflow. It‚Äôs distributed by design. GitHub will host it for free. Everyone already knows how to use it.</p> <p>Package managers keep falling for this. And it keeps not working out.</p> <h2 id=\"cargo\">Cargo</h2> <p>The crates.io index started as a git repository. Every Cargo client cloned it. This worked fine when the registry was small, but the index kept growing. Users would see progress bars like ‚ÄúResolving deltas: 74.01%, (64415/95919)‚Äù hanging for ages, the visible symptom of Cargo‚Äôs libgit2 library grinding through <a href=\"https://github.com/rust-lang/cargo/issues/9069\">delta resolution</a> on a repository with thousands of historic commits.</p> <p>The problem was worst in CI. Stateless environments would download the full index, use a tiny fraction of it, and throw it away. Every build, every time.</p> <p><a href=\"https://rust-lang.github.io/rfcs/2789-sparse-index.html\">RFC 2789</a> introduced a sparse HTTP protocol. Instead of cloning the whole index, Cargo now fetches files directly over HTTPS, downloading only the metadata for dependencies your project actually uses. (This is the ‚Äú<a href=\"https://nesbitt.io/2025/12/05/package-manager-tradeoffs.html\">full index replication vs on-demand queries</a>‚Äù tradeoff in action.) By April 2025, 99% of crates.io requests came from Cargo versions where sparse is the default. The git index still exists, still growing by thousands of commits per day, but most users never touch it.</p> <h2 id=\"homebrew\">Homebrew</h2> <p><a href=\"https://github.com/Homebrew/brew/pull/9383\">GitHub explicitly asked Homebrew to stop using shallow clones.</a> Updating them was <a href=\"https://brew.sh/2023/02/16/homebrew-4.0.0/\">‚Äúan extremely expensive operation‚Äù</a> due to the tree layout and traffic of homebrew-core and homebrew-cask.</p> <p>Users were downloading 331MB just to unshallow homebrew-core. The .git folder approached 1GB on some machines. Every <code>brew update</code> meant waiting for git to grind through delta resolution.</p> <p>Homebrew 4.0.0 in February 2023 switched to JSON downloads for tap updates. The reasoning was blunt: ‚Äúthey are expensive to git fetch and git clone and GitHub would rather we didn‚Äôt do that‚Ä¶ they are slow to git fetch and git clone and this provides a bad experience to end users.‚Äù</p> <p>Auto-updates now run every 24 hours instead of every 5 minutes, and they‚Äôre much faster because there‚Äôs no git fetch involved.</p> <h2 id=\"cocoapods\">CocoaPods</h2> <p>CocoaPods is the package manager for iOS and macOS development. It hit the limits hard. The Specs repo grew to hundreds of thousands of podspecs across a deeply nested directory structure. Cloning took minutes. Updating took minutes. CI time vanished into git operations.</p> <p>GitHub imposed CPU rate limits. The culprit was shallow clones, which force GitHub‚Äôs servers to compute which objects the client already has. The team tried various band-aids: stopping auto-fetch on <code>pod install</code>, converting shallow clones to full clones, <a href=\"https://blog.cocoapods.org/Sharding/\">sharding the repository</a>.</p> <p>The CocoaPods blog captured it well: <a href=\"https://blog.cocoapods.org/Master-Spec-Repo-Rate-Limiting-Post-Mortem/\">‚ÄúGit was invented at a time when ‚Äòslow network‚Äô and ‚Äòno backups‚Äô were legitimate design concerns. Running endless builds as part of continuous integration wasn‚Äôt commonplace.‚Äù</a></p> <p>CocoaPods 1.8 <a href=\"https://blog.cocoapods.org/CocoaPods-1.8.0-beta/\">gave up on git entirely</a> for most users. A CDN became the default, serving podspec files directly over HTTP. The migration saved users about a gigabyte of disk space and made <code>pod install</code> nearly instant for new setups.</p> <h2 id=\"nixpkgs\">Nixpkgs</h2> <p>Nix already solved the client-side problem. The package manager fetches expressions as <a href=\"https://releases.nixos.org/nix/nix-2.13.6/manual/package-management/channels.html\">tarballs via channels</a>, served from S3 and CDN, not git clones. Binary caches serve built packages over HTTP. End users never touch the git repository.</p> <p>But the repository itself is stress-testing GitHub‚Äôs infrastructure. In November 2025, GitHub contacted the NixOS team about <a href=\"https://discourse.nixos.org/t/nixpkgs-core-team-update-2025-11-30-github-scaling-issues/72709\">periodic maintenance jobs failing</a> and causing ‚Äúissues achieving consensus between replicas.‚Äù If unresolved, the repository could have become read-only.</p> <p>The repository totals 83GB with half a million tree objects and 20,000 forks. A local clone is only 2.5GB. The rest is GitHub‚Äôs fork network storing every pull request branch and merge commit. The CI queries mergeability daily, creating new merge commits each time.</p> <h2 id=\"vcpkg\">vcpkg</h2> <p>vcpkg is Microsoft‚Äôs C++ package manager. It uses git tree hashes to version its ports, with the curated registry at <a href=\"https://github.com/Microsoft/vcpkg\">github.com/Microsoft/vcpkg</a> containing over 2,000 libraries.</p> <p>The problem is that vcpkg needs to retrieve specific versions of ports by their git tree hash. When you specify a <code>builtin-baseline</code> in your vcpkg.json (functioning like a lockfile for reproducible builds), vcpkg looks up historical commits to find the exact port versions you need. This only works if you have the full commit history.</p> <p>Shallow clones break everything. GitHub Actions uses shallow clones by default. DevContainers <a href=\"https://github.com/devcontainers/images/issues/398\">shallow-clone vcpkg</a> to save space. CI systems optimize for fast checkouts. All of these result in the same error: ‚Äúvcpkg was cloned as a shallow repository‚Ä¶ Try again with a full vcpkg clone.‚Äù</p> <p>The workarounds are ugly. One <a href=\"https://github.com/devcontainers/images/issues/398\">proposed solution</a> involves parsing vcpkg.json to extract the baseline hash, deriving the commit date, then fetching with <code>--shallow-since=&lt;date&gt;</code>. Another suggests including twelve months of history, hoping projects upgrade before their baseline falls off the cliff. For GitHub Actions, you need <code>fetch-depth: 0</code> in your checkout step, <a href=\"https://github.com/microsoft/vcpkg/issues/25349\">downloading the entire repository history</a> just to resolve dependencies.</p> <p>A vcpkg team member <a href=\"https://github.com/microsoft/vcpkg/issues/25349\">explained the fundamental constraint</a>: ‚ÄúPort versions don‚Äôt use commit hashes, we use the git tree hash of the port directory. As far as I know, there is no way to deduce the commit that added a specific tree hash.‚Äù An in-product fix is infeasible. The architecture baked in git deeply enough that there‚Äôs no escape hatch.</p> <p>Unlike Cargo, Homebrew, and CocoaPods, vcpkg hasn‚Äôt announced plans to move away from git registries. Custom registries must still be git repositories. The documentation describes filesystem registries as an alternative, but these require local or mounted paths rather than HTTP access. There‚Äôs no CDN, no sparse protocol, no HTTP-based solution on the horizon.</p> <h2 id=\"go-modules\">Go modules</h2> <p><a href=\"https://engineering.grab.com/go-module-proxy\">Grab‚Äôs engineering team</a> went from 18 minutes for <code>go get</code> to 12 seconds after deploying a module proxy. That‚Äôs not a typo. Eighteen minutes down to twelve seconds.</p> <p>The problem was that <code>go get</code> needed to fetch each dependency‚Äôs source code just to read its go.mod file and resolve transitive dependencies. Cloning entire repositories to get a single file.</p> <p>Go had security concerns too. The original design wanted to remove version control tools entirely because <a href=\"https://arslan.io/2019/08/02/why-you-should-use-a-go-module-proxy/\">‚Äúthese fragment the ecosystem: packages developed using Bazaar or Fossil, for example, are effectively unavailable to users who cannot or choose not to install these tools.‚Äù</a> Beyond fragmentation, the Go team worried about security bugs in version control systems becoming security bugs in <code>go get</code>. You‚Äôre not just importing code; you‚Äôre importing the attack surface of every VCS tool on the developer‚Äôs machine.</p> <p>GOPROXY became the default in Go 1.13. The proxy serves source archives and go.mod files independently over HTTP. Go also introduced a <a href=\"https://nesbitt.io/2025/12/21/federated-package-management.html#gos-experiment-with-dns\">checksum database (sumdb)</a> that records cryptographic hashes of module contents. This protects against force pushes silently changing tagged releases, and ensures modules remain available even if the original repository is deleted.</p> <h2 id=\"beyond-package-managers\">Beyond package managers</h2> <p>The same pattern shows up wherever developers try to use git as a database.</p> <p>Git-based wikis like Gollum (used by GitHub and GitLab) become <a href=\"https://github.com/gollum/gollum/issues/1940\">‚Äúsomewhat too slow to be usable‚Äù</a> at scale. Browsing directory structure takes seconds per click. Loading pages takes longer. <a href=\"https://docs.gitlab.com/ee/development/wikis.html\">GitLab plans to move away from Gollum entirely.</a></p> <p>Git-based CMS platforms like Decap hit GitHub‚Äôs API rate limits. A Decap project on GitHub <a href=\"https://decapcms.org/blog/git-based-cms-definition-features-best-practices/\">scales to about 10,000 entries</a> if you have a lot of collection relations. A new user with an empty cache makes a request per entry to populate it, burning through the 5,000 request limit quickly. If your site has lots of content or updates frequently, use a database instead.</p> <p>Even GitOps tools that embrace git as a source of truth have to work around its limitations. ArgoCD‚Äôs repo server <a href=\"https://argo-cd.readthedocs.io/en/stable/operator-manual/high_availability/\">can run out of disk space</a> cloning repositories. A single commit invalidates the cache for all applications in that repo. Large monorepos need special scaling considerations.</p> <h2 id=\"the-pattern\">The pattern</h2> <p>The hosting problems are symptoms. The underlying issue is that git inherits filesystem limitations, and filesystems make terrible databases.</p> <p><strong>Directory limits.</strong> Directories with too many files become slow. CocoaPods had <a href=\"https://blog.cocoapods.org/Sharding/\">16,000 pod directories</a> in a single Specs folder, requiring huge tree objects and expensive computation. Their fix was hash-based sharding: split directories by the first few characters of a hashed name, so no single directory has too many entries. Git itself does this internally with its objects folder, splitting into 256 subdirectories. You‚Äôre reinventing B-trees, badly.</p> <p><strong>Case sensitivity.</strong> Git is case-sensitive, but macOS and Windows filesystems typically aren‚Äôt. <a href=\"https://learn.microsoft.com/en-us/azure/devops/repos/git/os-compatibility\">Check out a repo containing both <code>File.txt</code> and <code>file.txt</code> on Windows</a>, and the second overwrites the first. <a href=\"https://learn.microsoft.com/en-us/azure/devops/repos/git/case-sensitivity\">Azure DevOps</a> had to add server-side enforcement to block pushes with case-conflicting paths.</p> <p><strong>Path length limits.</strong> Windows restricts paths to <a href=\"https://learn.microsoft.com/en-us/windows/win32/fileio/maximum-file-path-limitation\">260 characters</a>, a constraint dating back to DOS. Git supports longer paths, but Git for Windows inherits the OS limitation. This is painful with deeply nested node_modules directories, where <code>git status</code> fails with ‚ÄúFilename too long‚Äù errors.</p> <p><strong>Missing database features.</strong> Databases have CHECK constraints and UNIQUE constraints; git has nothing, so every package manager builds its own validation layer. Databases have locking; git doesn‚Äôt. Databases have indexes for queries like ‚Äúall packages depending on X‚Äù; with git you either traverse every file or build your own index. Databases have migrations for schema changes; git has ‚Äúrewrite history and force everyone to re-clone.‚Äù</p> <p>The progression is predictable. Start with a flat directory of files. Hit filesystem limits. Implement sharding. Hit cross-platform issues. Build server-side enforcement. Build custom indexes. Eventually give up and use HTTP or an actual database. You‚Äôve built a worse version of what databases already provide, spread across git hooks, CI pipelines, and bespoke tooling.</p> <p>None of this means git is bad. Git excels at what it was designed for: distributed collaboration on source code, with branching, merging, and offline work. The problem is using it for something else entirely. Package registries need fast point queries for metadata. Git gives you a full-document sync protocol when you need a key-value lookup.</p> <p>If you‚Äôre building a package manager and git-as-index seems appealing, look at Cargo, Homebrew, CocoaPods, vcpkg, Go. They all had to build workarounds as they grew, causing pain for users and maintainers. The pull request workflow is nice. The version history is nice. You will hit the same walls they did.</p> </div>"},{"id":"https://blog.can.ac/2025/12/20/reverse-engineering-hyperliquid/","title":"Reverse Engineering Hyperliquid","link":"https://blog.can.ac/2025/12/20/reverse-engineering-hyperliquid/","hnCommentsUrl":"https://news.ycombinator.com/item?id=46351905","content":"<a href=\"https://news.ycombinator.com/item?id=46351905\">Comments</a>","date":1766385624000,"feedTitle":"Hacker News","isHackerNews":true,"isGoogleNews":false,"fullContent":"<div id=\"readability-page-1\" class=\"page\"><div><p><em>What happens when you take IDA Pro to a $30B ‚Äúdecentralized‚Äù exchange?</em></p><p>Hyperliquid markets itself as a ‚Äúfully on-chain order book perpetual exchange.‚Äù $1 trillion in trading volume. $30 billion valuation. Crypto Twitter calls it the future of DeFi.</p><p>I decided to see what the hype was and googled ‚Äúhyperliquid github‚Äù. To my surprise, there was no source code. The repository tells you to download this <code>hl-visor</code> blob, run it, and let it download more blobs to execute for you.</p><blockquote><p>Say what now?</p></blockquote><p>How did we go from ‚Äúcode is law‚Äù and people measuring each other‚Äôs Nakamoto coefficients to whatever the hell this is? The idea of a closed-source blockchain was <em>very</em> intriguing (because why would you do that if you are not hiding anything?) so as you can imagine I decided to take a look.</p><p>Hyperliquid is a centralized exchange (if not worse than that due to the lack of financial audits &amp; regulation) masquerading as a blockchain:</p><ol><li><strong>A ‚ÄúCoreWriter‚Äù godmode</strong> that can mint tokens, move user funds without signatures, crash random validators and basically do whatever it wants</li><li><strong>Transaction types that do exactly what they say</strong>: <code>TestnetSetYesterdayUserVlm</code>, retroactive volume manipulation shipped in the mainnet binary</li><li><strong>A ‚Äúscheduled freeze‚Äù mechanism with no unfreeze capability</strong></li><li><strong>Only 8 broadcaster addresses can submit transactions</strong>: everyone else routes through them. They live in on-chain state, are governance-modifiable, and are undocumented.</li><li><strong>Oracle price override capabilities</strong> with no timelocks, bounds, or multi-sig requirements</li><li><strong>Bridge withdrawals can be censored forever</strong>: no timeout, no escape hatch</li><li><strong>Governance proposals are stored but effectively unqueryable</strong>: users see votes happened, not what was proposed</li><li><del><strong>$362M accounting gap</strong>: user claims exceed bridge balance</del> <em>(explained: Circle‚Äôs native USDC on HyperEVM)</em></li><li><strong>Undocumented lending protocol</strong>: a fully deployed borrow/lend system (BOLE) live on mainnet</li></ol><p>Every claim includes addresses into the binary and L1 state that you can verify yourself.</p><p><em>Shall we?</em></p><hr><h2 id=\"0x1-the-testnet-function\">0x1: The ‚ÄúTestnet‚Äù Function</h2><blockquote><p>The genesis airdrop allocated 31% of supply (~310M tokens) to ~94k users based on testnet activity. The binary contains <code>TestnetSetYesterdayUserVlm</code>: retroactive volume manipulation. This function‚Äôs existance at any point in time destroys integrity / community-ownership claims.</p></blockquote><p>The most damning evidence sits in the binary‚Äôs string table, indexed like a feature list. Hyperliquid‚Äôs developers built infrastructure to fabricate trading volume retroactively, named it after the capability, and still ship it in the current mainnet binary.</p><h3 id=\"testnetsetyesterdayuservlm\">TestnetSetYesterdayUserVlm</h3><p>The deserializer <code>0x1F40200</code> contains a little branch that handles the following Rust structure:</p><div><pre tabindex=\"0\"><code data-lang=\"rust\"><span><span> 1</span><span><span>enum</span> <span>VoteGlobalAction</span><span>{</span></span></span><span><span> 2</span><span><span>// ... </span></span></span><span><span> 3</span><span><span>// 0x57: </span></span></span><span><span> 4</span><span><span>TestnetSetYesterdayUserVlm</span><span>{</span></span></span><span><span> 5</span><span><span>user</span>: <span>[</span><span>u8</span><span>;</span><span>20</span><span>],</span><span>// Target wallet </span></span></span><span><span> 6</span><span><span>wei</span>: <span>u64</span><span>,</span><span>// Perpetual volume </span></span></span><span><span> 7</span><span><span>cross</span>: <span>u64</span><span>,</span><span>// Cross margin volume </span></span></span><span><span> 8</span><span><span>spot_add</span>: <span>u64</span><span>,</span><span>// Spot addition volume </span></span></span><span><span> 9</span><span><span>spot_cross</span>: <span>u64</span><span>,</span><span>// Spot cross volume </span></span></span><span><span>10</span><span><span>}</span></span></span><span><span>11</span><span><span>}</span></span></span></code></pre></div><p>Read that struct again: <code>TestnetSetYesterdayUserVlm</code>. Not ‚Äútesting infrastructure‚Äù or ‚Äúdebugging tools.‚Äù The literal function is to <strong>set yesterday‚Äôs user volume</strong>.</p><h4 id=\"volume-storage-structure\">Volume Storage Structure</h4><p>Volume data is stored in BTreeMap structures optimized for daily aggregation:</p><div><pre tabindex=\"0\"><code data-lang=\"rust\"><span><span> 1</span><span><span>// DailyScaledVlms structure (referenced at 0x2aa3f60, 0x2eefa90) </span></span></span><span><span> 2</span><span><span>struct</span> <span>DailyScaledVlms</span><span>{</span></span></span><span><span> 3</span><span><span>day_to_user_vlm</span>: <span>BTreeMap</span><span>&lt;</span><span>u32</span><span>,</span><span>BTreeMap</span><span>&lt;</span><span>Address</span><span>,</span><span>UserVolume</span><span>&gt;&gt;</span><span>,</span></span></span><span><span> 4</span><span><span>// Indexed by (day, user address) for efficient range queries </span></span></span><span><span> 5</span><span><span>}</span></span></span><span><span> 6</span></span><span><span> 7</span><span><span>struct</span> <span>UserVolume</span><span>{</span></span></span><span><span> 8</span><span><span>wei_scaled</span>: <span>u64</span><span>,</span><span>// Perpetual volume in wei units </span></span></span><span><span> 9</span><span><span>cross_scaled</span>: <span>u64</span><span>,</span><span>// Cross margin volume </span></span></span><span><span>10</span><span><span>spot_add_scaled</span>: <span>u64</span><span>,</span><span>// Spot addition volume </span></span></span><span><span>11</span><span><span>spot_cross_scaled</span>: <span>u64</span><span>,</span><span>// Spot cross volume </span></span></span><span><span>12</span><span><span>}</span></span></span></code></pre></div><p>These structures persist to RocksDB under column families in <code>hyperliquid_data/</code>. Volume queries aggregate across day ranges to compute cumulative metrics for fee tiers and any volume-gated programs.</p><p>Here‚Äôs the exact code, which first checks the network type:</p><div><pre tabindex=\"0\"><code data-lang=\"asm\"><span><span>1</span><span><span>; Handler for case 0x57 (TestnetSetYesterdayUserVlm) </span></span></span><span><span>2</span><span><span>0</span><span>x1f3638d:</span> <span>cmp</span> <span>byte</span> <span>ptr</span> <span>[</span><span>r13</span><span>+</span><span>3505</span><span>h</span><span>],</span> <span>3</span> <span>; r13 = state pointer </span></span></span><span><span>3</span><span> <span>; offset 0x3505 = network_type field </span></span></span><span><span>4</span><span> <span>; value 3 = mainnet discriminant </span></span></span><span><span>5</span><span><span>0</span><span>x1f36395:</span> <span>jz</span> <span>loc_1F39041</span> <span>; Jump to error if mainnet </span></span></span><span><span>6</span><span><span>...</span></span></span></code></pre></div><p>After passing the check, the handler executes two state mutations:</p><div><pre tabindex=\"0\"><code data-lang=\"asm\"><span><span> 1</span><span><span>; From continuation at 0x1f3bb28 after mainnet check passes </span></span></span><span><span> 2</span><span><span>0</span><span>x1f3bb28:</span> <span>call</span> <span>cs</span><span>:</span><span>off_48499B0</span> <span>; update_daily_scaled_vlm_for_user </span></span></span><span><span> 3</span><span> <span>; Resolved to 0x2aa3f60 </span></span></span><span><span> 4</span><span> <span>; Args: (state, day, user, wei_scaled, cross_scaled) </span></span></span><span><span> 5</span></span><span><span> 6</span><span><span>0</span><span>x1f3bb2e:</span> <span>lea</span> <span>rdx</span><span>,</span> <span>[</span><span>rsp</span><span>+</span><span>918</span><span>h</span><span>+</span><span>var_3A8</span><span>]</span> </span></span><span><span> 7</span><span><span>0</span><span>x1f3bb36:</span> <span>mov</span> <span>rdi</span><span>,</span> <span>r12</span> <span>; state pointer </span></span></span><span><span> 8</span><span><span>0</span><span>x1f3bb39:</span> <span>mov</span> <span>esi</span><span>,</span> <span>ebx</span> <span>; day value </span></span></span><span><span> 9</span><span><span>0</span><span>x1f3bb3b:</span> <span>mov</span> <span>rcx</span><span>,</span> <span>r14</span> <span>; user address </span></span></span><span><span>10</span><span><span>0</span><span>x1f3bb3e:</span> <span>mov</span> <span>r8</span><span>,</span> <span>r13</span> <span>; spot volumes </span></span></span><span><span>11</span></span><span><span>12</span><span><span>0</span><span>x1f3bb41:</span> <span>call</span> <span>cs</span><span>:</span><span>off_48499B8</span> <span>; update_user_volume_state </span></span></span><span><span>13</span><span> <span>; Resolved to 0x2eefa90 </span></span></span><span><span>14</span><span> <span>;</span> <span>Args:</span> <span>(</span><span>state</span><span>,</span> <span>day</span><span>,</span> <span>user</span><span>,</span> <span>spot_add_scaled</span><span>,</span> <span>spot_cross_scaled</span><span>)</span></span></span></code></pre></div><p>These functions perform <strong>direct BTreeMap state writes</strong> without intermediate validation:</p><ol><li><strong>0x2aa3f60</strong>: Inserts/updates <code>(day, user) -&gt; (wei_scaled, cross_scaled)</code></li></ol><div><pre tabindex=\"0\"><code data-lang=\"c\"><span><span> 1</span><span><span>unsigned</span> <span>__int8</span> <span>__fastcall</span> <span>update_daily_scaled_vlm_for_user</span><span>(</span><span>_QWORD</span> <span>*</span><span>a1</span><span>,</span> <span>int</span> <span>a2</span><span>,</span> <span>_DWORD</span> <span>*</span><span>a3</span><span>,</span> <span>__int64</span> <span>a4</span><span>,</span> <span>__int64</span> <span>a5</span><span>)</span> </span></span><span><span> 2</span><span><span>{</span> </span></span><span><span> 3</span><span> <span>// a1 = state pointer </span></span></span><span><span> 4</span><span> <span>// a2 = day (u32) </span></span></span><span><span> 5</span><span> <span>// a3 = user address (20 bytes) </span></span></span><span><span> 6</span><span> <span>// a4, a5 = wei_scaled and cross_scaled volumes (u64 each) </span></span></span><span><span> 7</span></span><span><span> 8</span><span> <span>v12</span> <span>=</span> <span>(</span><span>_QWORD</span> <span>*</span><span>)</span><span>sub_2C32C70</span><span>(</span><span>a1</span> <span>+</span> <span>34</span><span>,</span> <span>&amp;</span><span>v36</span><span>);</span> <span>// BTreeMap lookup at state+272 </span></span></span><span><span> 9</span></span><span><span>10</span><span> <span>// Binary search through BTreeMap by day </span></span></span><span><span>11</span><span> <span>while</span> <span>(</span> <span>v14</span> <span>)</span> <span>{</span> </span></span><span><span>12</span><span> <span>v11</span> <span>=</span> <span>4</span> <span>*</span> <span>(</span><span>unsigned</span> <span>int</span><span>)</span><span>*</span><span>(</span><span>unsigned</span> <span>__int16</span> <span>*</span><span>)(</span><span>v14</span> <span>+</span> <span>230</span><span>);</span> </span></span><span><span>13</span><span> <span>// Compare day values in sorted map </span></span></span><span><span>14</span><span> <span>v15</span> <span>=</span> <span>(</span><span>a2</span> <span>&gt;</span> <span>*</span><span>(</span><span>_DWORD</span> <span>*</span><span>)(</span><span>v14</span> <span>+</span> <span>4</span> <span>*</span> <span>v9</span> <span>+</span> <span>188</span><span>))</span> <span>-</span> <span>(</span><span>a2</span> <span>&lt;</span> <span>*</span><span>(</span><span>_DWORD</span> <span>*</span><span>)(</span><span>v14</span> <span>+</span> <span>4</span> <span>*</span> <span>v9</span> <span>+</span> <span>188</span><span>));</span> </span></span><span><span>15</span><span> <span>// ... </span></span></span><span><span>16</span><span> <span>}</span> </span></span><span><span>17</span></span><span><span>18</span><span> <span>// Insert/update entry </span></span></span><span><span>19</span><span> <span>v19</span> <span>=</span> <span>(</span><span>_QWORD</span> <span>*</span><span>)</span><span>insert_or_update_btreemap_entry</span><span>(</span><span>&amp;</span><span>v36</span><span>,</span> <span>v9</span><span>,</span> <span>v10</span><span>,</span> <span>v14</span><span>,</span> <span>v11</span><span>);</span> </span></span><span><span>20</span><span> <span>*</span><span>v19</span> <span>=</span> <span>a4</span><span>;</span> <span>// Write wei_scaled volume </span></span></span><span><span>21</span><span> <span>v19</span><span>[</span><span>1</span><span>]</span> <span>=</span> <span>a5</span><span>;</span> <span>// Write cross_scaled volume </span></span></span><span><span>22</span></span><span><span>23</span><span> <span>return</span> <span>result</span><span>;</span> </span></span><span><span>24</span><span><span>}</span></span></span></code></pre></div><ol start=\"2\"><li><strong>0x2eefa90</strong>: Inserts/updates <code>(day, user) -&gt; (spot_add_scaled, spot_cross_scaled)</code></li></ol><div><pre tabindex=\"0\"><code data-lang=\"c\"><span><span> 1</span><span><span>_QWORD</span> <span>*</span><span>__fastcall</span> <span>update_user_volume_state</span><span>(</span><span>__int64</span> <span>a1</span><span>,</span> <span>int</span> <span>a2</span><span>,</span> <span>__int64</span> <span>a3</span><span>,</span> <span>__int64</span> <span>a4</span><span>,</span> <span>__int64</span> <span>a5</span><span>)</span> </span></span><span><span> 2</span><span><span>{</span> </span></span><span><span> 3</span><span> <span>// a1 = state pointer </span></span></span><span><span> 4</span><span> <span>// a2 = day (u32) </span></span></span><span><span> 5</span><span> <span>// a3 = user address </span></span></span><span><span> 6</span><span> <span>// a4, a5 = spot_add_scaled and spot_cross_scaled volumes </span></span></span><span><span> 7</span></span><span><span> 8</span><span> <span>v9</span> <span>=</span> <span>sub_2C33590</span><span>(</span><span>a1</span> <span>+</span> <span>288</span><span>,</span> <span>a3</span><span>);</span> <span>// BTreeMap lookup at state+288 </span></span></span><span><span> 9</span><span> <span>v11</span> <span>=</span> <span>v9</span> <span>+</span> <span>40</span><span>;</span> </span></span><span><span>10</span><span> <span>v12</span> <span>=</span> <span>*</span><span>(</span><span>_QWORD</span> <span>*</span><span>)(</span><span>v9</span> <span>+</span> <span>40</span><span>);</span> </span></span><span><span>11</span></span><span><span>12</span><span> <span>// Binary search similar to above </span></span></span><span><span>13</span><span> <span>// ... </span></span></span><span><span>14</span></span><span><span>15</span><span> <span>result</span> <span>=</span> <span>(</span><span>_QWORD</span> <span>*</span><span>)</span><span>insert_or_update_btreemap_entry</span><span>(</span><span>&amp;</span><span>v17</span><span>,</span> <span>v8</span><span>,</span> <span>v12</span><span>,</span> <span>v11</span><span>,</span> <span>v10</span><span>);</span> </span></span><span><span>16</span><span> <span>*</span><span>result</span> <span>=</span> <span>a4</span><span>;</span> <span>// Write spot_add_scaled </span></span></span><span><span>17</span><span> <span>result</span><span>[</span><span>1</span><span>]</span> <span>=</span> <span>a5</span><span>;</span> <span>// Write spot_cross_scaled </span></span></span><span><span>18</span></span><span><span>19</span><span> <span>return</span> <span>result</span><span>;</span> </span></span><span><span>20</span><span><span>}</span></span></span></code></pre></div><p>Both functions follow identical patterns: lookup the user‚Äôs entry in a nested BTreeMap, binary search by day, then directly write the volume values. No validation, no bounds checking, no authorization beyond the mainnet network check at the handler level.</p><h3 id=\"modifynoncirculatingsupply\">ModifyNonCirculatingSupply</h3><p>Fake volume can generate disproportionate token allocation if rewards depend on volume. Those tokens can be hidden from circulating supply metrics via the <code>ModifyNonCirculatingSupply</code> governance action.</p><div><pre tabindex=\"0\"><code data-lang=\"rust\"><span><span>1</span><span><span>enum</span> <span>VoteGlobalAction</span><span>{</span></span></span><span><span>2</span><span><span>// ... </span></span></span><span><span>3</span><span><span>// 0x25: </span></span></span><span><span>4</span><span><span>ModifyNonCirculatingSupply</span><span>{</span></span></span><span><span>5</span><span><span>token</span>: <span>u32</span><span>,</span><span>// Token index </span></span></span><span><span>6</span><span><span>add</span>: <span>u64</span><span>,</span><span>// Amount to mark as non-circulating </span></span></span><span><span>7</span><span><span>remove</span>: <span>u64</span><span>,</span><span>// Amount to return to circulation </span></span></span><span><span>8</span><span><span>}</span></span></span><span><span>9</span><span><span>}</span></span></span></code></pre></div><p>If volume-based rewards generate token emissions, insiders could:</p><ol><li>Generate tokens via fabricated volume</li><li>Use ModifyNonCirculatingSupply to classify those tokens as ‚Äúnon-circulating‚Äù</li><li>Public APIs would report <code>circulatingSupply = totalSupply - nonCirculatingSupply</code></li><li>Apparent token supply appears lower, potentially supporting higher prices</li></ol><h3 id=\"the-complete-testnet-toolkit\">The Complete Testnet Toolkit</h3><p>Few other testnet actions are available:</p><ul><li><code>TestnetAddMainnetUsers</code> action (discriminant <code>0x58</code>) copies user state between environments. If testnet volumes are inflated via <code>TestnetSetYesterdayUserVlm</code>, and those volume fields are migrated, fabricated metrics persist as ‚Äúlegitimate‚Äù history.</li><li><code>TestnetDepositFor</code> creates USDC deposits for arbitrary addresses without requiring Ethereum bridge activity.</li><li><code>TestnetFixUsdc</code> adjusts balances directly.</li><li><code>TestnetSpotSendFor</code> transfers tokens on behalf of users without their signature.</li></ul><h3 id=\"a-hypothetical\">A Hypothetical</h3><p>Let‚Äôs entertain a hypothetical sequence of events:</p><ul><li><p><strong>Testnet phase</strong>: Create sybil wallets, fund via <code>TestnetDepositFor</code> (0x52), execute wash trades. Use <code>TestnetSetYesterdayUserVlm</code> (0x57) to retroactively inflate volume metrics without market risk.</p></li><li><p><strong>Migration</strong>: Use <code>TestnetAddMainnetUsers</code> (0x58) to copy inflated accounts to mainnet. The attacker-controlled wallets now show artificially high activity. When airdrops are distributed proportional to reported volume, these insiders claim a disproportionate share.</p></li><li><p><strong>Supply manipulation</strong>: Adjust non-circulating supply via <code>ModifyNonCirculatingSupply</code> (0x25) to hide token allocations, if volume rewards generate emissions.</p></li></ul><p>Proving this actually happened would require pre-migration testnet state or comprehensive forensic reconstruction: data not made public.</p><h3 id=\"why-this-matters\">Why This Matters</h3><p>The mainnet guard is not as innocent as it seems here. This code was meant for testnet, and testnet data is what drove allocation.</p><p>You couldn‚Äôt even join the ‚Äúpretend validator set‚Äù (we‚Äôll get to that) until a few months ago, so it‚Äôs not like we can investigate how or why they were used. The existence of <code>TestnetSetYesterdayUserVlm</code> in the binary however, is like finding a <code>steal_user_funds</code> function in a bank‚Äôs server code. The function‚Äôs presence is the problem. Its execution doesn‚Äôt need to be proven when the capability alone violates the trust model claimed in marketing materials.</p><p>Legitimate protocols don‚Äôt ship retroactive volume manipulation. They don‚Äôt maintain ‚Äúunrewarded user‚Äù exclusion lists. They don‚Äôt vote to manipulate supply calculations. They don‚Äôt name functions after retroactive fraud operations.</p><p>The ‚Äútestnet-to-mainnet‚Äù narrative was a story about fair distribution. The code tells a different story.</p><hr><h2 id=\"0x2-the-gatekeepers\">0x2: The Gatekeepers</h2><blockquote><p>8 undisclosed addresses control all transaction submission. If they censor you, there‚Äôs no alternative, no L1 to appeal to.</p></blockquote><p>Every blockchain needs transaction submission. Ethereum and Bitcoin have thousands of nodes accepting transactions. Hyperliquid has 8 broadcaster addresses in the on-chain allowlist (snapshot 2025-12-19). They are governance-modifiable, undocumented, and match no publicly known wallets.</p><p>The lifecycle of a transaction looks like this:</p><div><pre tabindex=\"0\"><code data-lang=\"fallback\"><span><span> 1</span><span>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê </span></span><span><span> 2</span><span>‚îÇ User signs order ‚îÇ &lt;‚îÄ‚îÄ‚îÄ You control this </span></span><span><span> 3</span><span>‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò </span></span><span><span> 4</span><span> ‚ñº </span></span><span><span> 5</span><span>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê </span></span><span><span> 6</span><span>‚îÇ API wraps in ‚îÇ </span></span><span><span> 7</span><span>‚îÇ SignedActionWrapper { ‚îÇ </span></span><span><span> 8</span><span>‚îÇ broadcaster: 0x??????... ‚îÇ &lt;‚îÄ‚îÄ‚îÄ One of 8 addresses </span></span><span><span> 9</span><span>‚îÇ broadcaster_nonce: 12345 ‚îÇ </span></span><span><span>10</span><span>‚îÇ } ‚îÇ </span></span><span><span>11</span><span>‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò </span></span><span><span>12</span><span> ‚ñº </span></span><span><span>13</span><span>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê </span></span><span><span>14</span><span>‚îÇ Validator checks: ‚îÇ </span></span><span><span>15</span><span>‚îÇ 1. broadcaster ‚àà whitelist? ‚îÇ &lt;‚îÄ‚îÄ‚îÄ TxUnexpectedBroadcaster </span></span><span><span>16</span><span>‚îÇ 2. nonce valid? ‚îÇ &lt;‚îÄ‚îÄ‚îÄ TxInvalidBroadcasterNonce </span></span><span><span>17</span><span>‚îÇ 3. signature valid? ‚îÇ </span></span><span><span>18</span><span>‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò </span></span><span><span>19</span><span> ‚ñº </span></span><span><span>20</span><span>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê </span></span><span><span>21</span><span>‚îÇ Execute on-chain ‚îÇ </span></span><span><span>22</span><span>‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</span></span></code></pre></div><p>All user transactions must be wrapped in a <code>SignedActionWrapper</code> with a <code>broadcaster</code> field. Submit directly to validators and your transaction is rejected with error <code>TxUnexpectedBroadcaster</code> (case 0x25 at <code>0x39EA1DA</code>):</p><div><pre tabindex=\"0\"><code data-lang=\"rust\"><span><span>1</span><span><span>struct</span> <span>SignedActionWrapper</span><span>{</span></span></span><span><span>2</span><span><span>signed_actions</span>: <span>Vec</span><span>&lt;</span><span>SignedAction</span><span>&gt;</span><span>,</span><span>// Your cryptographically signed actions </span></span></span><span><span>3</span><span><span>broadcaster_nonce</span>: <span>u64</span><span>,</span><span>// Replay protection (offset +0x18) </span></span></span><span><span>4</span><span><span>broadcaster</span>: <span>[</span><span>u8</span><span>;</span><span>20</span><span>],</span><span>// 20-byte address (offset +0x20) </span></span></span><span><span>5</span><span><span>}</span></span></span></code></pre></div><p>Three checks: broadcaster in whitelist, nonce valid, EIP-712 signature valid. Your cryptographically perfect transaction gets rejected at the protocol level if it doesn‚Äôt route through one of 8 mystery addresses; no public disclosure names the 8 wallets.</p><ul><li><code>0x1e9b90ab34427807dc25c7266beb188e86af7ed6</code></li><li><code>0x2d9d6ae54b069fd372401b71dc4843d85babe3ea</code></li><li><code>0x67e451964e0421f6e7d07be784f35c530667c2b3</code></li><li><code>0x76d335fbd515969ed5facf98611ca6e3ba87ff01</code></li><li><code>0x90eaf322d6e39adbdca7b632ec2436719a99fcd0</code></li><li><code>0x940e4f78cfb16e07e1e2ef0994e186bde7e6478c</code></li><li><code>0xf70a9d9a56fe5c75815a9eae6a8593bc59cb6a06</code></li><li><code>0xffbb4dfc9455f0df2e973d7a371d8ad994264aa6</code></li></ul><h3 id=\"the-liquidation-cartel\">The Liquidation Cartel</h3><p>Liquidations work the same way. The binary reveals <code>allowed_liquidators</code>, a <code>HashSet&lt;Address&gt;</code> in the Clearinghouse structure. Only whitelisted addresses can liquidate; attempting without membership hits <code>InvalidLiquidator</code>. Global across perpetuals, and all margin types.</p><p>Normal trades pay 2.5-5 basis points. Whitelist-only access eliminates competition and creates structural advantage for whitelisted liquidators. Two entities bypass the whitelist: <code>defaultLiquidator</code> and <code>BackstopLiquidator</code>. If a single entity controls both, it can delay at the whitelist tier and execute at worse prices via backstop.</p><h3 id=\"governance-control\">Governance Control</h3><p>Both whitelists are stored in runtime state and modifiable via governance actions. <code>VoteGlobalAction::ModifyBroadcaster</code> (discriminant <code>0x26</code>) takes a single 20-byte address as payload to modify the broadcaster whitelist. <code>VoteGlobalAction::UserCanLiquidate</code> (discriminant <code>0x1C</code>) does the same for liquidators.</p><p>Both execute via the <code>VoteGlobalAction</code> handler at <code>sub_1F36320</code>. Analysis shows these handlers execute <strong>without per-action authorization checks</strong> beyond the validator consensus vote. The threshold percentage is not visible in the binary; 2/3 is a common BFT default, but it‚Äôs not proven here; neither was a timelock observed, so modifications can execute at the next block after consensus.</p><p>If any single entity controls ‚â•67% of voting power, they can unilaterally modify both whitelists at any block. No transparency mechanism for whitelist state changes.</p><h3 id=\"the-trust-model\">The Trust Model</h3><p>Hyperliquid combines:</p><ul><li>Permissioned access (whitelist only)</li><li>Fee exemption (massive profit boost vs competitors)</li><li>Validator co-location (first look at liquidatable positions)</li><li>Governance control (can trigger liquidations via parameter changes)</li><li>Concentrated governance (single entity can change whitelists if it reaches threshold)</li></ul><p>The architecture creates a privileged MEV extraction position for insiders.</p><table><thead><tr><th>Protocol</th><th>Liquidator Access</th><th>Fee Structure</th></tr></thead><tbody><tr><td>Compound</td><td>Permissionless (anyone)</td><td>0% (liquidator keeps spread)</td></tr><tr><td>Aave</td><td>Permissionless (anyone)</td><td>0% (liquidator keeps spread)</td></tr><tr><td>dYdX v4</td><td>Permissionless (validators)</td><td>0% (validator profit)</td></tr><tr><td><strong>Hyperliquid</strong></td><td><strong>Whitelisted addresses</strong></td><td><strong>0% for fwiends üíì</strong></td></tr></tbody></table><h3 id=\"real-world-exercise\">Real-World Exercise</h3><p>On July 29, 2025, <a href=\"https://crypto.news/hyperliquid-api-outage-causes-freeze-on-trading-hype-down-5/\">Hyperliquid‚Äôs API servers collapsed</a>: 27-37 minute freeze. Users couldn‚Äôt open or close trades, exit positions, or withdraw. Liquidations still execute at the protocol layer, so positions remain exposed during outages.</p><p>Block production continued uninterrupted. The broadcaster monopoly meant users had no alternative access path. This repeated on <a href=\"https://www.ainvest.com/news/hyperliquid-faces-37-minute-outage-api-servers-collapse-heavy-trading-2507/\">July 23, 2025</a>: 37 minutes of downtime.</p><p>Optimism‚Äôs sequencer is centralized, but it‚Äôs an L2; force-include via Ethereum L1. Hyperliquid is an L1. If the 8 broadcasters censor you, there‚Äôs no higher authority.</p><hr><h2 id=\"0x3-the-trapdoor\">0x3: The Trapdoor</h2><blockquote><p>Users can deposit instantly but may never withdraw. The code to freeze your assets exists. The code to unfreeze them does not.</p></blockquote><h3 id=\"cancelling-withdrawals\">Cancelling Withdrawals</h3><p>Validators can cancel pending withdrawals via <code>invalidateWithdrawals</code> (case 7 at <code>sub_1F3634D</code>):</p><div><pre tabindex=\"0\"><code data-lang=\"c\"><span><span>1</span><span><span>case</span> <span>7u</span><span>:</span> <span>// invalidateWithdrawals </span></span></span><span><span>2</span><span> <span>// Validate withdrawal count ‚â§ 10000 </span></span></span><span><span>3</span><span> <span>// Iterate over each withdrawal ID </span></span></span><span><span>4</span><span> <span>// Lookup in bridge state at a3+11128 </span></span></span><span><span>5</span><span> <span>sub_1E3F170</span><span>(</span><span>v477</span><span>,</span> <span>dest</span><span>);</span> <span>// STATE WRITE at 0x1f3ada9 </span></span></span></code></pre></div><p><strong>Bridge state writer at <code>sub_1E3F170</code>:</strong></p><div><pre tabindex=\"0\"><code data-lang=\"c\"><span><span> 1</span><span><span>unsigned</span> <span>__int64</span> <span>__fastcall</span> <span>sub_1E3F170</span><span>(</span><span>__int64</span> <span>a1</span><span>,</span> <span>__int64</span> <span>*</span><span>a2</span><span>)</span> </span></span><span><span> 2</span><span><span>{</span> </span></span><span><span> 3</span><span> <span>v10</span> <span>=</span> <span>*</span><span>a2</span><span>;</span> <span>// withdrawal count </span></span></span><span><span> 4</span><span> <span>result</span> <span>=</span> <span>a2</span><span>[</span><span>1</span><span>];</span> <span>// withdrawal array pointer </span></span></span><span><span> 5</span><span> <span>v3</span> <span>=</span> <span>a2</span><span>[</span><span>2</span><span>];</span> <span>// array length </span></span></span><span><span> 6</span></span><span><span> 7</span><span> <span>if</span> <span>(</span> <span>v3</span> <span>)</span> </span></span><span><span> 8</span><span> <span>{</span> </span></span><span><span> 9</span><span> <span>v4</span> <span>=</span> <span>(</span><span>__int64</span> <span>*</span><span>)</span><span>a2</span><span>[</span><span>1</span><span>];</span> </span></span><span><span>10</span><span> <span>v5</span> <span>=</span> <span>result</span> <span>+</span> <span>16</span> <span>*</span> <span>v3</span><span>;</span> </span></span><span><span>11</span><span> <span>v12</span> <span>=</span> <span>*</span><span>(</span><span>_QWORD</span> <span>*</span><span>)(</span><span>a1</span> <span>+</span> <span>11136</span><span>);</span> <span>// Bridge state base pointer </span></span></span><span><span>12</span><span> <span>v6</span> <span>=</span> <span>*</span><span>(</span><span>_QWORD</span> <span>*</span><span>)(</span><span>a1</span> <span>+</span> <span>11144</span><span>);</span> <span>// Number of buckets </span></span></span><span><span>13</span><span> <span>do</span> </span></span><span><span>14</span><span> <span>{</span> </span></span><span><span>15</span><span> <span>v7</span> <span>=</span> <span>*</span><span>v4</span><span>;</span> <span>// Withdrawal ID (global index) </span></span></span><span><span>16</span><span> <span>v8</span> <span>=</span> <span>*</span><span>v4</span> <span>/</span> <span>0x2710uLL</span><span>;</span> <span>// Bucket index = ID / 10000 </span></span></span><span><span>17</span><span> <span>if</span> <span>(</span> <span>v8</span> <span>&gt;=</span> <span>v6</span> <span>)</span> </span></span><span><span>18</span><span> <span>{</span> </span></span><span><span>19</span><span> <span>LOWORD</span><span>(</span><span>v13</span><span>[</span><span>0</span><span>])</span> <span>=</span> <span>312</span><span>;</span> <span>// Error: bucket out of range </span></span></span><span><span>20</span><span> <span>core</span><span>::</span><span>result</span><span>::</span><span>unwrap_failed</span><span>();</span> </span></span><span><span>21</span><span> <span>}</span> </span></span><span><span>22</span><span> <span>v9</span> <span>=</span> <span>*</span><span>((</span><span>_DWORD</span> <span>*</span><span>)</span><span>v4</span> <span>+</span> <span>2</span><span>);</span> <span>// Withdrawal index within bucket </span></span></span><span><span>23</span><span> <span>a2</span> <span>=</span> <span>(</span><span>__int64</span> <span>*</span><span>)(</span><span>v12</span> <span>+</span> <span>800</span> <span>*</span> <span>v8</span><span>);</span> <span>// Calculate bucket address </span></span></span><span><span>24</span></span><span><span>25</span><span> <span>// Modify withdrawal state in BTreeMap </span></span></span><span><span>26</span><span> <span>result</span> <span>=</span> <span>sub_2ABF640</span><span>(</span><span>v14</span><span>,</span> <span>a2</span><span>,</span> <span>v7</span><span>,</span> <span>v9</span><span>);</span> </span></span><span><span>27</span></span><span><span>28</span><span> <span>v4</span> <span>+=</span> <span>2</span><span>;</span> <span>// Next withdrawal (16-byte stride) </span></span></span><span><span>29</span><span> <span>}</span> </span></span><span><span>30</span><span> <span>while</span> <span>(</span> <span>v4</span> <span>!=</span> <span>(</span><span>__int64</span> <span>*</span><span>)</span><span>v5</span> <span>);</span> </span></span><span><span>31</span><span> <span>}</span> </span></span><span><span>32</span><span> <span>return</span> <span>result</span><span>;</span> </span></span><span><span>33</span><span><span>}</span></span></span></code></pre></div><p><strong>BTreeMap mutation at <code>sub_2ABF640</code>:</strong></p><div><pre tabindex=\"0\"><code data-lang=\"c\"><span><span> 1</span><span><span>_WORD</span> <span>*</span><span>__fastcall</span> <span>sub_2ABF640</span><span>(</span><span>_WORD</span> <span>*</span><span>a1</span><span>,</span> <span>_QWORD</span> <span>*</span><span>a2</span><span>,</span> <span>unsigned</span> <span>__int64</span> <span>a3</span><span>,</span> <span>unsigned</span> <span>int</span> <span>a4</span><span>)</span> </span></span><span><span> 2</span><span><span>{</span> </span></span><span><span> 3</span><span> <span>v5</span> <span>=</span> <span>a3</span> <span>/</span> <span>0x2710</span><span>;</span> <span>// Validate bucket </span></span></span><span><span> 4</span><span> <span>if</span> <span>(</span> <span>v5</span> <span>!=</span> <span>a2</span><span>[</span><span>6</span><span>]</span> <span>||</span> <span>(</span><span>v6</span> <span>=</span> <span>a3</span> <span>-</span> <span>10000</span> <span>*</span> <span>v5</span><span>,</span> <span>v6</span> <span>&gt;=</span> <span>a2</span><span>[</span><span>2</span><span>])</span> <span>)</span> </span></span><span><span> 5</span><span> <span>sub_121EFD0</span><span>(</span><span>&amp;</span><span>off_47EC130</span><span>);</span> <span>// Panic: invalid withdrawal ID </span></span></span><span><span> 6</span></span><span><span> 7</span><span> <span>v7</span> <span>=</span> <span>a2</span><span>[</span><span>1</span><span>];</span> </span></span><span><span> 8</span><span> <span>v8</span> <span>=</span> <span>48</span> <span>*</span> <span>v6</span><span>;</span> <span>// 48 bytes per withdrawal record </span></span></span><span><span> 9</span></span><span><span>10</span><span> <span>// THE WRITE: </span></span></span><span><span>11</span><span> <span>v9</span> <span>=</span> <span>*</span><span>(</span><span>_DWORD</span> <span>*</span><span>)(</span><span>v7</span> <span>+</span> <span>v8</span> <span>+</span> <span>24</span><span>);</span> <span>// Read old index at offset +24 </span></span></span><span><span>12</span><span> <span>*</span><span>(</span><span>_DWORD</span> <span>*</span><span>)(</span><span>v7</span> <span>+</span> <span>v8</span> <span>+</span> <span>24</span><span>)</span> <span>=</span> <span>a4</span><span>;</span> <span>// WRITE new index at offset +24 </span></span></span><span><span>13</span></span><span><span>14</span><span> <span>*</span><span>v69</span> <span>=</span> <span>352</span><span>;</span> <span>// Success </span></span></span><span><span>15</span><span> <span>return</span> <span>v69</span><span>;</span> </span></span><span><span>16</span><span><span>}</span></span></span></code></pre></div><p>The withdrawal record at <code>bucket_base + 48*local_idx + 24</code> is mutated by governance.</p><p>No authorization is required once the consensus vote reaches this code.</p><h3 id=\"changing-the-bridge-validator-set\">Changing the Bridge Validator Set</h3><p>Bridge validator set is governance-controlled via <code>AllowedBridgeValidators</code> (case 17 at <code>0x1F37D9C</code>):</p><div><pre tabindex=\"0\"><code data-lang=\"asm\"><span><span> 1</span><span><span>; Case 17 </span></span></span><span><span> 2</span><span><span>1</span><span>f37d9c</span> <span>add</span> <span>r15</span><span>,</span> <span>8</span> <span>; Skip discriminant, point to payload </span></span></span><span><span> 3</span><span><span>1</span><span>f37da8</span> <span>call</span> <span>sub_1BE9E60</span> <span>; Deserialize Vec&lt;[u8;32]&gt; </span></span></span><span><span> 4</span><span><span>1</span><span>f37db2</span> <span>cmp</span> <span>eax</span><span>,</span> <span>160</span><span>h</span> <span>; Check success </span></span></span><span><span> 5</span><span><span>1</span><span>f37db7</span> <span>jnz</span> <span>loc_1F397F1</span> <span>; Error if failed </span></span></span><span><span> 6</span></span><span><span> 7</span><span><span>1</span><span>f37e11</span> <span>lea</span> <span>rbx</span><span>,</span> <span>[</span><span>r13</span><span>+</span><span>3200</span><span>h</span><span>]</span> <span>; Bridge validator state base </span></span></span><span><span> 8</span><span><span>1</span><span>f37e3f</span> <span>call</span> <span>sub_1C23160</span> <span>; Mutate validator set </span></span></span><span><span> 9</span></span><span><span>10</span><span><span>; Binary search using memcmp on 32-byte keys </span></span></span><span><span>11</span><span><span>1</span><span>f37f09</span> <span>mov</span> <span>edx</span><span>,</span> <span>20</span><span>h</span> <span>; Compare 32 bytes </span></span></span><span><span>12</span><span><span>1</span><span>f37f16</span> <span>call</span> <span>cs</span><span>:</span><span>memcmp_ptr</span></span></span></code></pre></div><p>State written to <code>r13+0x3200</code>. Each validator is 32 bytes. The insert function at <code>sub_1C23160</code>:</p><div><pre tabindex=\"0\"><code data-lang=\"c\"><span><span> 1</span><span><span>char</span> <span>__fastcall</span> <span>sub_1C23160</span><span>(</span><span>__int64</span> <span>*</span><span>a1</span><span>,</span> <span>const</span> <span>void</span> <span>*</span><span>a2</span><span>)</span> </span></span><span><span> 2</span><span><span>{</span> </span></span><span><span> 3</span><span> <span>v2</span> <span>=</span> <span>*</span><span>a1</span><span>;</span> <span>// Root node pointer </span></span></span><span><span> 4</span><span> <span>if</span> <span>(</span> <span>!*</span><span>a1</span> <span>)</span> </span></span><span><span> 5</span><span> <span>return</span> <span>0</span><span>;</span> <span>// Empty set </span></span></span><span><span> 6</span></span><span><span> 7</span><span> <span>v14</span> <span>=</span> <span>a1</span><span>;</span> </span></span><span><span> 8</span><span> <span>v13</span> <span>=</span> <span>a1</span><span>[</span><span>1</span><span>];</span> <span>// Tree depth </span></span></span><span><span> 9</span></span><span><span>10</span><span><span>LABEL_3</span><span>:</span> </span></span><span><span>11</span><span> <span>v15</span> <span>=</span> <span>*</span><span>(</span><span>unsigned</span> <span>__int16</span> <span>*</span><span>)(</span><span>v2</span> <span>+</span> <span>362</span><span>);</span> <span>// Entries in node </span></span></span><span><span>12</span><span> <span>v3</span> <span>=</span> <span>-</span><span>1</span><span>;</span> </span></span><span><span>13</span><span> <span>v4</span> <span>=</span> <span>0</span><span>;</span> </span></span><span><span>14</span></span><span><span>15</span><span> <span>do</span> </span></span><span><span>16</span><span> <span>{</span> </span></span><span><span>17</span><span> <span>if</span> <span>(</span> <span>32</span> <span>*</span> <span>(</span><span>_DWORD</span><span>)</span><span>v15</span> <span>==</span> <span>v4</span> <span>)</span> <span>// End of node </span></span></span><span><span>18</span><span> <span>{</span> </span></span><span><span>19</span><span> <span>v3</span> <span>=</span> <span>v15</span><span>;</span> </span></span><span><span>20</span><span><span>LABEL_9</span><span>:</span> </span></span><span><span>21</span><span> <span>if</span> <span>(</span> <span>!</span><span>v13</span> <span>)</span> </span></span><span><span>22</span><span> <span>return</span> <span>0</span><span>;</span> <span>// Not found, at leaf </span></span></span><span><span>23</span><span> <span>--</span><span>v13</span><span>;</span> </span></span><span><span>24</span><span> <span>v2</span> <span>=</span> <span>*</span><span>(</span><span>_QWORD</span> <span>*</span><span>)(</span><span>v2</span> <span>+</span> <span>8</span> <span>*</span> <span>v3</span> <span>+</span> <span>368</span><span>);</span> <span>// Follow child pointer </span></span></span><span><span>25</span><span> <span>goto</span> <span>LABEL_3</span><span>;</span> </span></span><span><span>26</span><span> <span>}</span> </span></span><span><span>27</span></span><span><span>28</span><span> <span>// Binary search: compare 32-byte validator keys </span></span></span><span><span>29</span><span> <span>v5</span> <span>=</span> <span>memcmp</span><span>(</span><span>a2</span><span>,</span> <span>(</span><span>const</span> <span>void</span> <span>*</span><span>)(</span><span>v2</span> <span>+</span> <span>v4</span><span>),</span> <span>0x20u</span><span>);</span> </span></span><span><span>30</span><span> <span>v6</span> <span>=</span> <span>(</span><span>v5</span> <span>&gt;</span> <span>0</span><span>)</span> <span>-</span> <span>((</span><span>__int64</span><span>)</span><span>v5</span> <span>&lt;</span> <span>0</span><span>);</span> </span></span><span><span>31</span><span> <span>v4</span> <span>+=</span> <span>32</span><span>;</span> <span>// Next entry </span></span></span><span><span>32</span><span> <span>++</span><span>v3</span><span>;</span> </span></span><span><span>33</span><span> <span>}</span> </span></span><span><span>34</span><span> <span>while</span> <span>(</span> <span>v6</span> <span>==</span> <span>1</span> <span>);</span> </span></span><span><span>35</span></span><span><span>36</span><span> <span>if</span> <span>(</span> <span>v6</span> <span>)</span> </span></span><span><span>37</span><span> <span>goto</span> <span>LABEL_9</span><span>;</span> </span></span><span><span>38</span></span><span><span>39</span><span> <span>// Found match - update set </span></span></span><span><span>40</span><span> <span>v16</span><span>[</span><span>0</span><span>]</span> <span>=</span> <span>v2</span><span>;</span> </span></span><span><span>41</span><span> <span>v16</span><span>[</span><span>1</span><span>]</span> <span>=</span> <span>v13</span><span>;</span> </span></span><span><span>42</span><span> <span>v16</span><span>[</span><span>2</span><span>]</span> <span>=</span> <span>v3</span><span>;</span> </span></span><span><span>43</span><span> <span>v7</span> <span>=</span> <span>v14</span><span>;</span> </span></span><span><span>44</span><span> <span>v16</span><span>[</span><span>3</span><span>]</span> <span>=</span> <span>v14</span><span>;</span> </span></span><span><span>45</span><span> <span>sub_1729780</span><span>(</span><span>v17</span><span>,</span> <span>v16</span><span>,</span> <span>&amp;</span><span>v12</span><span>);</span> </span></span><span><span>46</span><span> <span>--</span><span>v7</span><span>[</span><span>2</span><span>];</span> </span></span><span><span>47</span></span><span><span>48</span><span> <span>return</span> <span>1</span><span>;</span> </span></span><span><span>49</span><span><span>}</span></span></span></code></pre></div><table><thead><tr><th>Property</th><th>Finding</th></tr></thead><tbody><tr><td>Authorization</td><td>None in handler</td></tr><tr><td>Validation</td><td>Deserialize only</td></tr><tr><td>Application</td><td>Instant (no delay)</td></tr></tbody></table><p>If a single entity controls ‚â•2/3 of voting power, they can replace all bridge validators in a single block.</p><h3 id=\"freezing-the-entire-chain-permanently\">Freezing the entire chain permanently</h3><p>Exhaustive enumeration of all 89 <code>VoteGlobalAction</code> variants (0x00-0x58) from deserializer at <code>sub_1F40200</code> shows <code>FreezeChain</code> exists at discriminant 0x20. No <code>UnfreezeChain</code> variant exists.</p><p>Other governance actions are reversible via boolean toggles:</p><ul><li><code>HaltPerpTrading</code> (0x22): <code>is_halted: bool</code></li><li><code>DisableCValidator</code> (0x33): <code>disable: bool</code></li><li><code>SetEvmEnabled</code> (0x38): boolean flag</li></ul><p>FreezeChain takes only a height parameter with no toggle:</p><div><pre tabindex=\"0\"><code data-lang=\"rust\"><span><span>1</span><span><span>FreezeChain</span><span>{</span></span></span><span><span>2</span><span><span>height</span>: <span>u64</span><span>,</span><span>// Block height at which to freeze </span></span></span><span><span>3</span><span><span>}</span></span></span></code></pre></div><p>State structure:</p><div><pre tabindex=\"0\"><code data-lang=\"rust\"><span><span>1</span><span><span>struct</span> <span>VisorAbciState</span><span>{</span></span></span><span><span>2</span><span><span>// ... fields ... </span></span></span><span><span>3</span><span><span>scheduled_freeze_height</span>: <span>Option</span><span>&lt;</span><span>u64</span><span>&gt;</span><span>,</span><span>// Offset 0x4C8 (discriminant), 0x4D0 (value) </span></span></span><span><span>4</span><span><span>// ... more fields ... </span></span></span><span><span>5</span><span><span>current_height</span>: <span>u64</span><span>,</span><span>// Offset 0x2F80 </span></span></span><span><span>6</span><span><span>// ... more fields ... </span></span></span><span><span>7</span><span><span>}</span></span></span></code></pre></div><p>From <code>block_proposal_validator</code> at <code>0x3B8A452</code>:</p><div><pre tabindex=\"0\"><code data-lang=\"c\"><span><span> 1</span><span><span>v12</span> <span>=</span> <span>*</span><span>(</span><span>_QWORD</span> <span>*</span><span>)(</span><span>a2</span> <span>+</span> <span>1224</span><span>);</span> <span>// Load freeze discriminant </span></span></span><span><span> 2</span><span><span>v183</span> <span>=</span> <span>*</span><span>(</span><span>_QWORD</span> <span>*</span><span>)(</span><span>a2</span> <span>+</span> <span>1232</span><span>);</span> <span>// Load freeze_height </span></span></span><span><span> 3</span></span><span><span> 4</span><span><span>if</span> <span>(</span> <span>v12</span> <span>==</span> <span>1</span> <span>)</span> <span>{</span> <span>// Freeze is scheduled </span></span></span><span><span> 5</span><span> <span>if</span> <span>(</span> <span>v183</span> <span>&lt;</span> <span>*</span><span>(</span><span>_QWORD</span> <span>*</span><span>)(</span><span>a2</span> <span>+</span> <span>12160</span><span>)</span> <span>)</span> <span>// scheduled_height &lt; current_height </span></span></span><span><span> 6</span><span> <span>core</span><span>::</span><span>panicking</span><span>::</span><span>panic</span><span>(...);</span> <span>// Cannot schedule freeze in past </span></span></span><span><span> 7</span></span><span><span> 8</span><span> <span>if</span> <span>(</span> <span>v183</span> <span>==</span> <span>*</span><span>(</span><span>_QWORD</span> <span>*</span><span>)(</span><span>a2</span> <span>+</span> <span>12160</span><span>)</span> <span>)</span> <span>// AT freeze height </span></span></span><span><span> 9</span><span> <span>core</span><span>::</span><span>panicking</span><span>::</span><span>panic</span><span>(...);</span> <span>// assertion failed: !self.state.is_frozen() </span></span></span><span><span>10</span><span><span>}</span></span></span></code></pre></div><p>When <code>current_height == scheduled_freeze_height</code>, panic aborts block validation. No blocks can be proposed or accepted. Chain cannot advance past freeze height.</p><p>From <code>check_and_handle_scheduled_freeze</code> at <code>0x1C899C0</code>:</p><div><pre tabindex=\"0\"><code data-lang=\"c\"><span><span> 1</span><span><span>v1</span> <span>=</span> <span>*</span><span>(</span><span>uint64_t</span> <span>*</span><span>)(</span><span>a1</span> <span>+</span> <span>0x2F80</span><span>);</span> <span>// Load current_height </span></span></span><span><span> 2</span><span><span>if</span> <span>(</span> <span>*</span><span>(</span><span>uint32_t</span> <span>*</span><span>)(</span><span>a1</span> <span>+</span> <span>0x4C8</span><span>)</span> <span>==</span> <span>1</span> <span>)</span> <span>{</span> <span>// Option discriminant == Some </span></span></span><span><span> 3</span><span> <span>v2</span> <span>=</span> <span>*</span><span>(</span><span>uint64_t</span> <span>*</span><span>)(</span><span>a1</span> <span>+</span> <span>0x4D0</span><span>);</span> <span>// Load freeze_height value </span></span></span><span><span> 4</span><span> <span>if</span> <span>(</span> <span>v2</span> <span>&lt;=</span> <span>v1</span> <span>)</span> <span>{</span> </span></span><span><span> 5</span><span> <span>bool</span> <span>exact_match</span> <span>=</span> <span>(</span><span>v2</span> <span>==</span> <span>v1</span><span>);</span> </span></span><span><span> 6</span><span> <span>bool</span> <span>periodic</span> <span>=</span> <span>(</span><span>ROR8</span><span>(</span><span>0xD288CE703AFB7E91LL</span> <span>*</span> <span>v1</span><span>,</span> <span>4</span><span>)</span> <span>&lt;</span> <span>0x68DB8BAC710CCuLL</span><span>);</span> </span></span><span><span> 7</span></span><span><span> 8</span><span> <span>v3</span> <span>=</span> <span>exact_match</span> <span>|</span> <span>periodic</span><span>;</span> </span></span><span><span> 9</span><span> <span>if</span> <span>(</span> <span>exact_match</span> <span>)</span> <span>{</span> </span></span><span><span>10</span><span> <span>v5</span> <span>=</span> <span>\"freeze\"</span><span>;</span> </span></span><span><span>11</span><span> <span>write_freeze_marker</span><span>(</span><span>\"/hyperliquid_data/freeze_abci_height\"</span><span>);</span> </span></span><span><span>12</span><span> <span>}</span> <span>else</span> <span>{</span> </span></span><span><span>13</span><span> <span>v5</span> <span>=</span> <span>\"periodic\"</span><span>;</span> </span></span><span><span>14</span><span> <span>}</span> </span></span><span><span>15</span><span> <span>log_freeze_event</span><span>(</span><span>a1</span><span>,</span> <span>v5</span><span>,</span> <span>...);</span> </span></span><span><span>16</span><span> <span>save_checkpoint</span><span>(</span><span>state</span><span>);</span> </span></span><span><span>17</span><span> <span>}</span> </span></span><span><span>18</span><span><span>}</span></span></span></code></pre></div><p>Freezing requires a governance vote. Unfreezing requires manual operator intervention: stopping validators, deleting <code>/hyperliquid_data/freeze_abci_height</code>, patching state databases, coordinating restart. No on-chain evidence, no audit trail.</p><h3 id=\"the-popcat-incident-november-2025\">The POPCAT Incident (November 2025)</h3><p>On November 12, 2025, <a href=\"https://decrypt.co/348355/hyperliquid-paused-some-withdrawals-popcat-trader-scrutiny\">Hyperliquid froze all Arbitrum deposits and withdrawals</a>:</p><ol><li>Attacker created ~$20-30M leveraged long on POPCAT</li><li>Placed massive buy orders to prop up price</li><li>Withdrew orders, triggering cascading liquidations</li><li>HLP vault absorbed <a href=\"https://www.bitget.com/academy/popcat-solana-memecoin-crash-2025-hyperliquid-defi-liquidation-explained\">$4.9M in bad debt</a></li></ol><p>Response: froze all deposits and withdrawals platform-wide, labeled as ‚Äúmaintenance,‚Äù resumed ~2 hours later. <a href=\"https://www.ccn.com/news/crypto/hyperliquid-attack-popcat-again-5million/\">Third manipulation attack in 2025</a>.</p><p>Sounds familiar?</p><hr><h2 id=\"0x4-the-magic-8-ball\">0x4: The Magic 8 Ball</h2><blockquote><p>A single compromised address can set arbitrary prices on all markets: instant liquidation cascades, no timelock, no deviation limits, no multi-sig.</p></blockquote><p>Derivatives exchanges live or die by their oracles. Get the price wrong and positions liquidate instantly. Get it maliciously wrong: billions evaporate in seconds.</p><h3 id=\"the-single-point-of-total-failure\">The Single Point of Total Failure</h3><p>The <code>oracle_updater</code> field is a single privileged address controlling price feeds for the entire exchange. Not a multi-sig. Not a decentralized oracle network. One wallet‚Äôs private key.</p><p>The <code>Hip3Deploy</code> governance action at <code>sub_1F28050</code> (a 180KB function handling all 89 variants) contains variant 2: <code>SetOracle</code>.</p><p>Let‚Äôs trace what happens when it executes.</p><h3 id=\"execution-path\">Execution Path</h3><p><strong>Entry:</strong> VoteGlobalAction dispatcher at <code>sub_1F36320</code></p><p><strong>Oracle Dispatcher:</strong></p><div><pre tabindex=\"0\"><code data-lang=\"c\"><span><span> 1</span><span><span>__int64</span> <span>sub_3DDC500</span><span>(</span><span>__int64</span> <span>result</span><span>,</span> <span>__int64</span> <span>*</span><span>state_tree</span><span>,</span> </span></span><span><span> 2</span><span> <span>__int128</span> <span>*</span><span>perp_config</span><span>,</span> <span>__int64</span> <span>action_data</span><span>,</span> </span></span><span><span> 3</span><span> <span>char</span> <span>should_validate</span><span>)</span> </span></span><span><span> 4</span><span><span>{</span> </span></span><span><span> 5</span><span> <span>// Extract market key (compared as 20 bytes via memcmp below) </span></span></span><span><span> 6</span><span> <span>s1</span> <span>=</span> <span>*</span><span>(</span><span>_OWORD</span> <span>*</span><span>)(</span><span>action_data</span> <span>+</span> <span>32</span><span>);</span> </span></span><span><span> 7</span></span><span><span> 8</span><span> <span>// Binary search BTree for market at state+272 </span></span></span><span><span> 9</span><span> <span>v6</span> <span>=</span> <span>state_tree</span><span>[</span><span>3</span><span>];</span> </span></span><span><span>10</span><span> <span>v7</span> <span>=</span> <span>(</span><span>char</span> <span>*</span><span>)(</span><span>v6</span> <span>+</span> <span>272</span><span>);</span> </span></span><span><span>11</span><span> <span>do</span> <span>{</span> </span></span><span><span>12</span><span> <span>v11</span> <span>=</span> <span>memcmp</span><span>(</span><span>&amp;</span><span>s1</span><span>,</span> <span>v7</span><span>,</span> <span>0x14u</span><span>);</span> <span>// Compare 20-byte addresses </span></span></span><span><span>13</span><span> <span>v12</span> <span>=</span> <span>(</span><span>v11</span> <span>&gt;</span> <span>0</span><span>)</span> <span>-</span> <span>((</span><span>__int64</span><span>)</span><span>v11</span> <span>&lt;</span> <span>0</span><span>);</span> </span></span><span><span>14</span><span> <span>v7</span> <span>+=</span> <span>20</span><span>;</span> </span></span><span><span>15</span><span> <span>}</span> <span>while</span> <span>(</span> <span>v12</span> <span>==</span> <span>1</span> <span>);</span> </span></span><span><span>16</span></span><span><span>17</span><span> <span>// CRITICAL: Validation is OPTIONAL </span></span></span><span><span>18</span><span> <span>if</span> <span>(</span> <span>should_validate</span> <span>&amp;&amp;</span> <span>market_found</span> <span>)</span> <span>{</span> </span></span><span><span>19</span><span> <span>sub_303AE10</span><span>(</span><span>result</span><span>,</span> <span>&amp;</span><span>s1</span><span>,</span> <span>0</span><span>,</span> <span>timestamp</span><span>,</span> <span>state_ptr</span><span>);</span> </span></span><span><span>20</span><span> <span>if</span> <span>(</span> <span>result_code</span> <span>!=</span> <span>352</span> <span>)</span> <span>{</span> </span></span><span><span>21</span><span> <span>// ... validation failed ... </span></span></span><span><span>22</span><span> <span>return</span> <span>error</span><span>;</span> </span></span><span><span>23</span><span> <span>}</span> </span></span><span><span>24</span><span> <span>}</span> </span></span><span><span>25</span><span> <span>// If should_validate = 0, the handler skips the sub_303AE10 validation step </span></span></span><span><span>26</span><span> <span>return</span> <span>success</span><span>;</span> </span></span><span><span>27</span><span><span>}</span></span></span></code></pre></div><p>See that <code>should_validate</code> parameter? When false, oracle prices write directly to state. No checks whatsoever.</p><p><strong>Oracle Update Validator:</strong></p><div><pre tabindex=\"0\"><code data-lang=\"c\"><span><span> 1</span><span><span>__int64</span> <span>sub_303AE10</span><span>(</span><span>__int64</span> <span>result</span><span>,</span> <span>unsigned</span> <span>int</span> <span>*</span><span>timestamp</span><span>,</span> </span></span><span><span> 2</span><span> <span>int</span> <span>is_testnet</span><span>,</span> <span>unsigned</span> <span>__int64</span> <span>current_time</span><span>,</span> </span></span><span><span> 3</span><span> <span>__int64</span> <span>*</span><span>market_state</span><span>)</span> </span></span><span><span> 4</span><span><span>{</span> </span></span><span><span> 5</span><span> <span>// Rate limit based on environment </span></span></span><span><span> 6</span><span> <span>if</span> <span>(</span> <span>is_testnet</span> <span>==</span> <span>0</span> <span>)</span> </span></span><span><span> 7</span><span> <span>rate_limit</span> <span>=</span> <span>100</span><span>;</span> <span>// 100ms vs 400ms </span></span></span><span><span> 8</span><span> <span>else</span> </span></span><span><span> 9</span><span> <span>rate_limit</span> <span>=</span> <span>400</span><span>;</span> </span></span><span><span>10</span></span><span><span>11</span><span> <span>// Check rate limit </span></span></span><span><span>12</span><span> <span>if</span> <span>(</span> <span>market_state</span><span>[</span><span>2</span><span>]</span> <span>&gt;=</span> <span>rate_limit</span> <span>)</span> <span>{</span> </span></span><span><span>13</span><span> <span>if</span> <span>(</span> <span>current_time</span> <span>&lt;</span> <span>last_update_time</span> <span>)</span> <span>{</span> </span></span><span><span>14</span><span> <span>*</span><span>(</span><span>_WORD</span> <span>*</span><span>)</span><span>result</span> <span>=</span> <span>195</span><span>;</span> <span>// \"Oracle price update too often\" </span></span></span><span><span>15</span><span> <span>return</span> <span>result</span><span>;</span> </span></span><span><span>16</span><span> <span>}</span> </span></span><span><span>17</span><span> <span>}</span> </span></span><span><span>18</span></span><span><span>19</span><span> <span>// Timestamp bounds (within 24h window) </span></span></span><span><span>20</span><span> <span>sub_11C4770</span><span>(</span><span>&amp;</span><span>calc</span><span>,</span> <span>timestamp</span> <span>+</span> <span>1</span><span>,</span> <span>86400</span><span>,</span> <span>0</span><span>);</span> </span></span><span><span>21</span><span> <span>v21</span> <span>=</span> <span>86400LL</span> <span>*</span> <span>(</span><span>date_calc</span><span>)</span> <span>+</span> <span>v14</span><span>;</span> </span></span><span><span>22</span><span> <span>v23</span> <span>=</span> <span>1000</span> <span>*</span> <span>v21</span> <span>+</span> <span>v22</span> <span>-</span> <span>62135683200000LL</span><span>;</span> <span>// Epoch ms </span></span></span><span><span>23</span></span><span><span>24</span><span> <span>// No future timestamps </span></span></span><span><span>25</span><span> <span>if</span> <span>(</span> <span>current_time</span> <span>&gt;</span> <span>v23</span> <span>)</span> <span>{</span> </span></span><span><span>26</span><span> <span>*</span><span>(</span><span>_WORD</span> <span>*</span><span>)</span><span>result</span> <span>=</span> <span>195</span><span>;</span> </span></span><span><span>27</span><span> <span>return</span> <span>result</span><span>;</span> </span></span><span><span>28</span><span> <span>}</span> </span></span><span><span>29</span></span><span><span>30</span><span> <span>// No duplicate timestamps </span></span></span><span><span>31</span><span> <span>v38</span> <span>=</span> <span>*</span><span>market_state</span><span>;</span> </span></span><span><span>32</span><span> <span>if</span> <span>(</span> <span>v38</span> <span>)</span> <span>{</span> </span></span><span><span>33</span><span> <span>do</span> <span>{</span> </span></span><span><span>34</span><span> <span>if</span> <span>(</span> <span>current_time</span> <span>==</span> <span>existing_timestamp</span> <span>)</span> <span>{</span> </span></span><span><span>35</span><span> <span>*</span><span>(</span><span>_WORD</span> <span>*</span><span>)</span><span>result</span> <span>=</span> <span>196</span><span>;</span> </span></span><span><span>36</span><span> <span>return</span> <span>result</span><span>;</span> </span></span><span><span>37</span><span> <span>}</span> </span></span><span><span>38</span><span> <span>}</span> <span>while</span> <span>(</span> <span>searching</span> <span>);</span> </span></span><span><span>39</span><span> <span>}</span> </span></span><span><span>40</span></span><span><span>41</span><span> <span>// SUCCESS - caller proceeds to write price to state </span></span></span><span><span>42</span><span> <span>*</span><span>(</span><span>_WORD</span> <span>*</span><span>)</span><span>result</span> <span>=</span> <span>352</span><span>;</span> </span></span><span><span>43</span><span> <span>return</span> <span>result</span><span>;</span> </span></span><span><span>44</span><span><span>}</span></span></span></code></pre></div><p>What gets checked:</p><ul><li>Rate limit: ‚â•100ms (testnet) or ‚â•400ms (production) between updates</li><li>Timestamp in valid date range</li><li>No future timestamps</li><li>No duplicate timestamps</li></ul><p>What doesn‚Äôt get checked:</p><ul><li>Price magnitude</li><li>Price deviation from previous values</li><li>Validator signatures</li><li>Authorization</li></ul><p>The struct from protocol analysis:</p><div><pre tabindex=\"0\"><code data-lang=\"rust\"><span><span> 1</span><span><span>/// Hip3DeployAction variant 2: SetOracle </span></span></span><span><span> 2</span><span><span>/// Handler: 0x1F28050, case 2 </span></span></span><span><span> 3</span><span><span>SetOracle</span><span>{</span></span></span><span><span> 4</span><span><span>/// +0x38: Address of the oracle updater </span></span></span><span><span> 5</span><span><span>oracle_addr</span>: <span>[</span><span>u8</span><span>;</span><span>20</span><span>],</span></span></span><span><span> 6</span></span><span><span> 7</span><span><span>/// +0x08: Vec of signed 64-bit prices </span></span></span><span><span> 8</span><span><span>/// NO maximum/minimum bounds </span></span></span><span><span> 9</span><span><span>oracle_pxs</span>: <span>Vec</span><span>&lt;</span><span>i64</span><span>&gt;</span><span>,</span></span></span><span><span>10</span></span><span><span>11</span><span><span>/// +0x50: Oracle metadata </span></span></span><span><span>12</span><span><span>oracle_data</span>: <span>OracleData</span><span>,</span></span></span><span><span>13</span></span><span><span>14</span><span><span>/// +0x20: External perpetual prices </span></span></span><span><span>15</span><span><span>external_perp_px</span>: <span>ExternalPerpPx</span><span>,</span></span></span><span><span>16</span><span><span>}</span></span></span></code></pre></div><p>No <code>execution_time</code>, no <code>delay_blocks</code>, no <code>timelock_expiry</code>. Prices write to state in the same block.</p><h3 id=\"governance-overrides\">Governance Overrides</h3><p>Even if <code>oracle_updater</code> is honest, governance bypasses every safety check.</p><p><strong>OverrideMaxSignedDistancesFromOracle</strong>: Normal behavior: if oracle reports ETH at $3,000 but mark price is $3,500, reject. With override: governance sets deviation limit to any value. Want 1000% deviation from market reality? Done.</p><p><strong>OverrideIsolatedSpotDistances &amp; OverrideIsolatedExternalDistances</strong> control liquidation thresholds for isolated margin. Governance can reduce safety margins to zero: a 5% move required to liquidate a 20x position becomes 0.1%.</p><p><strong>OverrideFundingImpactUsd</strong>: Funding rates keep perp prices anchored to spot. Override to zero and massive open interest imbalances produce no funding payments. Open 100,000 ETH long, manipulate oracle to $10,000, close for $650M profit, pay zero funding.</p><h3 id=\"industry-comparison\">Industry Comparison</h3><p>Every legitimate protocol learned from Mango Markets ($110M, Oct 2022) and Cream Finance ($130M, Oct 2021). Industry standard: multiple independent oracles, timelocks, deviation caps, multi-sig, circuit breakers.</p><table><thead><tr><th>Protocol</th><th>Oracle Sources</th><th>Update Delay</th><th>Deviation Cap</th><th>Multi-sig</th><th>Override</th></tr></thead><tbody><tr><td><strong>Hyperliquid</strong></td><td><strong>1 (oracle_updater)</strong></td><td><strong>None</strong></td><td><strong>Bypassable</strong></td><td><strong>No (single addr)</strong></td><td><strong>Unlimited, instant</strong></td></tr><tr><td><strong>dYdX v4</strong></td><td>5 feeds</td><td>1 hour</td><td>¬±10%</td><td>3-of-5</td><td>Capped, 7-day vote</td></tr><tr><td><strong>GMX v2</strong></td><td>Chainlink</td><td>N/A</td><td>¬±2.5%</td><td>2-of-3</td><td>None exists</td></tr><tr><td><strong>Synthetix</strong></td><td>Chainlink + Pyth</td><td>15 min</td><td>¬±10% circuit</td><td>4-of-7</td><td>48h timelock</td></tr><tr><td><strong>Aave v3</strong></td><td>Chainlink + fallback</td><td>Grace period</td><td>Staleness check</td><td>Guardian</td><td>24h+ delay</td></tr></tbody></table><h3 id=\"attack-surface\">Attack Surface</h3><ol><li><p>Compromise <code>oracle_updater</code> private key. Phishing, infrastructure breach, insider. Instant arbitrary prices on all markets.</p></li><li><p>Governance. If a single entity controls the voting threshold, it can replace <code>oracle_updater</code> or submit <code>SetOracle</code> directly.</p></li><li><p>Combine with liquidation cartel. Whitelisted liquidators co-located with validators see liquidatable positions before oracle update broadcasts, pre-position to capture, zero fees maximize extraction.</p></li></ol><h3 id=\"real-world-exercise-jelly-march-2025\">Real-World Exercise: JELLY (March 2025)</h3><p>Everything documented above was exercised in production on March 26, 2025.</p><p>A trader <a href=\"https://www.halborn.com/blog/post/explained-the-hyperliquid-hack-march-2025\">exploited the oracle system</a> via JELLYJELLY: deposited $7.17M, opened $6M short (20x on a $20M market cap token), pumped spot on Bybit to distort the oracle feed, forced self-liquidation. HLP absorbed $12M unrealized losses.</p><p>Hyperliquid‚Äôs response:</p><ul><li><a href=\"https://finance.yahoo.com/news/hyperliquid-delists-jellyjelly-perpetual-futures-005949412.html\">Unilaterally delisted JELLYJELLY</a>: no visible governance vote</li><li><a href=\"https://www.coindesk.com/markets/2025/03/26/hyperliquid-delists-jellyjelly-after-vault-squeezed-in-usd13m-tussle\">Overrode oracle price</a> to $0.0095 (vs $0.50 market)</li><li>Force-settled all positions at validator-chosen price</li><li>Froze attacker‚Äôs withdrawals ($6.26M of $7.17M escaped before freeze)</li></ul><p>The attacker manipulated external markets; Hyperliquid manipulated their own oracle. Same capability, different beneficiary.</p><p>Arthur Hayes <a href=\"https://x.com/SmarDex/status/1905278939821699239\">commented</a>: <em>‚ÄúLet‚Äôs stop pretending Hyperliquid is decentralized.‚Äù</em></p><p>Bitget CEO Gracy Chen <a href=\"https://oakresearch.io/en/analyses/investigations/hyperliquid-jelly-attack-context-vulnerability-team-solution\">called it</a> <em>‚Äúpotentially FTX 2.0‚Äù</em> (referring to centralized failure modes, not criminal fraud).</p><p>Every position on Hyperliquid is one compromised private key away from forced liquidation. Your 2x leveraged long with 50% safety margin can be liquidated at an artificial price. You can‚Äôt withdraw during the attack (3-second window), can‚Äôt prove manipulation (it‚Äôs in consensus state), can‚Äôt appeal (liquidations are final), and can‚Äôt mitigate it via decentralization if governance is concentrated.</p><p>One key. One block. One irreversible cascade.</p><hr><h2 id=\"0x5-the-black-hole\">0x5: The Black Hole</h2><blockquote><p>Governance proposals are stored but unqueryable. Users see votes happened but cannot verify what was proposed. The most destructive operations leave no audit trail.</p></blockquote><p>Hyperliquid‚Äôs most powerful governance actions leave no trace. Validators vote on proposals users cannot read, execute changes users cannot see, and suppress warnings users have no way to verify.</p><h3 id=\"voteglobalaction-effects-are-invisible\">VoteGlobalAction Effects Are Invisible</h3><p>Governance execution bypasses the LedgerUpdate logging system. While the binary includes logging infrastructure (<code>forward_ledger_update_from_state</code> at 0x38de5f0) that emits events for user actions, VoteGlobalAction execution (handler at 0x1f36320) directly modifies consensus state without calling logging functions. The <code>--write-system-and-core-writer-actions</code> flag enables logging for CoreWriter privileged actions (System actions), but VoteGlobalAction variants (89 types including QuarantineUser, FreezeChain, ModifyBroadcaster, SetReserveAccumulator) execute through the consensus vote path and leave no LedgerUpdate entries.</p><p>The platform‚Äôs most destructive operations leave no record. Minting is traceable. Freezing accounts is not. Changing interest rate accumulators is not. Modifying the broadcaster whitelist is not. State changes are permanent and invisible to the public <code>userNonFundingLedgerUpdates</code> API.</p><h3 id=\"system-actions-and-silent-balance-modifications\">System Actions and Silent Balance Modifications</h3><p>System-initiated balance changes occur through two distinct mechanisms with different visibility:</p><p><strong>User-triggered internal transfers</strong>: Operations like withdrawals or cross-margin adjustments emit <code>internalTransfer</code> LedgerUpdates (type 0x0A), which appear in the public <code>userNonFundingLedgerUpdates</code> API. The effect is visible, and the cause is a user-signed action.</p><p><strong>System action balance modifications</strong>: Privileged System actions (SystemUsdClassTransfer) directly modify account balances without emitting ANY LedgerUpdate events. These operations bypass the logging infrastructure entirely. Balance changes occur with no corresponding entry in <code>userNonFundingLedgerUpdates</code> and no logged cause.</p><p>Users querying the API will see balance discrepancies with no explanation when System actions execute. The <code>--write-system-and-core-writer-actions</code> flag can log some execution to disk, but pretty much no documentation exists about it, nor about what it would log in the first place.</p><hr><h2 id=\"0x6-the-shadow-bank\">0x6: The Shadow Bank</h2><blockquote><p>Hidden leverage risk. Users trading perpetuals unknowingly interact with undisclosed lending infrastructure that could amplify systemic risk during market stress.</p></blockquote><p><del>You thought you were trading perpetual futures. Turns out, you‚Äôve been sitting on top of a <strong>fully-deployed, undisclosed lending protocol</strong> the entire time: complete with borrow/supply/repay/withdraw operations, interest rate curves, governance-controlled reserve parameters, and integrated liquidation infrastructure.</del></p><p><strong>Update (Dec 22):</strong> This section originally characterized BOLE as an undisclosed protocol. As <a href=\"https://x.com/hermithype/status/2002918149478588539\">@hermithype pointed out</a>, a lending feature called ‚ÄúBLP‚Äù was publicly tested on testnet during pre-alpha. The core concern remains: this infrastructure is live on mainnet with $1M+ in deposits, active API endpoints returning real user data, and no prominent documentation informing current users that a borrow/lend system operates alongside the perpetual exchange <em>in mainnet</em>.</p><h3 id=\"discovery\">Discovery</h3><p>Buried in the binary is a structure definition: <code>struct BolePool with 8 elements</code>. Cross-referencing reveals the complete infrastructure of an Aave-style borrow/lend protocol internally codenamed <strong>‚ÄúBole‚Äù</strong> with kink model interest rate curves.</p><p>The governance action <code>SetBole</code> (VoteGlobalAction discriminant <code>0x50</code>) controls the entire system:</p><div><pre tabindex=\"0\"><code data-lang=\"rust\"><span><span>1</span><span><span>/// VoteGlobalAction case 0x50 </span></span></span><span><span>2</span><span><span>/// Serialized as \"setBole\" in governance payloads </span></span></span><span><span>3</span><span><span>SetBole</span><span>{</span></span></span><span><span>4</span><span><span>pool_config</span>: <span>BolePoolConfig</span><span>,</span></span></span><span><span>5</span><span><span>interest_rate_model</span>: <span>KinkModel</span><span>,</span></span></span><span><span>6</span><span><span>reserve_factor</span>: <span>u64</span><span>,</span></span></span><span><span>7</span><span><span>liquidation_bonus</span>: <span>u64</span><span>,</span></span></span><span><span>8</span><span><span>}</span></span></span></code></pre></div><h3 id=\"the-api-is-live\">The API Is Live</h3><p>The protocol is live on mainnet with active pools holding real user funds:</p><div><pre tabindex=\"0\"><code data-lang=\"bash\"><span><span> 1</span><span><span># Query all borrow/lend pool states</span> </span></span><span><span> 2</span><span>curl -s https://api.hyperliquid.xyz/info <span>\\ </span></span></span><span><span> 3</span><span> -H <span>\"Content-Type: application/json\"</span> <span>\\ </span></span></span><span><span> 4</span><span> -d <span>'{\"type\":\"allBorrowLendReserveStates\"}'</span> </span></span><span><span> 5</span></span><span><span> 6</span><span><span># Response (December 2025):</span> </span></span><span><span> 7</span><span><span>[</span> </span></span><span><span> 8</span><span> <span>[</span>0, <span>{</span> </span></span><span><span> 9</span><span> <span>\"totalSupplied\"</span>: <span>\"1002666.00863692\"</span>, </span></span><span><span>10</span><span> <span>\"totalBorrowed\"</span>: <span>\"497.8765043\"</span>, </span></span><span><span>11</span><span> <span>\"borrowYearlyRate\"</span>: <span>\"0.05\"</span>, </span></span><span><span>12</span><span> <span>\"supplyYearlyRate\"</span>: <span>\"0.0000223449\"</span>, </span></span><span><span>13</span><span> <span>\"utilization\"</span>: <span>\"0.0004965527\"</span>, </span></span><span><span>14</span><span> <span>\"oraclePx\"</span>: <span>\"1.0\"</span>, </span></span><span><span>15</span><span> <span>\"ltv\"</span>: <span>\"0.0\"</span> </span></span><span><span>16</span><span> <span>}]</span>, </span></span><span><span>17</span><span> <span>[</span>150, <span>{</span> </span></span><span><span>18</span><span> <span>\"totalSupplied\"</span>: <span>\"45.91215326\"</span>, </span></span><span><span>19</span><span> <span>\"totalBorrowed\"</span>: <span>\"0.0\"</span>, </span></span><span><span>20</span><span> <span>\"borrowYearlyRate\"</span>: <span>\"0.05\"</span>, </span></span><span><span>21</span><span> <span>\"supplyYearlyRate\"</span>: <span>\"0.0\"</span>, </span></span><span><span>22</span><span> <span>\"balance\"</span>: <span>\"45.91215326\"</span>, </span></span><span><span>23</span><span> <span>\"utilization\"</span>: <span>\"0.0\"</span>, </span></span><span><span>24</span><span> <span>\"oraclePx\"</span>: <span>\"24.355\"</span>, </span></span><span><span>25</span><span> <span>\"ltv\"</span>: <span>\"0.5\"</span> </span></span><span><span>26</span><span> <span>}]</span> </span></span><span><span>27</span><span><span>]</span></span></span></code></pre></div><p><strong>Pool 0 (USDC)</strong>: Over $1M supplied, with active borrows ($497.88) accruing interest at 5% APY. <strong>Pool 150</strong>: $1,100+ in collateral (45.91 tokens @ $24.36/unit) with 50% LTV ratio configured.</p><p>User-facing L1 action exists (L1 ActionType discriminant <code>0x49</code>, ‚ÄúBorrowLend‚Äù) with operations for supply/borrow/repay/withdraw. API handlers exposed: <code>borrowLendUserState</code> (info type case <code>0x27</code>) returns per-user positions, <code>allBorrowLendReserveStates</code> (info type case <code>0x29</code>) returns all pool states.</p><h3 id=\"why-this-matters\">Why This Matters</h3><ol><li><p><del><strong>Undisclosed Risk</strong>: Users depositing into HLP or trading perpetuals don‚Äôt know their counterparty might be leveraged through an internal lending system</del></p><p><strong>Documentation Gap</strong>: While early testnet participants may have been aware of BLP, the feature‚Äôs evolution to ‚ÄúBOLE‚Äù and its current mainnet deployment aren‚Äôt reflected in user-facing documentation. The API endpoints (<code>allBorrowLendReserveStates</code>, <code>borrowLendUserState</code>) are live and returning production data</p></li><li><p><strong>Hidden Leverage Risk</strong>: Mainnet data shows $1M+ in supplied assets with configured LTV ratios (50% for token 150). If BOLE collateral integrates with perp margin calculations, users could:</p><ul><li>Supply token A to BOLE pool</li><li>Borrow USDC at 50% LTV</li><li>Trade perps with borrowed USDC</li><li>Effectively leverage spot holdings into perp exposure</li></ul><p>This creates systemic amplification: market crash in token A triggers BOLE liquidation, forced USDC repayment, perp position liquidation, and cascade across both systems. Oracle price feeds (<code>oraclePx</code> field in API response) create shared dependency between lending LTV calculations and perp margin requirements.</p></li><li><p><strong>No Audit</strong>: The Zellic bridge audit covers the Ethereum bridge contract, not the L1 lending system</p></li><li><p><strong>Governance Control</strong>: Governance can modify interest rates, LTV ratios, and liquidation parameters via <code>SetBole</code> (VoteGlobalAction 0x50) votes. If a single entity controls the voting threshold, it can:</p><ul><li>Lower liquidation thresholds (increase LTV)</li><li>Reduce interest rates (encourage borrowing)</li><li>Modify oracle feeds (separate VoteGlobalAction)</li><li>Amplify systemic leverage without user notification</li></ul></li></ol><p>This isn‚Äôt a prototype or testing infrastructure. It‚Äôs a production-ready lending protocol running alongside the perpetual exchange, with no public documentation, no user disclosure, and no external audit.</p><hr><h2 id=\"0x7-closing-thoughts\">0x7: Closing Thoughts</h2><p>I expected the usual DeFi compromises: admin keys, upgrades, emergency controls. Every protocol has them. I think what I found was a bit different.</p><p>Every finding required binary reverse engineering. If the source were open, the <code>TestnetSetYesterdayUserVlm</code> transaction type, freeze-without-unfreeze asymmetry, 8-wallet broadcaster monopoly, hidden lending protocol ‚Äì all would be public.</p><p>Not open-sourcing a decentralized protocol goes against the entire ethos of it. It is not about security. It is about hiding what the system actually does.</p><p>Now that we established that the trust assumptions look like this:</p><ol><li>The <code>execution_sender</code> key holder won‚Äôt mint tokens or steal funds</li><li>The Foundation won‚Äôt vote to freeze the chain and vanish</li><li>The 8 broadcasters won‚Äôt censor transactions</li><li>The whitelisted liquidators won‚Äôt front-run positions</li><li>The oracle updater won‚Äôt manipulate prices</li><li>Bridge withdrawals won‚Äôt face indefinite censorship</li><li>Accrued interest won‚Äôt vanish via accumulator override</li><li>Governance proposals match claims (unverifiable)</li><li>The BOLE lending protocol won‚Äôt amplify systemic risk</li></ol><p>If you have funds on Hyperliquid, I‚Äôd like to ask you dear reader, did you even know any of this?</p><p>Draw your own conclusions.</p><p><em>All findings are based on analysis of the Hyperliquid validator binary and L1 state snapshots. Addresses and state queries provided for independent verification.</em></p><hr><h2 id=\"sources\">Sources</h2><p>I‚Äôve spent this entire post documenting how Hyperliquid fails to be verifiable where it matters, but credit where it‚Äôs due: they <em>do</em> use cryptography in one place that matters.</p><p>The <code>hl-node</code> binary is GPG-signed by Hyperliquid, which is distributed via their validator onboarding process. <strong>That signature cryptographically proves they shipped <code>TestnetSetYesterdayUserVlm</code></strong>.</p><p>For once, good use of crypto!</p><table><thead><tr><th>File</th><th>Description</th></tr></thead><tbody><tr><td><a href=\"https://blog.can.ac/2025/12/20/reverse-engineering-hyperliquid/proof/hl-node-v76\"><code>hl-node-v76</code></a></td><td>Validator binary (72.4 MiB, ELF x86-64, signed Dec 2025)</td></tr><tr><td><a href=\"https://blog.can.ac/2025/12/20/reverse-engineering-hyperliquid/proof/hl-node-v76.sig\"><code>hl-node-v76.sig</code></a></td><td>Detached GPG signature from Hyperliquid Foundation</td></tr><tr><td><a href=\"https://blog.can.ac/2025/12/20/reverse-engineering-hyperliquid/proof/hyperfoundation-pubkey.asc\"><code>hyperfoundation-pubkey.asc</code></a></td><td>Hyperliquid‚Äôs GPG public key (<code>CF2C2EA3</code>)</td></tr></tbody></table><p><strong>Binary hash:</strong> <code>SHA256: 1c2911eda8d82b8b6d0569676e0afa841c76976db4acedd29674b15a3349ee1a</code></p><p>All addresses referenced in this post are for <code>hl-node-v76</code>. Addresses may differ across releases.</p><div><pre tabindex=\"0\"><code data-lang=\"bash\"><span><span>1</span><span><span>export</span> <span>GNUPGHOME</span><span>=</span><span>$(</span>mktemp -d<span>)</span> </span></span><span><span>2</span><span>gpg --import hyperfoundation-pubkey.asc </span></span><span><span>3</span><span>gpg --verify hl-node-v76.sig hl-node-v76</span></span></code></pre></div><hr><h2 id=\"resolved\">Resolved</h2><h2 id=\"0x0-the-362m-gap\"><del>0x0: The $362M Gap</del></h2><blockquote><p><del>The on-chain ledger shows $362M more in user claims than exists in the bridge. If everyone tried to withdraw, someone wouldn‚Äôt get paid.</del></p></blockquote><p><strong>Update (Dec 22):</strong> As <a href=\"https://x.com/cainosullivan/status/2003015288863015191\">@cainosullivan pointed out</a>, the gap is accounted for, by Circle‚Äôs <a href=\"https://hyperevmscan.io/address/0x6b9e773128f453f5c2c60935ee2de2cbc5390a24\">CoreDepositWallet</a> on HyperEVM, which holds ~$362M in native USDC. The bridge was indeed ‚Äúinsolvent‚Äù, but users are still able to go through HyperEVM‚Äôs native USDC path to withdraw.</p><p>User claims exceed the bridge by $362,454,741.25. At the same snapshot, HLP‚Äôs on-chain account value is $377.69M against $2.51M net deposits, implying $375.17M in gains. HLP is documented as the protocol‚Äôs backstop counterparty: <a href=\"https://nftevening.com/hyperliquid-deep-dive-2/\">‚ÄúWhen a trader‚Äôs order cannot find an immediate match, the HLP vault can take the opposite side of the trade‚Äù</a>. During the JELLY incident, <a href=\"https://thedefiant.io/news/defi/hyperliquid-token-tanks-as-another-vault-attack-sparks-controversy\">‚ÄúHLP acts as the counterparty for all trades on the platform‚Äù</a> absorbed the toxic position.</p><p>If HLP is the primary counterparty, you‚Äôd expect aggregate trader PnL and HLP PnL to be strongly anti-correlated <em>absent external hedging or off-ledger loss absorption</em>. The observed state (trader claims +$362M above bridge, HLP gains +$375M) contradicts that expectation unless: (1) other market makers absorb losses off-ledger, (2) minted USDC (<code>SystemAlignedQuoteSupplyDelta</code>) inflates balances, (3) <code>total_net_deposit</code> includes non-withdrawable components (fees, unrealized PnL adjustments), or (4) HLP‚Äôs gains came from liquidation penalties and fees rather than counterparty PnL. External market makers certainly exist; the problem is opacity, which makes the actual loss distribution unverifiable.</p><p><strong>Expected state:</strong></p><ul><li>Traders deposit $X via bridge</li><li>Traders collectively lose $Y to HLP</li><li>HLP account: +$Y</li><li>Trader claims: $X - $Y</li><li>Bridge balance: $X</li><li>Claims should be ‚â§ bridge</li></ul><p><strong>Observed state (2025-12-19T08:04:17.669123161):</strong></p><table><thead><tr><th>Metric</th><th>Value</th></tr></thead><tbody><tr><td>Bridge balance (<code>bridge_config.bal</code>, 6 decimals)</td><td>$4,011,884,542.58</td></tr><tr><td>Perp net deposit (<code>perp_dex_meta.total_net_deposit</code>)</td><td>$3,728,669,722.77</td></tr><tr><td>Spot USDC (<code>spot_user_states</code>, token 0)</td><td>$645,669,561.06</td></tr><tr><td><strong>Total claims (perp + spot)</strong></td><td><strong>$4,374,339,283.83</strong></td></tr><tr><td><strong>Excess (claims ‚àí bridge)</strong></td><td><strong>$362,454,741.25</strong></td></tr></tbody></table><p>HLP vault state (<code>0xdfc24b077bc1425ad1dea75bcb6f8158e10df303</code>):</p><table><thead><tr><th>Metric</th><th>Value</th></tr></thead><tbody><tr><td>HLP deposits (<code>vaults: 0xdfc24b...</code>, <code>user_states.n</code>)</td><td>$2,511,622.12</td></tr><tr><td>HLP <code>start_of_day_account_value</code></td><td>$377,686,137.67</td></tr><tr><td><strong>HLP ‚Äúgains‚Äù (value ‚àí deposits)</strong></td><td><strong>$375,174,515.54</strong></td></tr></tbody></table><p>Perpetual trading is zero-sum for realized PnL between counterparties, but fees, liquidations, and external hedging can move the numbers. Treat this as an invariant check, not a standalone proof of insolvency. However, the <em>on-chain</em> solvency test of ‚Äúcan the bridge cover all claims?‚Äù fails.</p><hr><h2 id=\"appendix\">Appendix</h2><h2 id=\"reproducing-the-accounting-gap\">Reproducing the accounting gap</h2><p>Export the snapshot and convert to SQLite with the provided script <a href=\"https://blog.can.ac/2025/12/20/reverse-engineering-hyperliquid/proof/state_to_sqlite.py\"><code>state_to_sqlite.py</code></a>:</p><div><pre tabindex=\"0\"><code data-lang=\"bash\"><span><span>1</span><span>python3 state_to_sqlite.py abci_state.rmp state.db</span></span></code></pre></div><p>Spot balances are stored as JSON in <code>spot_user_states.data</code>. The structure is <code>{\"b\": [[token_id, {\"t\": total, \"e\": escrow}], ...]}</code>. Token 0 is USDC:</p><div><pre tabindex=\"0\"><code data-lang=\"python\"><span><span> 1</span><span><span>import</span> <span>json</span><span>,</span> <span>sqlite3</span> </span></span><span><span> 2</span></span><span><span> 3</span><span><span>conn</span> <span>=</span> <span>sqlite3</span><span>.</span><span>connect</span><span>(</span><span>\"state.db\"</span><span>)</span> </span></span><span><span> 4</span><span><span>cur</span> <span>=</span> <span>conn</span><span>.</span><span>cursor</span><span>()</span> </span></span><span><span> 5</span></span><span><span> 6</span><span><span># Get vault addresses to exclude (vaults are separate from user claims)</span> </span></span><span><span> 7</span><span><span>vaults</span> <span>=</span> <span>{</span><span>row</span><span>[</span><span>0</span><span>]</span> <span>for</span> <span>row</span> <span>in</span> <span>cur</span><span>.</span><span>execute</span><span>(</span><span>\"SELECT address FROM vaults\"</span><span>)}</span> </span></span><span><span> 8</span></span><span><span> 9</span><span><span># System/internal addresses</span> </span></span><span><span>10</span><span><span>exclude</span> <span>=</span> <span>vaults</span> <span>|</span> <span>{</span> </span></span><span><span>11</span><span> <span>\"0x2000000000000000000000000000000000000000\"</span><span>,</span> <span># system spot</span> </span></span><span><span>12</span><span> <span>\"0x0000000000000000000000000000000000000000\"</span><span>,</span> <span># zero address</span> </span></span><span><span>13</span><span> <span>\"0xffffffffffffffffffffffffffffffffffffffff\"</span><span>,</span> <span># max address</span> </span></span><span><span>14</span><span><span>}</span> </span></span><span><span>15</span></span><span><span>16</span><span><span>total</span> <span>=</span> <span>0</span> </span></span><span><span>17</span><span><span>for</span> <span>addr</span><span>,</span> <span>data</span> <span>in</span> <span>cur</span><span>.</span><span>execute</span><span>(</span><span>\"SELECT address, data FROM spot_user_states\"</span><span>):</span> </span></span><span><span>18</span><span> <span>if</span> <span>addr</span> <span>in</span> <span>exclude</span><span>:</span> </span></span><span><span>19</span><span> <span>continue</span> </span></span><span><span>20</span><span> <span>state</span> <span>=</span> <span>json</span><span>.</span><span>loads</span><span>(</span><span>data</span><span>)</span> </span></span><span><span>21</span><span> <span>for</span> <span>entry</span> <span>in</span> <span>state</span><span>.</span><span>get</span><span>(</span><span>\"b\"</span><span>,</span> <span>[]):</span> <span># \"b\" = balances array</span> </span></span><span><span>22</span><span> <span>if</span> <span>isinstance</span><span>(</span><span>entry</span><span>,</span> <span>list</span><span>)</span> <span>and</span> <span>len</span><span>(</span><span>entry</span><span>)</span> <span>&gt;=</span> <span>2</span><span>:</span> </span></span><span><span>23</span><span> <span>token_id</span><span>,</span> <span>bal</span> <span>=</span> <span>entry</span><span>[</span><span>0</span><span>],</span> <span>entry</span><span>[</span><span>1</span><span>]</span> </span></span><span><span>24</span><span> <span>if</span> <span>token_id</span> <span>==</span> <span>0</span><span>:</span> <span># USDC (8 decimals in spot)</span> </span></span><span><span>25</span><span> <span>total</span> <span>+=</span> <span>int</span><span>(</span><span>bal</span><span>.</span><span>get</span><span>(</span><span>\"t\"</span><span>,</span> <span>0</span><span>))</span> <span># \"t\" = total</span> </span></span><span><span>26</span></span><span><span>27</span><span><span>print</span><span>(</span><span>f</span><span>\"Spot USDC: $</span><span>{</span><span>total</span> <span>/</span> <span>1e8</span><span>:</span><span>,.2f</span><span>}</span><span>\"</span><span>)</span></span></span></code></pre></div><p><strong>Double-counting check:</strong> Perp <code>total_net_deposit</code> is an aggregate counter, not derived from individual positions. Spot balances in <code>spot_user_states</code> are separate from perp margin. Verify by sampling: users with spot USDC should not have that same balance counted in their perp margin.</p><h2 id=\"all-transaction-actions\">All Transaction Actions</h2><p>Every user-initiated operation on Hyperliquid corresponds to one of these action types. Extracted from binary analysis of <code>hl-node</code>.</p><h3 id=\"trading-actions\">Trading Actions</h3><table><thead><tr><th>Action</th><th>Fields</th><th>Description</th></tr></thead><tbody><tr><td><code>Order</code></td><td>orders, grouping, builder?</td><td>Place orders (limit, market, trigger)</td></tr><tr><td><code>BatchModify</code></td><td>(nested)</td><td>Batch order modifications</td></tr><tr><td><code>Cancel</code></td><td>cancels: [{a, o}]</td><td>Cancel by asset+oid</td></tr><tr><td><code>CancelByCloid</code></td><td>cancels: [{asset, cloid}]</td><td>Cancel by client order ID</td></tr><tr><td><code>Liquidate</code></td><td>liquidator_to_assets, defaultLiquidator, requests</td><td>Liquidation action</td></tr><tr><td><code>TwapOrder</code></td><td>twap params</td><td>Time-weighted average price order</td></tr><tr><td><code>TwapCancel</code></td><td>twapId, a</td><td>Cancel TWAP order</td></tr><tr><td><code>UpdateUserLeverage</code></td><td>asset, isCross, leverage</td><td>Change leverage</td></tr><tr><td><code>UpdateIsolatedMargin</code></td><td>asset, isBuy, ntli</td><td>Update isolated margin</td></tr><tr><td><code>TopUpStrictIsolatedMargin</code></td><td>asset, ntl</td><td>Top up strict isolated margin</td></tr><tr><td><code>ModifyNetChildVaultPositions</code></td><td>childVaultAddresses, assets</td><td>Vault position netting</td></tr><tr><td><code>ScheduleCancel</code></td><td>(trigger params)</td><td>Schedule order cancellation</td></tr><tr><td><code>ApproveBuilderFee</code></td><td>builder, maxFeeRate</td><td>Approve builder fee</td></tr><tr><td><code>StartFeeTrial</code></td><td>perpAddBaseRate, perpCrossBaseRate, spotAddBaseRate, spotCrossBaseRate</td><td>Start fee trial</td></tr></tbody></table><h3 id=\"transfer-actions\">Transfer Actions</h3><table><thead><tr><th>Action</th><th>Fields</th><th>Description</th></tr></thead><tbody><tr><td><code>UsdSend</code></td><td>destination, amount, signatureChainId</td><td>Send USDC</td></tr><tr><td><code>SpotSend</code></td><td>destination, token, amount</td><td>Send spot token</td></tr><tr><td><code>SendAsset</code></td><td>destination, sourceDex, destinationDex, token, amount, fromSubAccount, nonce, maxFeeRate, builder</td><td>Cross-DEX asset send</td></tr><tr><td><code>SubAccountTransfer</code></td><td>subAccountUser, isDeposit, usd</td><td>Transfer to/from sub-account</td></tr><tr><td><code>SubAccountSpotTransfer</code></td><td>subAccountUser, token, amount, isDeposit</td><td>Spot token sub-account transfer</td></tr><tr><td><code>UsdClassTransfer</code></td><td>(params)</td><td>Move USDC between perp/spot</td></tr><tr><td><code>SystemSpotSend</code></td><td>destination, token, ntl, toPerp</td><td>System spot send</td></tr><tr><td><code>SystemSendAsset</code></td><td>destination, sourceDexOrSpot, destinationDexOrSpot, wei, isMint, ‚Ä¶</td><td>System asset send</td></tr><tr><td><code>SystemUsdClassTransfer</code></td><td>ntl, (params)</td><td>System USD class transfer</td></tr></tbody></table><h3 id=\"account-management\">Account Management</h3><table><thead><tr><th>Action</th><th>Fields</th><th>Description</th></tr></thead><tbody><tr><td><code>ApproveAgent3</code></td><td>agentAddress, agentName, nonce, expiry?</td><td>Approve trading agent</td></tr><tr><td><code>CreateSubAccount</code></td><td>name</td><td>Create sub-account</td></tr><tr><td><code>SetDisplayName</code></td><td>displayName</td><td>Set user display name</td></tr><tr><td><code>SetReferrer</code></td><td>code</td><td>Set referrer code</td></tr><tr><td><code>RegisterReferrer</code></td><td>code</td><td>Register as referrer</td></tr><tr><td><code>LinkStakingUser</code></td><td>(fields)</td><td>Link trading to staking user</td></tr><tr><td><code>ConvertToMultiSigUser</code></td><td>signers, threshold, nonce</td><td>Convert to multisig</td></tr></tbody></table><h3 id=\"vault-operations\">Vault Operations</h3><table><thead><tr><th>Action</th><th>Fields</th><th>Description</th></tr></thead><tbody><tr><td><code>CreateVault</code></td><td>name, description, initialUsd, frozenUser?</td><td>Create HLP vault</td></tr><tr><td><code>VaultTransfer</code></td><td>vaultAddress, isDeposit, usd</td><td>Deposit/withdraw vault</td></tr><tr><td><code>VaultDistribute</code></td><td>vaultAddress, usd</td><td>Distribute vault profits</td></tr><tr><td><code>VaultModify</code></td><td>vaultAddress, allowDeposits, alwaysCloseOnWithdraw</td><td>Modify vault settings</td></tr><tr><td><code>VoteGlobal</code></td><td>(vault modification)</td><td>Vote on vault parameters</td></tr><tr><td><code>ModifyNetChildVaultPositions</code></td><td>childVaultAddresses, assets</td><td>Modify child vault positions</td></tr></tbody></table><h3 id=\"staking-c-layer\">Staking (C-Layer)</h3><table><thead><tr><th>Action</th><th>Fields</th><th>Description</th></tr></thead><tbody><tr><td><code>TokenDelegate</code></td><td>validator, wei, isUndelegate</td><td>Delegate/undelegate HYPE</td></tr><tr><td><code>ClaimRewards</code></td><td>(none)</td><td>Claim staking rewards</td></tr><tr><td><code>CWithdraw</code></td><td>destination, wei, usd, builder?</td><td>Withdraw from staking</td></tr><tr><td><code>CUserModify</code></td><td>extendLongTermStaking, profile</td><td>Modify staking user</td></tr><tr><td><code>CSigner</code></td><td>(signer action)</td><td>C-signer operations</td></tr></tbody></table><h3 id=\"governance\">Governance</h3><table><thead><tr><th>Action</th><th>Fields</th><th>Description</th></tr></thead><tbody><tr><td><code>GovPropose</code></td><td>title, description, category, ‚Ä¶</td><td>Create governance proposal</td></tr><tr><td><code>GovVote</code></td><td>id, choice</td><td>Vote on proposal</td></tr><tr><td><code>VoteGlobal</code></td><td>(params)</td><td>Vote on global parameters</td></tr></tbody></table><h3 id=\"validator-operations\">Validator Operations</h3><table><thead><tr><th>Action</th><th>Fields</th><th>Description</th></tr></thead><tbody><tr><td><code>RegisterValidator</code></td><td>validator, signature, coldUserSignature, ‚Ä¶</td><td>Register as validator</td></tr><tr><td><code>CValidator</code></td><td>Register/ChangeProfile/Unregister</td><td>Validator profile management</td></tr><tr><td><code>ValidatorL1Vote</code></td><td>(vote params)</td><td>L1 validator vote</td></tr><tr><td><code>ValidatorL1Stream</code></td><td>riskFreeRate</td><td>L1 stream action</td></tr><tr><td><code>SignValidatorSetUpdate</code></td><td>validatorSet, signature</td><td>Sign validator set update</td></tr><tr><td><code>VoteAppHash</code></td><td>height, appHash</td><td>Vote on app hash</td></tr><tr><td><code>ForceIncreaseEpoch</code></td><td>validatorsAndSignatures, newActiveEpoch</td><td>Force epoch increase</td></tr><tr><td><code>VoteEthDeposit</code></td><td>ethId, (deposit details)</td><td>Vote on ETH deposit</td></tr><tr><td><code>VoteEthFinalizedWithdrawal</code></td><td>ethTxHash, (withdrawal details)</td><td>Vote on finalized withdrawal</td></tr><tr><td><code>VoteEthFinalizedValidatorSetUpdate</code></td><td>header, validatorSet</td><td>Vote on validator set update</td></tr><tr><td><code>ValidatorSignWithdrawal</code></td><td>destination, usd, vaultAddress?, builder?</td><td>Validator sign withdrawal</td></tr></tbody></table><h3 id=\"bridge-ethereum-l1\">Bridge (Ethereum L1)</h3><table><thead><tr><th>Action</th><th>Fields</th><th>Description</th></tr></thead><tbody><tr><td><code>Withdraw3</code></td><td>destination, usd, nonce, signatureChainId</td><td>Withdraw to L1</td></tr><tr><td><code>VoteEthDeposit</code></td><td>ethId, (deposit details)</td><td>Vote on ETH deposit</td></tr><tr><td><code>VoteEthFinalizedWithdrawal</code></td><td>ethTxHash, (withdrawal details)</td><td>Vote on finalized withdrawal</td></tr></tbody></table><h3 id=\"evm-operations\">EVM Operations</h3><table><thead><tr><th>Action</th><th>Fields</th><th>Description</th></tr></thead><tbody><tr><td><code>EvmRawTx</code></td><td>raw (hex tx)</td><td>Submit raw EVM transaction</td></tr><tr><td><code>FinalizeEvmContract</code></td><td>(contract params)</td><td>Finalize EVM contract</td></tr><tr><td><code>EvmUserModify</code></td><td>usingBigBlocks, input</td><td>Modify EVM user settings</td></tr><tr><td><code>SendToEvmWithData</code></td><td>destinationRecipient, addressEncoding, destinationChainId, gasLimit, wei, ‚Ä¶</td><td>Send to EVM with calldata</td></tr><tr><td><code>DeployerSendToEvmForFrozenUser</code></td><td>frozenUser, wei</td><td>Deployer send for frozen user</td></tr></tbody></table><h3 id=\"spottoken-operations\">Spot/Token Operations</h3><table><thead><tr><th>Action</th><th>Fields</th><th>Description</th></tr></thead><tbody><tr><td><code>SpotDeploy</code></td><td>RegisterToken/RegisterToken2/RegisterSpot/RegisterHyperliquidity/‚Ä¶</td><td>Deploy spot markets</td></tr><tr><td><code>SpotSend</code></td><td>destination, token, amount</td><td>Send spot token</td></tr><tr><td><code>Hip3Deploy</code></td><td>collateralToken, oracleUpdater, ‚Ä¶</td><td>HIP-3 deployment</td></tr></tbody></table><details><summary><strong>SpotDeploy Variants (17)</strong></summary><table><thead><tr><th>Variant</th><th>Description</th></tr></thead><tbody><tr><td><code>RegisterToken</code></td><td>Register new token</td></tr><tr><td><code>RegisterToken2</code></td><td>Register token v2</td></tr><tr><td><code>MaxGas</code></td><td>Set max gas</td></tr><tr><td><code>UserGenesis</code></td><td>User genesis</td></tr><tr><td><code>ExistingTokenAndWei</code></td><td>Existing token deposit</td></tr><tr><td><code>BlacklistUsers</code></td><td>Blacklist users</td></tr><tr><td><code>Genesis</code></td><td>Token genesis</td></tr><tr><td><code>RegisterSpot</code></td><td>Register spot market</td></tr><tr><td><code>RegisterHyperliquidity</code></td><td>Register hyperliquidity pool</td></tr><tr><td><code>RequestEvmContract</code></td><td>Request EVM contract</td></tr><tr><td><code>SetFullName</code></td><td>Set token full name</td></tr><tr><td><code>SetDeployerTradingFeeShare</code></td><td>Set deployer fee share</td></tr><tr><td><code>EnableFreezePrivilege</code></td><td>Enable freeze privilege</td></tr><tr><td><code>FreezeUser</code></td><td>Freeze user</td></tr><tr><td><code>RevokeFreezePrivilege</code></td><td>Revoke freeze privilege</td></tr><tr><td><code>EnableQuoteToken</code></td><td>Enable as quote token</td></tr><tr><td><code>EnableAlignedQuoteToken</code></td><td>Enable as aligned quote token</td></tr></tbody></table></details><h3 id=\"dex-abstraction\">DEX Abstraction</h3><table><thead><tr><th>Action</th><th>Fields</th><th>Description</th></tr></thead><tbody><tr><td><code>AgentEnableDexAbstraction</code></td><td>enabled</td><td>Enable DEX abstraction for agent</td></tr><tr><td><code>UserDexAbstraction</code></td><td>enabled, ‚Ä¶</td><td>Enable DEX abstraction for user</td></tr><tr><td><code>UserPortfolioMargin</code></td><td>(margin params)</td><td>Portfolio margin settings</td></tr><tr><td><code>BoleAction</code></td><td>operation (Borrow/Supply/Repay), token, amount</td><td>Borrow/lend operations</td></tr></tbody></table><h3 id=\"reserveborrow-lend\">Reserve/Borrow-Lend</h3><table><thead><tr><th>Action</th><th>Fields</th><th>Description</th></tr></thead><tbody><tr><td><code>ReserveRequestWeight</code></td><td>weight</td><td>Request reserve weight</td></tr></tbody></table><h3 id=\"systeminternal\">System/Internal</h3><table><thead><tr><th>Action</th><th>Fields</th><th>Description</th></tr></thead><tbody><tr><td><code>SetGlobal</code></td><td>pxs, externalPerpPxs, usdtUsdcPx</td><td>Set global prices</td></tr><tr><td><code>Noop</code></td><td>(none)</td><td>No operation</td></tr><tr><td><code>ReassessFees</code></td><td>(none)</td><td>Reassess fees</td></tr><tr><td><code>SystemApproveBuilderFee</code></td><td>(params)</td><td>System approve builder fee</td></tr><tr><td><code>SystemAlignedQuoteSupplyDelta</code></td><td>token, wei, isMint</td><td>Aligned quote supply delta</td></tr></tbody></table><h2 id=\"all-governance-actions\">All governance actions</h2><p>89 total variants extracted from <code>hl-node</code>. All execute immediately upon validator consensus: no timelocks, no user consent, no reversal mechanisms.</p><h3 id=\"fee--trading-parameters-0x000x07\">Fee &amp; Trading Parameters (0x00‚Äì0x07)</h3><table><thead><tr><th>Code</th><th>Action</th><th>Description</th></tr></thead><tbody><tr><td>0x00</td><td><code>FeeSchedule</code></td><td>Modify fee structure (Vec, max 10k entries)</td></tr><tr><td>0x01</td><td><code>ReferralBucketMillis</code></td><td>Referral bucket timing</td></tr><tr><td>0x02</td><td><code>OverrideFundingImpactUsd</code></td><td>Override funding impact per asset</td></tr><tr><td>0x03</td><td><code>FundingClamp</code></td><td>Set funding rate bounds per asset</td></tr><tr><td>0x04</td><td><code>DefaultImpactUsd</code></td><td>Default price impact threshold</td></tr><tr><td>0x05</td><td><code>MaxOrderDistanceFromAnchor</code></td><td>Max order distance from oracle (0.2‚Äì0.99)</td></tr><tr><td>0x06</td><td><code>InsertMarginTable</code></td><td>Insert margin requirement table</td></tr><tr><td>0x07</td><td><code>SetMarginTableIds</code></td><td>Assign margin tables to assets</td></tr></tbody></table><h3 id=\"system-control-0x080x0c\">System Control (0x08‚Äì0x0C)</h3><table><thead><tr><th>Code</th><th>Action</th><th>Description</th></tr></thead><tbody><tr><td>0x08</td><td><code>SimulateCrashHeight</code></td><td>Simulate consensus crash at height</td></tr><tr><td>0x09</td><td><code>NewSzDecimals</code></td><td>Update size decimal precision</td></tr><tr><td>0x0A</td><td><code>PerformAutoDeleveraging</code></td><td>Trigger ADL</td></tr><tr><td>0x0B</td><td><code>AssetsAtOpenInterestCap</code></td><td>Mark assets at OI cap</td></tr><tr><td>0x0C</td><td><code>AdlShortfallRemaining</code></td><td>ADL shortfall tracking</td></tr></tbody></table><h3 id=\"token--bridge-restrictions-0x0d0x11\">Token &amp; Bridge Restrictions (0x0D‚Äì0x11)</h3><table><thead><tr><th>Code</th><th>Action</th><th>Description</th></tr></thead><tbody><tr><td>0x0D</td><td><code>HlOnlyCoins</code></td><td>Restrict tokens to Hyperliquid only (trap funds)</td></tr><tr><td>0x0E</td><td><code>StakingEpochDurationSeconds</code></td><td>Staking epoch duration (no bounds check)</td></tr><tr><td>0x0F</td><td><code>StrictIsolatedCoins</code></td><td>Force isolated margin mode (can trigger liquidations)</td></tr><tr><td>0x10</td><td><code>Bridge2WithdrawFee</code></td><td>Bridge withdrawal fee</td></tr><tr><td>0x11</td><td><code>AllowedBridgeValidators</code></td><td>Control bridge validator set (max 10k)</td></tr></tbody></table><h3 id=\"validator-management-0x120x13\">Validator Management (0x12‚Äì0x13)</h3><table><thead><tr><th>Code</th><th>Action</th><th>Description</th></tr></thead><tbody><tr><td>0x12</td><td><code>AllowedCValidator</code></td><td>Whitelist validator address</td></tr><tr><td>0x13</td><td><code>ForceRecomputeValidatorState</code></td><td>Force state recomputation</td></tr></tbody></table><h3 id=\"signature--margin-overrides-0x140x17\">Signature &amp; Margin Overrides (0x14‚Äì0x17)</h3><table><thead><tr><th>Code</th><th>Action</th><th>Description</th></tr></thead><tbody><tr><td>0x14</td><td><code>OverrideMaxSignatureValiditySeconds</code></td><td>Override signature validity</td></tr><tr><td>0x15</td><td><code>OverrideIsolatedMaxLeverage</code></td><td>Override max leverage per asset</td></tr><tr><td>0x16</td><td><code>OverrideIsolatedMarginRequirement</code></td><td>Override margin requirement</td></tr><tr><td>0x17</td><td><code>CanonicalTokens</code></td><td>Set canonical token routing</td></tr></tbody></table><h3 id=\"user-control-0x180x1d\">User Control (0x18‚Äì0x1D)</h3><table><thead><tr><th>Code</th><th>Action</th><th>Description</th></tr></thead><tbody><tr><td>0x18</td><td><code>DisableSpot</code></td><td>Disable spot trading</td></tr><tr><td>0x19</td><td><code>MaxHlpWithdrawPerSecond</code></td><td>Rate limit HLP withdrawals (DOS vector)</td></tr><tr><td>0x1A</td><td><code>QuarantineUser</code></td><td><strong>Freeze user account</strong> (no undo mechanism)</td></tr><tr><td>0x1B</td><td><code>CancelUserOrders</code></td><td>Force cancel all user orders</td></tr><tr><td>0x1C</td><td><code>UserCanLiquidate</code></td><td>Toggle user‚Äôs liquidation privileges</td></tr><tr><td>0x1D</td><td><code>UserIsUnrewarded</code></td><td>Exclude user from rewards</td></tr></tbody></table><h3 id=\"market--asset-control-0x1e0x25\">Market &amp; Asset Control (0x1E‚Äì0x25)</h3><table><thead><tr><th>Code</th><th>Action</th><th>Description</th></tr></thead><tbody><tr><td>0x1E</td><td><code>AllowDuplicateTokenNames</code></td><td>Allow duplicate token names</td></tr><tr><td>0x1F</td><td><code>DeployGasAuctionChange</code></td><td>Modify gas auction parameters</td></tr><tr><td>0x20</td><td><code>FreezeChain</code></td><td><strong>Halt chain</strong> at specified height (within 50k blocks)</td></tr><tr><td>0x21</td><td><code>ModifyVault</code></td><td>Arbitrary vault configuration</td></tr><tr><td>0x22</td><td><code>HaltPerpTrading</code></td><td><strong>Instant trading halt</strong> per asset</td></tr><tr><td>0x23</td><td><code>RegisterAsset2</code></td><td>Register new tradeable asset</td></tr><tr><td>0x24</td><td><code>ModifyReferrer</code></td><td>Override user‚Äôs referrer (fee extraction)</td></tr><tr><td>0x25</td><td><code>ModifyNonCirculatingSupply</code></td><td>Modify circulating supply accounting</td></tr></tbody></table><h3 id=\"network--validator-operations-0x260x34\">Network &amp; Validator Operations (0x26‚Äì0x34)</h3><table><thead><tr><th>Code</th><th>Action</th><th>Description</th></tr></thead><tbody><tr><td>0x26</td><td><code>ModifyBroadcaster</code></td><td>Control broadcaster set</td></tr><tr><td>0x27</td><td><code>ModifyCStakingPeriods</code></td><td>Modify staking periods</td></tr><tr><td>0x28</td><td><code>CValidator</code></td><td>Validator profile (register/change/unregister)</td></tr><tr><td>0x29</td><td><code>UnjailAll</code></td><td><strong>Mass amnesty</strong>: unjail all validators</td></tr><tr><td>0x2A</td><td><code>MaxNValidators</code></td><td>Set max validator count (centralization)</td></tr><tr><td>0x2B</td><td><code>SetReserveAccumulator</code></td><td>Direct reserve value manipulation</td></tr><tr><td>0x2C</td><td><code>UnjailSigner</code></td><td>Unjail specific signer</td></tr><tr><td>0x2D</td><td><code>RefundCSignerRequestWeights</code></td><td>Refund signer request weights</td></tr><tr><td>0x2E</td><td><code>TestnetSpotDeploy</code></td><td>[TESTNET] Spot deployment</td></tr><tr><td>0x2F</td><td><code>TestnetHip3Deploy</code></td><td>[TESTNET] HIP-3 deployment</td></tr><tr><td>0x30</td><td><code>SetNativeToken</code></td><td>Set native token (one-time, ‚ÄúHYPE‚Äù)</td></tr><tr><td>0x31</td><td><code>SetSelfDelegationRequirement</code></td><td>Self-delegation minimum (0 allows Sybil)</td></tr><tr><td>0x32</td><td><code>SetAllowAllValidators</code></td><td>Permissionless validator mode</td></tr><tr><td>0x33</td><td><code>DisableCValidator</code></td><td>Disable specific validator</td></tr><tr><td>0x34</td><td><code>DisableNodeIp</code></td><td>Ban node by IP</td></tr></tbody></table><h3 id=\"staking--rewards-0x350x37\">Staking &amp; Rewards (0x35‚Äì0x37)</h3><table><thead><tr><th>Code</th><th>Action</th><th>Description</th></tr></thead><tbody><tr><td>0x35</td><td><code>SetStakesDecaySeconds</code></td><td>Stake decay duration</td></tr><tr><td>0x36</td><td><code>SetDistributeRewardBucketSeconds</code></td><td>Reward distribution timing</td></tr><tr><td>0x37</td><td><code>SetMaxOiPerSecond</code></td><td>Max OI change rate per market</td></tr></tbody></table><h3 id=\"evm-control-0x380x3c\">EVM Control (0x38‚Äì0x3C)</h3><table><thead><tr><th>Code</th><th>Action</th><th>Description</th></tr></thead><tbody><tr><td>0x38</td><td><code>SetEvmEnabled</code></td><td><strong>EVM kill switch</strong></td></tr><tr><td>0x39</td><td><code>SetPartialLiquidationCooldown</code></td><td>Partial liquidation cooldown</td></tr><tr><td>0x3A</td><td><code>SetEvmBlockDuration</code></td><td>EVM block duration (timing attacks)</td></tr><tr><td>0x3B</td><td><code>SetEvmPrecompileEnabled</code></td><td>Toggle precompiles (disable ecrecover breaks all sigs)</td></tr><tr><td>0x3C</td><td><code>SetEvmL1TransfersEnabled</code></td><td><strong>Trap funds in EVM</strong></td></tr></tbody></table><h3 id=\"action-delays--quote-tokens-0x3d0x42\">Action Delays &amp; Quote Tokens (0x3D‚Äì0x42)</h3><table><thead><tr><th>Code</th><th>Action</th><th>Description</th></tr></thead><tbody><tr><td>0x3D</td><td><code>SetMaxWithdrawLeverage</code></td><td>Max leverage for withdrawals</td></tr><tr><td>0x3E</td><td><code>SetActionDelayerEnabled</code></td><td><strong>Bypass timelocks</strong></td></tr><tr><td>0x3F</td><td><code>SetActionDelayedActionsRefund</code></td><td>Delayed action refund policy</td></tr><tr><td>0x40</td><td><code>AllowQuoteToken</code></td><td>Toggle quote token (instant market shutdown)</td></tr><tr><td>0x41</td><td><code>ValidatorL1VoteEnabled</code></td><td>Toggle L1 validator voting</td></tr><tr><td>0x42</td><td><code>SetCheckAllUsersCollateralizedCross</code></td><td>Cross-collateral check toggle</td></tr></tbody></table><h3 id=\"perpdex-parameters-0x430x4d\">PerpDex Parameters (0x43‚Äì0x4D)</h3><table><thead><tr><th>Code</th><th>Action</th><th>Description</th></tr></thead><tbody><tr><td>0x43</td><td><code>SetPerpDexTransferBounds</code></td><td>Transfer bounds per DEX</td></tr><tr><td>0x44</td><td><code>SetPerpDexOpenInterestFundingCap</code></td><td>OI funding cap</td></tr><tr><td>0x45</td><td><code>SetPerpDexOpenInterestLimit</code></td><td>OI limit</td></tr><tr><td>0x46</td><td><code>SetPerpDexDailyInterestLimit</code></td><td>Daily interest limit</td></tr><tr><td>0x47</td><td><code>SetPerpDexMaxNotionalTransferredTotal</code></td><td>Max notional transfer</td></tr><tr><td>0x48</td><td><code>SetPageStatus</code></td><td>Page status flag</td></tr><tr><td>0x49</td><td><code>SetLiquidBaseTokens</code></td><td>Liquid base token set</td></tr><tr><td>0x4A</td><td><code>SetLiquidQuoteTokens</code></td><td>Liquid quote token set</td></tr><tr><td>0x4B</td><td><code>SetCoreWriterActionEnabled</code></td><td>Core writer action toggle</td></tr><tr><td>0x4C</td><td><code>SetPerpDexsLocked</code></td><td>Lock perp DEXs</td></tr><tr><td>0x4D</td><td><code>SetHip3NoCross</code></td><td>HIP-3 cross-margin restriction</td></tr></tbody></table><h3 id=\"usdc--dex-abstraction-0x4e0x4f\">USDC &amp; DEX Abstraction (0x4E‚Äì0x4F)</h3><table><thead><tr><th>Code</th><th>Action</th><th>Description</th></tr></thead><tbody><tr><td>0x4E</td><td><code>SetUsdcEvmContract</code></td><td><strong>USDC contract control</strong> (6 subcases: SetAddress, SetEnabled, MigrateBalances, DeployEvmContract, ClearContracts, SetFlag)</td></tr><tr><td>0x4F</td><td><code>SetDexAbstractionEnabled</code></td><td>DEX abstraction toggle</td></tr></tbody></table><h3 id=\"bolelending-protocol-0x50\">Bole/Lending Protocol (0x50)</h3><table><thead><tr><th>Code</th><th>Action</th><th>Description</th></tr></thead><tbody><tr><td>0x50</td><td><code>SetBole</code></td><td><strong>Lending protocol control</strong> (7 subcases: EnableBole, SetPoolConfig, SetUtilizationRange, SetBorrowRange, SetAutoRepayEnabled, SetReserveAccumulator, TestnetAction)</td></tr></tbody></table><h3 id=\"testnet-only-0x510x58\">Testnet-Only (0x51‚Äì0x58)</h3><table><thead><tr><th>Code</th><th>Action</th><th>Description</th></tr></thead><tbody><tr><td>0x51</td><td><code>TestnetFixUsdc</code></td><td>Arbitrary USDC balance rewrite</td></tr><tr><td>0x52</td><td><code>TestnetDepositFor</code></td><td>Mint USDC to any address (max 920M per call)</td></tr><tr><td>0x53</td><td><code>TestnetSpotSendFor</code></td><td>Transfer tokens from any user</td></tr><tr><td>0x54</td><td><code>TestnetDisableFeeTrial</code></td><td>Disable fee trial</td></tr><tr><td>0x55</td><td><code>TestnetChangeTokenDeployer</code></td><td>Hijack token contracts</td></tr><tr><td>0x56</td><td><code>TestnetChangePerpDexDeployer</code></td><td>Hijack perp DEX control</td></tr><tr><td>0x57</td><td><code>TestnetSetYesterdayUserVlm</code></td><td>Override historical volume</td></tr><tr><td>0x58</td><td><code>TestnetAddMainnetUsers</code></td><td>Migrate mainnet users</td></tr></tbody></table></div></div>"},{"id":"https://www.justice.gov/opa/pr/ceo-health-care-software-company-sentenced-1b-fraud-conspiracy","title":"CEO of Health Care Software Company Sentenced for $1B Fraud Conspiracy","link":"https://www.justice.gov/opa/pr/ceo-health-care-software-company-sentenced-1b-fraud-conspiracy","hnCommentsUrl":"https://news.ycombinator.com/item?id=46398752","content":"<a href=\"https://news.ycombinator.com/item?id=46398752\">Comments</a>","date":1766805296000,"feedTitle":"Hacker News","isHackerNews":true,"isGoogleNews":false}]}